<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta name="robots" content="noindex">
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>/magnus/back_end/Genetic/include/WhiteheadExperiment.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.6 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>/magnus/back_end/Genetic/include/WhiteheadExperiment.h</h1><a href="WhiteheadExperiment_h.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <font class="comment">/*</font>
00002 <font class="comment"> *   $Id:</font>
00003 <font class="comment"> */</font>
00004  
00005 <font class="comment">// Copyright (C) 1998 The New York Group Theory Cooperative</font>
00006 <font class="comment">// See magnus/doc/COPYRIGHT for the full notice.</font>
00007 
00008 <font class="comment">// Contents: Informal test.</font>
00009 <font class="comment">//</font>
00010 <font class="comment">// Principal Author: Alexei Miasnikov</font>
00011 <font class="comment">//</font>
00012 <font class="comment">// Status:</font>
00013 <font class="comment">//</font>
00014 <font class="comment">// Revision History:</font>
00015 <font class="comment">//</font>
00016 
00017 <font class="preprocessor">#ifndef WHITEHEAD_EXP</font>
00018 <font class="preprocessor"></font><font class="preprocessor">#define WHITEHEAD_EXP</font>
00019 <font class="preprocessor"></font>
00020 <font class="preprocessor">#include &lt;values.h&gt;</font>
00021 <font class="preprocessor">#include "<a class="code" href="global_h.html">global.h</a>"</font>
00022 <font class="preprocessor">#include "<a class="code" href="Map_h.html">Map.h</a>"</font>
00023 <font class="preprocessor">#include "<a class="code" href="Polynomial_h.html">Polynomial.h</a>"</font>
00024 <font class="preprocessor">#include "<a class="code" href="ACConfig_h.html">ACConfig.h</a>"</font>
00025 <font class="preprocessor">#include "<a class="code" href="RandomNumbers_h.html">RandomNumbers.h</a>"</font>
00026 <font class="preprocessor">#include "<a class="code" href="Roulette_h.html">Roulette.h</a>"</font>
00027 <font class="preprocessor">#include "<a class="code" href="GAIsPartOfBasis_h.html">GAIsPartOfBasis.h</a>"</font>
00028 <font class="preprocessor">#include &lt;time.h&gt;</font>
00029 <font class="preprocessor">#include "<a class="code" href="RandomAutoInFree_h.html">RandomAutoInFree.h</a>"</font>
00030 <font class="preprocessor">#include "<a class="code" href="NormalRandomWord_h.html">NormalRandomWord.h</a>"</font>
00031 
00032 
<a name="l00033"></a><a class="code" href="class_WhiteheadExperiment.html">00033</a> <font class="keyword">class </font><a class="code" href="class_WhiteheadExperiment.html">WhiteheadExperiment</a>
00034 {
00035 <font class="keyword">private</font>:
<a name="l00036"></a><a class="code" href="class_WhiteheadExperiment.html#o0">00036</a>   <font class="keywordtype">int</font> uBound;
<a name="l00037"></a><a class="code" href="class_WhiteheadExperiment.html#o1">00037</a>   <font class="keywordtype">int</font> lBound;
<a name="l00038"></a><a class="code" href="class_WhiteheadExperiment.html#o2">00038</a>   <a class="code" href="class_ACConfig.html">ACConfig</a> c;
<a name="l00039"></a><a class="code" href="class_WhiteheadExperiment.html#o3">00039</a>   ofstream exp_out;
<a name="l00040"></a><a class="code" href="class_WhiteheadExperiment.html#o4">00040</a>   <a class="code" href="class_FreeGroup.html">FreeGroup</a> G;
<a name="l00041"></a><a class="code" href="class_WhiteheadExperiment.html#o5">00041</a>   <font class="keywordtype">int</font> N;
<a name="l00042"></a><a class="code" href="class_WhiteheadExperiment.html#o6">00042</a>   <font class="keywordtype">int</font> autos;
<a name="l00043"></a><a class="code" href="class_WhiteheadExperiment.html#o7">00043</a>   <font class="keywordtype">int</font> lbound;
<a name="l00044"></a><a class="code" href="class_WhiteheadExperiment.html#o8">00044</a>   <font class="keywordtype">int</font> ubound;
00045   
00046 <font class="keyword">public</font>: 
<a name="l00047"></a><a class="code" href="class_WhiteheadExperiment.html#a0">00047</a>   <a class="code" href="class_WhiteheadExperiment.html#a0">WhiteheadExperiment</a>() : uBound(500),lBound(5),exp_out("garbage")
00048   {
00049     <a class="code" href="class_Chars.html">Chars</a> errMsg;
00050     
00051     ifstream in(<font class="stringliteral">"ac.in"</font>);
00052     
00053     <font class="keywordflow">if</font> ( !in ) {
00054       cout &lt;&lt; <font class="stringliteral">" Error: Configuration file \"ac.in\" couldn't be found."</font> &lt;&lt; endl;
00055       exit( 0 );
00056     }
00057     
00058     in &gt;&gt; c;
00059     cout &lt;&lt; c &lt;&lt; endl;
00060     
00061     cout &lt;&lt; <font class="stringliteral">"Enter a free group: "</font>;
00062     errMsg = cin &gt;&gt; G;
00063     <font class="keywordflow">if</font>( errMsg.<a class="code" href="class_Chars.html#a4">length</a>() &gt; 0 ) {
00064       cout &lt;&lt; errMsg;
00065       exit(0);
00066     }
00067     
00068     cout &lt;&lt; G &lt;&lt; endl;
00069     
00070     exp_out &lt;&lt; <font class="stringliteral">"Group : "</font> &lt;&lt; G &lt;&lt; endl;
00071     cout &lt;&lt; <font class="stringliteral">"Number of experiments : "</font>; cin &gt;&gt; N; cout &lt;&lt; N &lt;&lt; endl;
00072     cout &lt;&lt; <font class="stringliteral">"Number of Whitehead autos : "</font>; cin &gt;&gt; autos; 
00073     cout &lt;&lt; autos &lt;&lt; endl;
00074     
00075     cout &lt;&lt; <font class="stringliteral">"Lower bound : "</font>; cin &gt;&gt; lbound; cout &lt;&lt; lbound &lt;&lt; endl;
00076     cout &lt;&lt; <font class="stringliteral">"Upper bound : "</font>; cin &gt;&gt; ubound; cout &lt;&lt; ubound &lt;&lt; endl;
00077   }
00078 
<a name="l00079"></a><a class="code" href="class_WhiteheadExperiment.html#a1">00079</a>   <font class="keywordtype">void</font> <a class="code" href="class_WhiteheadExperiment.html#a1">run</a>()<font class="keyword"></font>{
00080     <font class="keywordtype">int</font> autoLSum = 0;
00081     <font class="keywordtype">int</font> tupleLSum1 = 0;
00082     <font class="keywordtype">int</font> tupleLSum2 = 0;
00083     <font class="keywordtype">int</font> tupleLSumMin = 0;
00084     <font class="keywordtype">int</font> nGens = 0;
00085     <font class="keywordtype">int</font> sumWordsInTuple = 0;
00086     <font class="keywordtype">float</font> sumOfSeconds = 0;
00087     <font class="keywordtype">int</font> numOfSucs = 0;
00088     
00089     <a class="code" href="class_UniformRandom.html">UniformRandom</a> randPicker;
00090     
00091     <font class="keywordtype">bool</font> draw_transf = <font class="keyword">true</font>;
00092     
00093     <a class="code" href="class_RandomAutoInFree.html">RandomAutoInFree</a> rAuto( G,autos, <font class="keyword">false</font>);
00094     
00095     <font class="keywordflow">for</font> (<font class="keywordtype">int</font> i = 0; i &lt; N; i++){
00096       <font class="comment">// get map</font>
00097       <font class="keywordtype">int</font> auto_l = 0;
00098       
00099       
00100       <font class="comment">// while |tuple| not in bounds</font>
00101       <a class="code" href="class_Map.html">Map</a> map = rAuto.<a class="code" href="class_RandomAutoInFree.html#a1">getAutomorphism</a>();
00102       
00103       
00104       <a class="code" href="class_VectorOf.html">VectorOf&lt;Word&gt;</a> image = map.<a class="code" href="class_Map.html#a8">generatingImages</a>();
00105       <a class="code" href="class_VectorOf.html">VectorOf&lt;Word&gt;</a> tuple(1);
00106       tuple[0] = image[randPicker.<a class="code" href="class_UniformRandom.html#a2">rand</a>(0,G.numberOfGenerators()-1)].freelyReduce();
00107       
00108       <font class="comment">//      if (tuple[0].length() &lt; 13 ){</font>
00109       <font class="comment">//        i--;</font>
00110       <font class="comment">//        continue;</font>
00111       <font class="comment">//      }</font>
00112       
00113       <font class="comment">// find minimal of the  tuple </font>
00114       <font class="keywordtype">bool</font> found;
00115       <font class="keywordtype">int</font> nTrys = 0;
00116       <font class="keywordflow">if</font> (tuple[0].<a class="code" href="class_VectorOf.html#a11">length</a>() &gt;= lbound &amp;&amp; tuple[0].<a class="code" href="class_VectorOf.html#a11">length</a>() &lt;= ubound) {
00117         found = <font class="keyword">false</font>;
00118         nTrys = 0;
00119         <font class="keywordflow">while</font> ( nTrys &lt; 5 &amp;&amp; !found){
00120           nTrys++;
00121           <a class="code" href="class_GAIsPartOfBasis.html">GAIsPartOfBasis</a> min_tuple(G,c,tuple);
00122           
00123           <font class="keywordflow">if</font> (draw_transf){
00124             min_tuple.<a class="code" href="class_GAIsPartOfBasis.html#a14">printTransformations</a>( cout );
00125             draw_transf = <font class="keyword">false</font>;
00126           }
00127           found = min_tuple.<a class="code" href="class_GAIsPartOfBasis.html#a5">isPartOfBasis</a>(exp_out,exp_out);
00128           
00129           <font class="keywordflow">if</font> (found) {
00130             <font class="comment">//       if (false) {</font>
00131             cout &lt;&lt; endl &lt;&lt; endl &lt;&lt; tuple[0].<a class="code" href="class_VectorOf.html#a11">length</a>() &lt;&lt; <font class="stringliteral">" |  "</font> &lt;&lt; min_tuple.<a class="code" href="class_GAIsPartOfBasis.html#a11">nOfGenerations</a>() &lt;&lt; <font class="stringliteral">" | "</font> &lt;&lt; min_tuple.<a class="code" href="class_GAIsPartOfBasis.html#a8">getSolutionSequence</a>() &lt;&lt; <font class="stringliteral">" | "</font>;
00132           } 
00133         }
00134         <font class="keywordflow">if</font> (!found) {
00135           cout &lt;&lt; endl &lt;&lt; endl &lt;&lt; tuple[0].<a class="code" href="class_VectorOf.html#a11">length</a>() &lt;&lt; <font class="stringliteral">" |  "</font> &lt;&lt; 999999 &lt;&lt; <font class="stringliteral">" | "</font>;
00136         }
00137         cout &lt;&lt; nTrys &lt;&lt; <font class="stringliteral">" | "</font>;
00138         G.printVectorOfWords(cout, tuple); 
00139       } <font class="keywordflow">else</font> {
00140         i--;
00141       }
00142     }
00143     
00144     exp_out.close();
00145     <font class="comment">//   best_out.close();</font>
00146   }
00147 };
00148 
00149 <font class="preprocessor">#endif</font>
</font></pre></div><hr><address><small>Generated at Tue Jun 19 09:49:36 2001 for Magnus Classes by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.6 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2001</small></address>
</body>
</html>
