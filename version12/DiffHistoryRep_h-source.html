<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta name="robots" content="noindex">
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>/magnus/back_end/KB/include/DiffHistoryRep.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.6 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>/magnus/back_end/KB/include/DiffHistoryRep.h</h1><a href="DiffHistoryRep_h.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <font class="comment">/*</font>
00002 <font class="comment"> *   $Id: DiffHistoryRep.h,v 1.1 1996/08/15 18:55:37 bormotov Exp $</font>
00003 <font class="comment"> */</font>
00004 
00005 <font class="comment">// Copyright (C) 1994 The New York Group Theory Cooperative</font>
00006 <font class="comment">// See magnus/doc/COPYRIGHT for the full notice.</font>
00007 
00008 <font class="comment">// Contents: Definition of DiffHistoryRep and related classes.</font>
00009 <font class="comment">//</font>
00010 <font class="comment">// Principal Author: Sarah Rees</font>
00011 <font class="comment">//</font>
00012 <font class="comment">// Status: in progress</font>
00013 <font class="comment">//</font>
00014 <font class="comment">// Revision History:</font>
00015 <font class="comment">//</font>
00016 
00017 <font class="preprocessor">#ifndef _DiffHistoryRep_H_</font>
00018 <font class="preprocessor"></font><font class="preprocessor">#define _DiffHistoryRep_H_</font>
00019 <font class="preprocessor"></font>
00020 <font class="preprocessor">#include "<a class="code" href="Word_h.html">Word.h</a>"</font>
00021 <font class="preprocessor">#include "<a class="code" href="Vector_h.html">Vector.h</a>"</font>
00022 <font class="preprocessor">#include "<a class="code" href="RefCounter_h.html">RefCounter.h</a>"</font>
00023 <font class="comment">// #include "DFSARep.h"</font>
<a name="l00024"></a><a class="code" href="DiffHistoryRep_h.html#a0">00024</a> <font class="keyword">typedef</font> <font class="keywordtype">int</font> State; 
00025 <font class="comment">// @sr for now this file needs to be independent of DFSARep.</font>
00026 <font class="comment">// So for now we'll typedef State to be int, but that's only temporary.</font>
00027 <font class="comment">// That's because a declaration of SetOf&lt;DiffHistory&gt; is necessary in Set.C</font>
00028 <font class="comment">// and that can't be dependent on the FSA hierarchy.</font>
00029 <font class="comment">// If that weren't necessary, this could all be in DiffMachineRep.h</font>
00030 
00031 <font class="keyword">class </font><a class="code" href="class_DiffHistoryVtx.html">DiffHistoryVtx</a>;
00032 
00033 <font class="comment">// First the AheadInfoRep hierarchy, one derived class for each word order.</font>
00034 
<a name="l00035"></a><a class="code" href="class_AheadInfoRep.html">00035</a> <font class="keyword">class </font><a class="code" href="class_AheadInfoRep.html">AheadInfoRep</a> : <font class="keyword">public</font> <a class="code" href="class_RefCounter.html">RefCounter</a> {
00036 <font class="keyword">public</font>:
00037 <font class="comment">//constructor</font>
<a name="l00038"></a><a class="code" href="class_AheadInfoRep.html#a0">00038</a>   <a class="code" href="class_AheadInfoRep.html#a0">AheadInfoRep</a>()<font class="keyword"> </font>{};
00039 <font class="comment">// copy constructor</font>
<a name="l00040"></a><a class="code" href="class_AheadInfoRep.html#a1">00040</a>   <a class="code" href="class_AheadInfoRep.html#a0">AheadInfoRep</a> (<font class="keyword">const</font> <a class="code" href="class_AheadInfoRep.html">AheadInfoRep</a> &amp; ai)<font class="keyword"> </font>{}; 
<a name="l00041"></a><a class="code" href="class_AheadInfoRep.html#a2">00041</a>   <font class="keyword">virtual</font> <a class="code" href="class_AheadInfoRep.html">AheadInfoRep</a> *<a class="code" href="class_AheadInfoRep.html#a2">clone</a>()<font class="keyword"> const </font>{};
00042 <font class="comment">//destructor</font>
<a name="l00043"></a><a class="code" href="class_AheadInfoRep.html#a3">00043</a>   <font class="keyword">virtual</font> <a class="code" href="class_AheadInfoRep.html#a3">~AheadInfoRep</a>()<font class="keyword"> </font>{};
00044 };
00045 
<a name="l00046"></a><a class="code" href="class_SLAheadInfoRep.html">00046</a> <font class="keyword">class </font><a class="code" href="class_SLAheadInfoRep.html">SLAheadInfoRep</a> : <font class="keyword">public</font> <a class="code" href="class_AheadInfoRep.html">AheadInfoRep</a> {
00047 <font class="keyword">public</font>:
00048 <font class="comment">//constructor</font>
<a name="l00049"></a><a class="code" href="class_SLAheadInfoRep.html#a0">00049</a>   <a class="code" href="class_SLAheadInfoRep.html#a0">SLAheadInfoRep</a>()<font class="keyword"> </font>{};
00050 <font class="comment">// copy constructor</font>
<a name="l00051"></a><a class="code" href="class_SLAheadInfoRep.html#a1">00051</a>   <a class="code" href="class_SLAheadInfoRep.html#a0">SLAheadInfoRep</a>(<font class="keyword">const</font> <a class="code" href="class_SLAheadInfoRep.html">SLAheadInfoRep</a> &amp; ai)<font class="keyword"> </font>{}; 
<a name="l00052"></a><a class="code" href="class_SLAheadInfoRep.html#a2">00052</a>   <a class="code" href="class_AheadInfoRep.html">AheadInfoRep</a> *<a class="code" href="class_AheadInfoRep.html#a2">clone</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> <font class="keyword">new</font> <a class="code" href="class_SLAheadInfoRep.html#a0">SLAheadInfoRep</a>(*<font class="keyword">this</font>); }
00053 <font class="comment">//destructor</font>
<a name="l00054"></a><a class="code" href="class_SLAheadInfoRep.html#a3">00054</a>   <a class="code" href="class_SLAheadInfoRep.html#a3">~SLAheadInfoRep</a>()<font class="keyword"> </font>{};
00055 <font class="keyword">private</font>:
00056 };
00057 
<a name="l00058"></a><a class="code" href="class_WtSLAheadInfoRep.html">00058</a> <font class="keyword">class </font><a class="code" href="class_WtSLAheadInfoRep.html">WtSLAheadInfoRep</a> : <font class="keyword">public</font> <a class="code" href="class_AheadInfoRep.html">AheadInfoRep</a> {
00059 <font class="keyword">public</font>:
00060 <font class="comment">//constructor</font>
<a name="l00061"></a><a class="code" href="class_WtSLAheadInfoRep.html#a0">00061</a>   <a class="code" href="class_WtSLAheadInfoRep.html#a0">WtSLAheadInfoRep</a>()<font class="keyword"> </font>{};
<a name="l00062"></a><a class="code" href="class_WtSLAheadInfoRep.html#a1">00062</a>   <a class="code" href="class_WtSLAheadInfoRep.html#a0">WtSLAheadInfoRep</a>(<font class="keywordtype">int</font> wd)<font class="keyword"> </font>{wtdiff=wd;};
00063 <font class="comment">// copy constructor</font>
<a name="l00064"></a><a class="code" href="class_WtSLAheadInfoRep.html#a2">00064</a>   <a class="code" href="class_WtSLAheadInfoRep.html#a0">WtSLAheadInfoRep</a> (<font class="keyword">const</font> <a class="code" href="class_WtSLAheadInfoRep.html">WtSLAheadInfoRep</a> &amp; ai)<font class="keyword"> </font>{wtdiff=ai.wtdiff;}; 
<a name="l00065"></a><a class="code" href="class_WtSLAheadInfoRep.html#a3">00065</a>   <a class="code" href="class_AheadInfoRep.html">AheadInfoRep</a> *<a class="code" href="class_AheadInfoRep.html#a2">clone</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> <font class="keyword">new</font> <a class="code" href="class_WtSLAheadInfoRep.html#a0">WtSLAheadInfoRep</a>(*<font class="keyword">this</font>); }
00066 <font class="comment">//destructor</font>
<a name="l00067"></a><a class="code" href="class_WtSLAheadInfoRep.html#a4">00067</a>   <a class="code" href="class_WtSLAheadInfoRep.html#a4">~WtSLAheadInfoRep</a>()<font class="keyword"> </font>{};
<a name="l00068"></a><a class="code" href="class_WtSLAheadInfoRep.html#a5">00068</a>   <font class="keywordtype">int</font> <a class="code" href="class_WtSLAheadInfoRep.html#a5">getWtDiff</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> wtdiff;}
00069 <font class="keyword">private</font>:
<a name="l00070"></a><a class="code" href="class_WtSLAheadInfoRep.html#o0">00070</a>   <font class="keywordtype">int</font> wtdiff;
00071 };
00072 
<a name="l00073"></a><a class="code" href="class_WtLexAheadInfoRep.html">00073</a> <font class="keyword">class </font><a class="code" href="class_WtLexAheadInfoRep.html">WtLexAheadInfoRep</a> : <font class="keyword">public</font> <a class="code" href="class_AheadInfoRep.html">AheadInfoRep</a> {
00074 <font class="keyword">public</font>:
00075 <font class="comment">//constructor</font>
<a name="l00076"></a><a class="code" href="class_WtLexAheadInfoRep.html#a0">00076</a>   <a class="code" href="class_WtLexAheadInfoRep.html#a0">WtLexAheadInfoRep</a>(): sign(0) {};
<a name="l00077"></a><a class="code" href="class_WtLexAheadInfoRep.html#a1">00077</a>   <a class="code" href="class_WtLexAheadInfoRep.html#a0">WtLexAheadInfoRep</a>(<font class="keywordtype">int</font> wd,<font class="keywordtype">int</font> sgn): wtdiff(wd), sign(sgn) {};
00078 <font class="comment">// copy constructor</font>
<a name="l00079"></a><a class="code" href="class_WtLexAheadInfoRep.html#a2">00079</a>   <a class="code" href="class_WtLexAheadInfoRep.html#a0">WtLexAheadInfoRep</a>(<font class="keyword">const</font> <a class="code" href="class_WtLexAheadInfoRep.html">WtLexAheadInfoRep</a> &amp; ai) : 
00080      wtdiff(ai.wtdiff), sign(ai.sign){}; 
<a name="l00081"></a><a class="code" href="class_WtLexAheadInfoRep.html#a3">00081</a>   <a class="code" href="class_AheadInfoRep.html">AheadInfoRep</a> *<a class="code" href="class_AheadInfoRep.html#a2">clone</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> <font class="keyword">new</font> <a class="code" href="class_WtLexAheadInfoRep.html#a0">WtLexAheadInfoRep</a>(*<font class="keyword">this</font>); }
00082 <font class="comment">//destructor</font>
<a name="l00083"></a><a class="code" href="class_WtLexAheadInfoRep.html#a4">00083</a>   <a class="code" href="class_WtLexAheadInfoRep.html#a4">~WtLexAheadInfoRep</a>()<font class="keyword"> </font>{};
<a name="l00084"></a><a class="code" href="class_WtLexAheadInfoRep.html#a5">00084</a>   <font class="keywordtype">int</font> <a class="code" href="class_WtLexAheadInfoRep.html#a5">getWtDiff</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> wtdiff;}
<a name="l00085"></a><a class="code" href="class_WtLexAheadInfoRep.html#a6">00085</a>   <font class="keywordtype">int</font> <a class="code" href="class_WtLexAheadInfoRep.html#a6">getSign</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> sign;}
00086 <font class="keyword">private</font>:
<a name="l00087"></a><a class="code" href="class_WtLexAheadInfoRep.html#o0">00087</a>   <font class="keywordtype">int</font> wtdiff; 
<a name="l00088"></a><a class="code" href="class_WtLexAheadInfoRep.html#o1">00088</a>   <font class="keywordtype">int</font> sign;
00089 };
00090 
00091 
00092 <font class="comment">// Now the DiffHistoryRep hierarchy. There is one type for each word order.</font>
00093 <font class="comment">// In the comments below d is always a word difference, which has arise</font>
00094 <font class="comment">// as various products of the form w^-1u</font>
00095 
<a name="l00096"></a><a class="code" href="class_DiffHistoryRep.html">00096</a> <font class="keyword">class </font><a class="code" href="class_DiffHistoryRep.html">DiffHistoryRep</a> : <font class="keyword">public</font> <a class="code" href="class_RefCounter.html">RefCounter</a> {
00097 <font class="keyword">public</font>:
00098 <font class="comment">//constructor</font>
<a name="l00099"></a><a class="code" href="class_DiffHistoryRep.html#a0">00099</a>   <a class="code" href="class_DiffHistoryRep.html#a0">DiffHistoryRep</a>()<font class="keyword"> </font>{};
00100 <font class="comment">//copy constructor</font>
<a name="l00101"></a><a class="code" href="class_DiffHistoryRep.html#a1">00101</a>   <a class="code" href="class_DiffHistoryRep.html#a0">DiffHistoryRep</a>(<font class="keyword">const</font> <a class="code" href="class_DiffHistoryRep.html">DiffHistoryRep</a> &amp; dh)<font class="keyword"> </font>{};
<a name="l00102"></a><a class="code" href="class_DiffHistoryRep.html#a2">00102</a>   <font class="keyword">virtual</font> <a class="code" href="class_DiffHistoryRep.html">DiffHistoryRep</a> *<a class="code" href="class_AheadInfoRep.html#a2">clone</a>()<font class="keyword"> const </font>{};
00103 <font class="comment">//destructor</font>
<a name="l00104"></a><a class="code" href="class_DiffHistoryRep.html#a3">00104</a>   <font class="keyword">virtual</font> <a class="code" href="class_DiffHistoryRep.html#a3">~DiffHistoryRep</a>()<font class="keyword"> </font>{};
00105 
00106 <font class="comment">//hash function</font>
<a name="l00107"></a><a class="code" href="class_DiffHistoryRep.html#a4">00107</a>   <font class="keyword">virtual</font> <font class="keywordtype">int</font> <a class="code" href="class_DiffHistoryRep.html#a4">hash</a>()<font class="keyword"> const </font>{};
<a name="l00108"></a><a class="code" href="class_DiffHistoryRep.html#a5">00108</a>   <font class="keyword">virtual</font> Bool <a class="code" href="class_DiffHistoryRep.html#a5">empty</a>()<font class="keyword"> const </font>{};
00109 
<a name="l00110"></a><a class="code" href="class_DiffHistoryRep.html#a6">00110</a>   <font class="keyword">virtual</font> State <a class="code" href="class_DiffHistoryRep.html#a6">getDiff</a>()<font class="keyword"> const </font>{};
00111 <font class="comment">//operators</font>
<a name="l00112"></a><a class="code" href="class_DiffHistoryRep.html#a7">00112</a>   <font class="keyword">virtual</font> <font class="keywordtype">int</font> <a class="code" href="Property_h.html#a1">operator== </a>( <font class="keyword">const</font> <a class="code" href="class_DiffHistoryRep.html">DiffHistoryRep</a> &amp; dh)<font class="keyword"> const </font>{
00113   };
<a name="l00114"></a><a class="code" href="class_DiffHistoryRep.html#a8">00114</a>   <font class="keyword">virtual</font> <a class="code" href="class_DiffHistoryRep.html">DiffHistoryRep</a>&amp;  <a class="code" href="class_RefCounter.html#c0">operator= </a>( <font class="keyword">const</font> <a class="code" href="class_DiffHistoryRep.html">DiffHistoryRep</a> &amp; dh )<font class="keyword"> </font>{};
00115 
<a name="l00116"></a><a class="code" href="class_DiffHistoryRep.html#a9">00116</a>   <font class="keyword">virtual</font> Bool <a class="code" href="class_DiffHistoryRep.html#a9">sameLengthWords</a>()<font class="keyword"> const </font>{};
00117 <font class="comment">// returns YES if d has arisen as the word difference from two words</font>
00118 <font class="comment">// of equal length</font>
00119 
<a name="l00120"></a><a class="code" href="class_DiffHistoryRep.html#a10">00120</a>   <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="class_DiffHistoryRep.html#a10">improveBy</a>(<font class="keyword">const</font> <a class="code" href="class_DiffHistoryRep.html">DiffHistoryRep</a> &amp; dh)<font class="keyword"> </font>{};
00121 <font class="comment">//  add in to the current word difference history the information carried</font>
00122 <font class="comment">// by the difference history dh (which is associated associated with the same</font>
00123 <font class="comment">// word difference)</font>
00124 
<a name="l00125"></a><a class="code" href="class_DiffHistoryRep.html#a11">00125</a>   <font class="keyword">virtual</font> Bool <a class="code" href="class_DiffHistoryRep.html#a11">possibleReductionAhead</a>()<font class="keyword"> const </font>{};
00126 <font class="comment">// return YES if the possibility cannot be ruled out that some w is equal</font>
00127 <font class="comment">// in G to a longer word u', of which u is a prefix, and such that u&lt;w.</font>
00128 
<a name="l00129"></a><a class="code" href="class_DiffHistoryRep.html#a12">00129</a>   <font class="keyword">virtual</font> <a class="code" href="class_AheadInfoRep.html">AheadInfoRep</a> *  <a class="code" href="class_DiffHistoryRep.html#a12">buildAheadInfoRep</a>()<font class="keyword"> const </font>{};
00130 <font class="comment">// constuct and return an AheadInfoRep * for this DiffHistory </font>
00131 
<a name="l00132"></a><a class="code" href="class_DiffHistoryRep.html#a13">00132</a>   <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="class_DiffHistoryRep.html#a13">printOn</a>(ostream &amp;ostr = cout)<font class="keyword"> const </font>{};
00133 
<a name="l00134"></a><a class="code" href="class_DiffHistoryRep.html#a14">00134</a>   <font class="keyword">virtual</font> <font class="keyword">inline</font> ostream&amp; <a class="code" href="DatabaseManager_h.html#a28">operator &lt;&lt; </a>( <font class="keyword">const</font> <a class="code" href="class_DiffHistoryRep.html">DiffHistoryRep</a>&amp; dh )<font class="keyword"> </font>{};
00135 };
00136 
<a name="l00137"></a><a class="code" href="class_SLDiffHistoryRep.html">00137</a> <font class="keyword">class </font><a class="code" href="class_SLDiffHistoryRep.html">SLDiffHistoryRep</a> : <font class="keyword">public</font> <a class="code" href="class_DiffHistoryRep.html">DiffHistoryRep</a> {
00138 <font class="comment">// Together with each word difference d, integers c0,c1</font>
00139 <font class="comment">// are stored, where</font>
00140 <font class="comment">// c0 = 1 if d=_G w^-1u for some w, u with l(w)=l(u) and w&gt;u</font>
00141 <font class="comment">//    =  -1 if for all w,u with d=_G w^-1u and l(w)=l(u), w&lt;u</font>
00142 <font class="comment">//    = 0 if d does not arise as the word difference for </font>
00143 <font class="comment">//        words of equal length.</font>
00144 <font class="comment">// c1 = 1 if d = _G w^-1u for some w,u with l(w)&gt;l(u)</font>
00145 <font class="comment">//    = 0 otherwise.</font>
00146 <font class="comment">//</font>
00147 <font class="keyword">public</font>:
00148 <font class="comment">//constructors</font>
<a name="l00149"></a><a class="code" href="class_SLDiffHistoryRep.html#a0">00149</a>   <a class="code" href="class_SLDiffHistoryRep.html#a0">SLDiffHistoryRep</a>(): d(0),c0(0),c1(0){};
<a name="l00150"></a><a class="code" href="class_SLDiffHistoryRep.html#a1">00150</a>   <a class="code" href="class_SLDiffHistoryRep.html#a0">SLDiffHistoryRep</a>(State D,<font class="keywordtype">int</font> C0,<font class="keywordtype">int</font> C1):
00151     d(D),c0(C0),c1(C1){};
00152 <font class="comment">//copy constructor</font>
<a name="l00153"></a><a class="code" href="class_SLDiffHistoryRep.html#a2">00153</a>   <a class="code" href="class_SLDiffHistoryRep.html#a0">SLDiffHistoryRep</a>(<font class="keyword">const</font> <a class="code" href="class_SLDiffHistoryRep.html">SLDiffHistoryRep</a> &amp; dh) : 
00154     d(dh.d), c0(dh.c0), c1 (dh.c1) {};
<a name="l00155"></a><a class="code" href="class_SLDiffHistoryRep.html#a3">00155</a>   <a class="code" href="class_DiffHistoryRep.html">DiffHistoryRep</a> *<a class="code" href="class_AheadInfoRep.html#a2">clone</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> <font class="keyword">new</font> <a class="code" href="class_SLDiffHistoryRep.html#a0">SLDiffHistoryRep</a>(*<font class="keyword">this</font>); }
00156 <font class="comment">//destructor</font>
<a name="l00157"></a><a class="code" href="class_SLDiffHistoryRep.html#a4">00157</a>   <a class="code" href="class_SLDiffHistoryRep.html#a4">~SLDiffHistoryRep</a>()<font class="keyword"> </font>{};
00158 <font class="comment">//hash function</font>
<a name="l00159"></a><a class="code" href="class_SLDiffHistoryRep.html#a5">00159</a>   <font class="keywordtype">int</font> <a class="code" href="class_DiffHistoryRep.html#a4">hash</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> (<font class="keywordtype">int</font>)d; };
<a name="l00160"></a><a class="code" href="class_SLDiffHistoryRep.html#a6">00160</a>   Bool <a class="code" href="class_DiffHistoryRep.html#a5">empty</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> (c0==0 &amp;&amp; c1==0); };
00161 <font class="comment">//accessors</font>
<a name="l00162"></a><a class="code" href="class_SLDiffHistoryRep.html#a7">00162</a>   <font class="keywordtype">int</font> <a class="code" href="class_DiffHistoryRep.html#a6">getDiff</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> d;};
<a name="l00163"></a><a class="code" href="class_SLDiffHistoryRep.html#a8">00163</a>   <font class="keywordtype">int</font> <a class="code" href="class_SLDiffHistoryRep.html#a8">getC0</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> c0;};
<a name="l00164"></a><a class="code" href="class_SLDiffHistoryRep.html#a9">00164</a>   <font class="keywordtype">int</font> <a class="code" href="class_SLDiffHistoryRep.html#a9">getC1</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> c1;};
00165 
00166   <font class="comment">//operators</font>
<a name="l00167"></a><a class="code" href="class_SLDiffHistoryRep.html#a10">00167</a>   <font class="keywordtype">int</font> <a class="code" href="Property_h.html#a1">operator== </a>( <font class="keyword">const</font> <a class="code" href="class_DiffHistoryRep.html">DiffHistoryRep</a> &amp; dh)<font class="keyword"> const</font>
00168 <font class="keyword">  </font>{
00169     <font class="keyword">const</font> <a class="code" href="class_SLDiffHistoryRep.html">SLDiffHistoryRep</a>&amp; ddh = (<a class="code" href="class_SLDiffHistoryRep.html">SLDiffHistoryRep</a>&amp;)dh;
00170     <font class="keywordflow">return</font> (d == ddh.d &amp;&amp; c0 == ddh.c0  &amp;&amp; c1 == ddh.c1);
00171   }
00172  
<a name="l00173"></a><a class="code" href="class_SLDiffHistoryRep.html#a11">00173</a>   <a class="code" href="class_DiffHistoryRep.html">DiffHistoryRep</a>&amp;  <a class="code" href="class_RefCounter.html#c0">operator= </a>( <font class="keyword">const</font> <a class="code" href="class_DiffHistoryRep.html">DiffHistoryRep</a> &amp; dh )<font class="keyword"></font>
00174 <font class="keyword">  </font>{
00175     <font class="keyword">const</font> <a class="code" href="class_SLDiffHistoryRep.html">SLDiffHistoryRep</a>&amp; ddh = (<a class="code" href="class_SLDiffHistoryRep.html">SLDiffHistoryRep</a>&amp;)dh;
00176     d = ddh.d; c0 = ddh.c0; c1 = ddh.c1;
00177     <font class="keywordflow">return</font> *<font class="keyword">this</font>;
00178   }
00179 
<a name="l00180"></a><a class="code" href="class_SLDiffHistoryRep.html#a12">00180</a>   Bool <a class="code" href="class_DiffHistoryRep.html#a9">sameLengthWords</a>()<font class="keyword"> const  </font>{ <font class="keywordflow">return</font> (c0!=0);};
00181 
<a name="l00182"></a><a class="code" href="class_SLDiffHistoryRep.html#a13">00182</a>   <font class="keywordtype">void</font> <a class="code" href="class_DiffHistoryRep.html#a10">improveBy</a>(<font class="keyword">const</font> <a class="code" href="class_DiffHistoryRep.html">DiffHistoryRep</a> &amp; dh)<font class="keyword"> </font>
00183 <font class="keyword">  </font>{
00184     <font class="keyword">const</font> <a class="code" href="class_SLDiffHistoryRep.html">SLDiffHistoryRep</a>&amp; ddh = (<a class="code" href="class_SLDiffHistoryRep.html">SLDiffHistoryRep</a>&amp;)dh;
00185     <font class="keywordflow">if</font> ((ddh.c0==0 || (c0!=0 &amp;&amp; c0&gt;= ddh.c0 ))
00186              &amp;&amp; (ddh.c1==0 || (c1&gt;= ddh.c1 )))
00187         <font class="keywordflow">return</font>;
00188   <font class="comment">// ddh is no better than the current SLDiffHistoryRep</font>
00189     <font class="keywordflow">else</font> {
00190       <font class="keywordflow">if</font> (ddh.c0 &amp;&amp; (c0==0 || ddh.c0 == 1)){ 
00191        c0 = ddh.c0;}
00192       <font class="keywordflow">if</font> (ddh.c1 &amp;&amp; c1==0 ) {
00193         c1 = ddh.c1; } 
00194     }
00195   }
<a name="l00196"></a><a class="code" href="class_SLDiffHistoryRep.html#a14">00196</a>   Bool <a class="code" href="class_DiffHistoryRep.html#a11">possibleReductionAhead</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> NO;}
00197 
<a name="l00198"></a><a class="code" href="class_SLDiffHistoryRep.html#a15">00198</a>   <a class="code" href="class_AheadInfoRep.html">AheadInfoRep</a> * <a class="code" href="class_DiffHistoryRep.html#a12">buildAheadInfoRep</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> <font class="keyword">new</font> SLAheadInfoRep(); }
00199 
<a name="l00200"></a><a class="code" href="class_SLDiffHistoryRep.html#a16">00200</a>   <font class="keywordtype">void</font> <a class="code" href="class_DiffHistoryRep.html#a13">printOn</a>(ostream &amp;ostr = cout)<font class="keyword"> const </font>
00201 <font class="keyword">  </font>{
00202     ostr &lt;&lt; <font class="stringliteral">"d="</font>&lt;&lt; d &lt;&lt; <font class="stringliteral">" c0="</font>&lt;&lt; c0 &lt;&lt;<font class="stringliteral">" c1="</font>&lt;&lt;c1&lt;&lt;<font class="stringliteral">"; "</font>;
00203   }
00204   
00205   <font class="keyword">inline</font> <font class="keyword">friend</font> ostream&amp; <font class="keyword">operator</font> &lt;&lt; 
<a name="l00206"></a><a class="code" href="class_SLDiffHistoryRep.html#l0">00206</a>         ( ostream&amp; ostr, <font class="keyword">const</font> <a class="code" href="class_SLDiffHistoryRep.html">SLDiffHistoryRep</a>&amp; dh ) {
00207                   ostr &lt;&lt; <font class="stringliteral">"d="</font>&lt;&lt; dh.d &lt;&lt; <font class="stringliteral">" c0="</font>&lt;&lt; dh.c0 &lt;&lt;
00208                          <font class="stringliteral">" c1="</font>&lt;&lt;dh.c1&lt;&lt;<font class="stringliteral">"; "</font>;
00209     <font class="keywordflow">return</font> ostr;
00210   }
00211   
00212   
00213 <font class="keyword">private</font>:
<a name="l00214"></a><a class="code" href="class_SLDiffHistoryRep.html#o0">00214</a>   State d;
<a name="l00215"></a><a class="code" href="class_SLDiffHistoryRep.html#o2">00215</a>   <font class="keywordtype">int</font> c0, c1;
00216 };
00217 
<a name="l00218"></a><a class="code" href="class_WtSLDiffHistoryRep.html">00218</a> <font class="keyword">class </font><a class="code" href="class_WtSLDiffHistoryRep.html">WtSLDiffHistoryRep</a> : <font class="keyword">public</font> <a class="code" href="class_DiffHistoryRep.html">DiffHistoryRep</a> {
00219 <font class="comment">// Together with each word difference d, integers c0,w0,c1,w1</font>
00220 <font class="comment">// are stored, where</font>
00221 <font class="comment">// w0 = max{wt(w)-wt(u):l(u)=l(w),u \neq w, d=_G w^-1u }, </font>
00222 <font class="comment">// where that set is non-empty,</font>
00223 <font class="comment">// and is otherwise meaningless. c0=0 if the set above is empty, 1 if there</font>
00224 <font class="comment">// is some u with wt(w)-wt(u)=w0, l(u)=l(w), d=_G w^-1u and u&lt;w in shortlex,</font>
00225 <font class="comment">// and -1 if for all such u, w&lt;u in shortlex.</font>
00226 <font class="comment">// w1 = min{1,max{wt(w)-wt(u):l(u)&lt;l(w), d_G w^-1u }, </font>
00227 <font class="comment">// where that set is non-empty,</font>
00228 <font class="comment">// and is otherwise meaningless. c1=0 if that set if empty, 1 otherwise.</font>
00229 <font class="comment">//</font>
00230 <font class="comment">// Given such a difference history (d,c0,w0,c1,w1)</font>
00231 <font class="comment">// </font>
00232 <font class="comment">// Where g is a generator, and g^-1d=_G id,</font>
00233 <font class="comment">//    if either c0 is nonzero and w0+wt(g)&gt;=0 </font>
00234 <font class="comment">//       or c1 is non-zero and w1+wt(g)&gt;=0,</font>
00235 <font class="comment">//    then for some w where d=_G w^-1u, wg is equal in G to a </font>
00236 <font class="comment">//       shorter word of no greater weight.</font>
00237 <font class="comment">//</font>
00238 <font class="comment">//  Where g,h are generators and g^-1dh=_G id,</font>
00239 <font class="comment">//     c0 is non-zero,</font>
00240 <font class="comment">//     and either w0+wt(g)-wt(h)&gt;0</font>
00241 <font class="comment">//         or w0+wt(g)-wt(h)=0 and c0=1,</font>
00242 <font class="comment">//     then wg reduces to uh, of the same length as wg,</font>
00243 <font class="comment">//         but preceding it in weighted shortlex</font>
00244 <font class="comment">//         (in the first case it has lesser weight, in the</font>
00245 <font class="comment">//          second it has the same weight but is lexicographically earlier)</font>
00246 <font class="comment">//</font>
00247 <font class="comment">//   Where H is a word of length &gt;= 2 with H^-1dg=id, c0 is non-zero</font>
00248 <font class="comment">//   and g^-1d(h_1h_2..h_i) is in D for all prefixes h_1h_2..h_i of H</font>
00249 <font class="comment">//   and w0 + wt(g) - wt(h_1) - ... wt(h_n) &gt; 0,</font>
00250 <font class="comment">//   then wg reduces to uH which is longer, but of lower weight.</font>
00251 <font class="comment">//</font>
00252 
00253 <font class="keyword">public</font>:
00254 <font class="comment">//constructors</font>
<a name="l00255"></a><a class="code" href="class_WtSLDiffHistoryRep.html#a0">00255</a>   <a class="code" href="class_WtSLDiffHistoryRep.html#a0">WtSLDiffHistoryRep</a>(): d(0),c0(0),w0(0),c1(0),w1(0){};
<a name="l00256"></a><a class="code" href="class_WtSLDiffHistoryRep.html#a1">00256</a>   <a class="code" href="class_WtSLDiffHistoryRep.html#a0">WtSLDiffHistoryRep</a>(State D,<font class="keywordtype">int</font> C0,<font class="keywordtype">int</font> W0,<font class="keywordtype">int</font> C1,<font class="keywordtype">int</font> W1):
00257     d(D),c0(C0),w0(W0),c1(C1),w1(W1){};
00258 <font class="comment">//copy constructor</font>
<a name="l00259"></a><a class="code" href="class_WtSLDiffHistoryRep.html#a2">00259</a>   <a class="code" href="class_WtSLDiffHistoryRep.html#a0">WtSLDiffHistoryRep</a>(<font class="keyword">const</font> <a class="code" href="class_WtSLDiffHistoryRep.html">WtSLDiffHistoryRep</a> &amp; dh):
00260     d(dh.d), c0(dh.c0), w0(dh.w0), c1(dh.c1), w1(dh.w1){};
<a name="l00261"></a><a class="code" href="class_WtSLDiffHistoryRep.html#a3">00261</a>   <a class="code" href="class_DiffHistoryRep.html">DiffHistoryRep</a> *<a class="code" href="class_AheadInfoRep.html#a2">clone</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> <font class="keyword">new</font> <a class="code" href="class_WtSLDiffHistoryRep.html#a0">WtSLDiffHistoryRep</a>(*<font class="keyword">this</font>); }
00262 <font class="comment">//destructor</font>
<a name="l00263"></a><a class="code" href="class_WtSLDiffHistoryRep.html#a4">00263</a>   <a class="code" href="class_WtSLDiffHistoryRep.html#a4">~WtSLDiffHistoryRep</a>()<font class="keyword"> </font>{};
00264 <font class="comment">//hash function</font>
<a name="l00265"></a><a class="code" href="class_WtSLDiffHistoryRep.html#a5">00265</a>   <font class="keywordtype">int</font> <a class="code" href="class_DiffHistoryRep.html#a4">hash</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> (<font class="keywordtype">int</font>)d; };
<a name="l00266"></a><a class="code" href="class_WtSLDiffHistoryRep.html#a6">00266</a>   Bool <a class="code" href="class_DiffHistoryRep.html#a5">empty</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> (c0==0 &amp;&amp; c1==0); };
00267 <font class="comment">//accessors</font>
<a name="l00268"></a><a class="code" href="class_WtSLDiffHistoryRep.html#a7">00268</a>   <font class="keywordtype">int</font> <a class="code" href="class_DiffHistoryRep.html#a6">getDiff</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> d;};
<a name="l00269"></a><a class="code" href="class_WtSLDiffHistoryRep.html#a8">00269</a>   <font class="keywordtype">int</font> <a class="code" href="class_WtSLDiffHistoryRep.html#a8">getC0</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> c0;};
<a name="l00270"></a><a class="code" href="class_WtSLDiffHistoryRep.html#a9">00270</a>   <font class="keywordtype">int</font> <a class="code" href="class_WtSLDiffHistoryRep.html#a9">getW0</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> w0;};
<a name="l00271"></a><a class="code" href="class_WtSLDiffHistoryRep.html#a10">00271</a>   <font class="keywordtype">int</font> <a class="code" href="class_WtSLDiffHistoryRep.html#a10">getC1</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> c1;};
<a name="l00272"></a><a class="code" href="class_WtSLDiffHistoryRep.html#a11">00272</a>   <font class="keywordtype">int</font> <a class="code" href="class_WtSLDiffHistoryRep.html#a11">getW1</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> w1;};
00273 
00274   <font class="comment">//operators</font>
<a name="l00275"></a><a class="code" href="class_WtSLDiffHistoryRep.html#a12">00275</a>   <font class="keywordtype">int</font> <a class="code" href="Property_h.html#a1">operator== </a>( <font class="keyword">const</font> <a class="code" href="class_DiffHistoryRep.html">DiffHistoryRep</a> &amp; dh)<font class="keyword"> const</font>
00276 <font class="keyword">  </font>{
00277     <font class="keyword">const</font> <a class="code" href="class_WtSLDiffHistoryRep.html">WtSLDiffHistoryRep</a>&amp; ddh = (<a class="code" href="class_WtSLDiffHistoryRep.html">WtSLDiffHistoryRep</a>&amp;)dh;
00278     <font class="keywordflow">return</font> (d == ddh.d &amp;&amp; c0 == ddh.c0 &amp;&amp; w0 == ddh.w0 
00279                  &amp;&amp; c1 == ddh.c1 &amp;&amp; w1 == ddh.w1);
00280   }
00281  
<a name="l00282"></a><a class="code" href="class_WtSLDiffHistoryRep.html#a13">00282</a>   <a class="code" href="class_DiffHistoryRep.html">DiffHistoryRep</a>&amp;  <a class="code" href="class_RefCounter.html#c0">operator= </a>( <font class="keyword">const</font> <a class="code" href="class_DiffHistoryRep.html">DiffHistoryRep</a> &amp; dh )<font class="keyword"></font>
00283 <font class="keyword">  </font>{
00284     <font class="keyword">const</font> <a class="code" href="class_WtSLDiffHistoryRep.html">WtSLDiffHistoryRep</a>&amp; ddh = (<a class="code" href="class_WtSLDiffHistoryRep.html">WtSLDiffHistoryRep</a>&amp;)dh;
00285     d = ddh.d; c0 = ddh.c0; w0 = ddh.w0; c1 = ddh.c1; w1 = ddh.w1;
00286     <font class="keywordflow">return</font> *<font class="keyword">this</font>;
00287   }
<a name="l00288"></a><a class="code" href="class_WtSLDiffHistoryRep.html#a14">00288</a>   Bool <a class="code" href="class_DiffHistoryRep.html#a9">sameLengthWords</a>()<font class="keyword"> const  </font>{ <font class="keywordflow">return</font> (c0!=0);};
<a name="l00289"></a><a class="code" href="class_WtSLDiffHistoryRep.html#a15">00289</a>   <font class="keywordtype">void</font> <a class="code" href="class_DiffHistoryRep.html#a10">improveBy</a>(<font class="keyword">const</font> <a class="code" href="class_DiffHistoryRep.html">DiffHistoryRep</a> &amp; dh)<font class="keyword"> </font>
00290 <font class="keyword">  </font>{
00291     <font class="keyword">const</font> <a class="code" href="class_WtSLDiffHistoryRep.html">WtSLDiffHistoryRep</a>&amp; ddh = (<a class="code" href="class_WtSLDiffHistoryRep.html">WtSLDiffHistoryRep</a>&amp;)dh;
00292     <font class="keywordflow">if</font> (ddh.c0 &amp;&amp; (c0==0 || w0 &lt; ddh.w0 || (w0==ddh.w0 &amp;&amp; ddh.c0 == 1))){ 
00293       c0 = ddh.c0; w0 = ddh.w0;}
00294     <font class="keywordflow">if</font> (ddh.c1 &amp;&amp; (c1==0 || w1 &lt; ddh.w1)){ 
00295       c1 = ddh.c1; w1 = ddh.w1;}
00296   }
<a name="l00297"></a><a class="code" href="class_WtSLDiffHistoryRep.html#a16">00297</a>   Bool <a class="code" href="class_DiffHistoryRep.html#a11">possibleReductionAhead</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> (c0 &amp;&amp; w0 &gt; 1);}
00298 
<a name="l00299"></a><a class="code" href="class_WtSLDiffHistoryRep.html#a17">00299</a>   <a class="code" href="class_AheadInfoRep.html">AheadInfoRep</a> * <a class="code" href="class_DiffHistoryRep.html#a12">buildAheadInfoRep</a>()<font class="keyword"> const </font>{ 
00300     <a class="code" href="class_WtSLAheadInfoRep.html">WtSLAheadInfoRep</a> *  aip = <font class="keyword">new</font> WtSLAheadInfoRep(w0); <font class="keywordflow">return</font> aip; }
00301 
<a name="l00302"></a><a class="code" href="class_WtSLDiffHistoryRep.html#a18">00302</a>   <font class="keywordtype">void</font> <a class="code" href="class_DiffHistoryRep.html#a13">printOn</a>(ostream &amp;ostr = cout)<font class="keyword"> const </font>
00303 <font class="keyword">  </font>{
00304     ostr &lt;&lt; <font class="stringliteral">"d="</font>&lt;&lt; d &lt;&lt; <font class="stringliteral">" c0="</font>&lt;&lt; c0 &lt;&lt;<font class="stringliteral">" w0="</font>&lt;&lt;w0&lt;&lt;
00305           <font class="stringliteral">" c1="</font>&lt;&lt;c1&lt;&lt;<font class="stringliteral">" w1="</font>&lt;&lt;w1&lt;&lt;<font class="stringliteral">"; "</font>;
00306   }
00307   
00308   <font class="keyword">inline</font> <font class="keyword">friend</font> ostream&amp; <font class="keyword">operator</font> &lt;&lt; 
<a name="l00309"></a><a class="code" href="class_WtSLDiffHistoryRep.html#l0">00309</a>         ( ostream&amp; ostr, <font class="keyword">const</font> <a class="code" href="class_WtSLDiffHistoryRep.html">WtSLDiffHistoryRep</a>&amp; dh ) {
00310                   ostr &lt;&lt; <font class="stringliteral">"d="</font>&lt;&lt; dh.d &lt;&lt; <font class="stringliteral">" c0="</font>&lt;&lt; dh.c0 &lt;&lt;
00311                          <font class="stringliteral">" w0="</font>&lt;&lt;dh.w0&lt;&lt;<font class="stringliteral">" c1="</font>&lt;&lt;dh.c1&lt;&lt;<font class="stringliteral">" w1="</font>&lt;&lt;dh.w1&lt;&lt;<font class="stringliteral">"; "</font>;
00312     <font class="keywordflow">return</font> ostr;
00313   }
00314   
00315   
00316 <font class="keyword">private</font>:
<a name="l00317"></a><a class="code" href="class_WtSLDiffHistoryRep.html#o0">00317</a>   State d;
<a name="l00318"></a><a class="code" href="class_WtSLDiffHistoryRep.html#o2">00318</a>   <font class="keywordtype">int</font> c0, c1;
<a name="l00319"></a><a class="code" href="class_WtSLDiffHistoryRep.html#o4">00319</a>   <font class="keywordtype">int</font> w0, w1;
00320 };
00321 
<a name="l00322"></a><a class="code" href="class_WtLexDiffHistoryRep.html">00322</a> <font class="keyword">class </font><a class="code" href="class_WtLexDiffHistoryRep.html">WtLexDiffHistoryRep</a> : <font class="keyword">public</font> <a class="code" href="class_DiffHistoryRep.html">DiffHistoryRep</a> {
00323 <font class="comment">// There are only very minor differences between this class and</font>
00324 <font class="comment">// WtSLDifferenceRep. The same data is held, but c1 can also take the value -1.</font>
00325 <font class="comment">// The function improveBy is slightly different, and the AheadInfo needs to</font>
00326 <font class="comment">// carry more information. The situations in which reduction can occur are</font>
00327 <font class="comment">// also slightly different.</font>
00328 <font class="comment">// Much of the code is a copy of WtSLDiffHistoryRep code, but it seems safer</font>
00329 <font class="comment">// to keep the 2 classes separate, because of the minor differences which could</font>
00330 <font class="comment">// lead to confusion if code were shared (or, for example if one class were</font>
00331 <font class="comment">// derived from another). </font>
00332 
00333 <font class="comment">// Together with each word difference d, integers c0,w0,c1,w1</font>
00334 <font class="comment">// are stored, where</font>
00335 <font class="comment">// w0 = max{wt(w)-wt(u):l(u)=l(w),u \neq w, d=_G w^-1u }, </font>
00336 <font class="comment">// where that set is non-empty,</font>
00337 <font class="comment">// and is otherwise meaningless. c0=0 if the set above is empty, 1 if there</font>
00338 <font class="comment">// is some u with wt(w)-wt(u)=w0, l(u)=l(w), d=_G w^-1u and u&lt;w in lex,</font>
00339 <font class="comment">// and -1 if for all such u, w&lt;u in lex.</font>
00340 <font class="comment">// w1 = min{1,max{wt(w)-wt(u):l(u)&lt;l(w), d_G w^-1u }, </font>
00341 <font class="comment">// where that set is non-empty,</font>
00342 <font class="comment">// and is otherwise meaningless. c1=0 if the set above is empty, 1 if there</font>
00343 <font class="comment">// is some u with wt(w)-wt(u)=w0, l(u)&lt;l(w), d=_G w^-1u and u&lt;w in lex,</font>
00344 <font class="comment">// and -1 if for all such u, w&lt;u in lex.</font>
00345 <font class="comment">//</font>
00346 <font class="comment">// Given such a difference history (d,c0,w0,c1,w1)</font>
00347 <font class="comment">// </font>
00348 <font class="comment">// Where g is a generator, and g^-1d=_G id,</font>
00349 <font class="comment">//    if either c0 is nonzero and w0+wt(g)&gt;0 </font>
00350 <font class="comment">//       or c0=1 and w0+wt(g)=0</font>
00351 <font class="comment">//       or c1 is non-zero and w1+wt(g)&gt;0,</font>
00352 <font class="comment">//       or c1=1 and w1+wt(g)=0</font>
00353 <font class="comment">//    then for some w where d=_G w^-1u, wg is equal in G to a </font>
00354 <font class="comment">//       word u which is either of lesser weight, or of the same weight, </font>
00355 <font class="comment">//       but preceding it in lex.</font>
00356 <font class="comment">//</font>
00357 <font class="comment">//  Where g,h are generators and g^-1dh=_G id,</font>
00358 <font class="comment">//     c0 is non-zero,</font>
00359 <font class="comment">//     and either w0+wt(g)-wt(h)&gt;0</font>
00360 <font class="comment">//         or w0+wt(g)-wt(h)=0 and c0=1,</font>
00361 <font class="comment">//     then wg reduces to uh, of the same length as wg,</font>
00362 <font class="comment">//         but preceding it in weighted lex</font>
00363 <font class="comment">//         (in the first case it has lesser weight, in the</font>
00364 <font class="comment">//          second it has the same weight but is lexicographically earlier)</font>
00365 <font class="comment">//</font>
00366 <font class="comment">//   Where H is a word of length &gt;= 2 with H^-1dg=id, c0 is non-zero</font>
00367 <font class="comment">//   and g^-1d(h_1h_2..h_i) is in D for all prefixes h_1h_2..h_i of H</font>
00368 <font class="comment">//   and w0 + wt(g) - wt(h_1) - ... wt(h_n) &gt; 0,</font>
00369 <font class="comment">//   or  w0+wt(g)-wt(h_1)- .. wt(h_n)=0 and c0=1</font>
00370 <font class="comment">//   then wg reduces to uH which is longer, either of lower weight than wg</font>
00371 <font class="comment">//   or of the same weight as wg, and preceding it lexicographically.</font>
00372 <font class="comment">//</font>
00373 
00374 <font class="keyword">public</font>:
00375 <font class="comment">//constructors</font>
<a name="l00376"></a><a class="code" href="class_WtLexDiffHistoryRep.html#a0">00376</a>   <a class="code" href="class_WtLexDiffHistoryRep.html#a0">WtLexDiffHistoryRep</a>(): d(0),c0(0),w0(0),c1(0),w1(0){};
<a name="l00377"></a><a class="code" href="class_WtLexDiffHistoryRep.html#a1">00377</a>   <a class="code" href="class_WtLexDiffHistoryRep.html#a0">WtLexDiffHistoryRep</a>(State D,<font class="keywordtype">int</font> C0,<font class="keywordtype">int</font> W0,<font class="keywordtype">int</font> C1,<font class="keywordtype">int</font> W1):
00378     d(D),c0(C0),w0(W0),c1(C1),w1(W1){};
00379 <font class="comment">//copy constructor</font>
<a name="l00380"></a><a class="code" href="class_WtLexDiffHistoryRep.html#a2">00380</a>   <a class="code" href="class_WtLexDiffHistoryRep.html#a0">WtLexDiffHistoryRep</a>(<font class="keyword">const</font> <a class="code" href="class_WtLexDiffHistoryRep.html">WtLexDiffHistoryRep</a> &amp; dh):
00381     d(dh.d), c0(dh.c0), w0(dh.w0), c1(dh.c1), w1(dh.w1) {};
<a name="l00382"></a><a class="code" href="class_WtLexDiffHistoryRep.html#a3">00382</a>   <a class="code" href="class_DiffHistoryRep.html">DiffHistoryRep</a> *<a class="code" href="class_AheadInfoRep.html#a2">clone</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> <font class="keyword">new</font> <a class="code" href="class_WtLexDiffHistoryRep.html#a0">WtLexDiffHistoryRep</a>(*<font class="keyword">this</font>); }
00383 <font class="comment">//destructor</font>
<a name="l00384"></a><a class="code" href="class_WtLexDiffHistoryRep.html#a4">00384</a>   <a class="code" href="class_WtLexDiffHistoryRep.html#a4">~WtLexDiffHistoryRep</a>()<font class="keyword"> </font>{};
00385 <font class="comment">//hash function</font>
<a name="l00386"></a><a class="code" href="class_WtLexDiffHistoryRep.html#a5">00386</a>   <font class="keywordtype">int</font> <a class="code" href="class_DiffHistoryRep.html#a4">hash</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> (<font class="keywordtype">int</font>)d; };
<a name="l00387"></a><a class="code" href="class_WtLexDiffHistoryRep.html#a6">00387</a>   Bool <a class="code" href="class_DiffHistoryRep.html#a5">empty</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> (c0==0 &amp;&amp; c1==0); };
00388 <font class="comment">//accessors</font>
<a name="l00389"></a><a class="code" href="class_WtLexDiffHistoryRep.html#a7">00389</a>   <font class="keywordtype">int</font> <a class="code" href="class_DiffHistoryRep.html#a6">getDiff</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> d;};
<a name="l00390"></a><a class="code" href="class_WtLexDiffHistoryRep.html#a8">00390</a>   <font class="keywordtype">int</font> <a class="code" href="class_WtLexDiffHistoryRep.html#a8">getC0</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> c0;};
<a name="l00391"></a><a class="code" href="class_WtLexDiffHistoryRep.html#a9">00391</a>   <font class="keywordtype">int</font> <a class="code" href="class_WtLexDiffHistoryRep.html#a9">getW0</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> w0;};
<a name="l00392"></a><a class="code" href="class_WtLexDiffHistoryRep.html#a10">00392</a>   <font class="keywordtype">int</font> <a class="code" href="class_WtLexDiffHistoryRep.html#a10">getC1</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> c1;};
<a name="l00393"></a><a class="code" href="class_WtLexDiffHistoryRep.html#a11">00393</a>   <font class="keywordtype">int</font> <a class="code" href="class_WtLexDiffHistoryRep.html#a11">getW1</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> w1;};
00394 
00395   <font class="comment">//operators</font>
<a name="l00396"></a><a class="code" href="class_WtLexDiffHistoryRep.html#a12">00396</a>   <font class="keywordtype">int</font> <a class="code" href="Property_h.html#a1">operator== </a>( <font class="keyword">const</font> <a class="code" href="class_DiffHistoryRep.html">DiffHistoryRep</a> &amp; dh)<font class="keyword"> const</font>
00397 <font class="keyword">  </font>{
00398     <font class="keyword">const</font> <a class="code" href="class_WtLexDiffHistoryRep.html">WtLexDiffHistoryRep</a>&amp; ddh = (<a class="code" href="class_WtLexDiffHistoryRep.html">WtLexDiffHistoryRep</a>&amp;)dh;
00399     <font class="keywordflow">return</font> (d == ddh.d &amp;&amp; c0 == ddh.c0 &amp;&amp; w0 == ddh.w0 
00400                  &amp;&amp; c1 == ddh.c1 &amp;&amp; w1 == ddh.w1);
00401   }
00402  
<a name="l00403"></a><a class="code" href="class_WtLexDiffHistoryRep.html#a13">00403</a>   <a class="code" href="class_DiffHistoryRep.html">DiffHistoryRep</a>&amp;  <a class="code" href="class_RefCounter.html#c0">operator= </a>( <font class="keyword">const</font> <a class="code" href="class_DiffHistoryRep.html">DiffHistoryRep</a> &amp; dh )<font class="keyword"></font>
00404 <font class="keyword">  </font>{
00405     <font class="keyword">const</font> <a class="code" href="class_WtLexDiffHistoryRep.html">WtLexDiffHistoryRep</a>&amp; ddh = (<a class="code" href="class_WtLexDiffHistoryRep.html">WtLexDiffHistoryRep</a>&amp;)dh;
00406     d = ddh.d; c0 = ddh.c0; w0 = ddh.w0; c1 = ddh.c1; w1 = ddh.w1;
00407     <font class="keywordflow">return</font> *<font class="keyword">this</font>;
00408   }
<a name="l00409"></a><a class="code" href="class_WtLexDiffHistoryRep.html#a14">00409</a>   Bool <a class="code" href="class_DiffHistoryRep.html#a9">sameLengthWords</a>()<font class="keyword"> const  </font>{ <font class="keywordflow">return</font> (c0!=0);};
<a name="l00410"></a><a class="code" href="class_WtLexDiffHistoryRep.html#a15">00410</a>   <font class="keywordtype">void</font> <a class="code" href="class_DiffHistoryRep.html#a10">improveBy</a>(<font class="keyword">const</font> <a class="code" href="class_DiffHistoryRep.html">DiffHistoryRep</a> &amp; dh)<font class="keyword"> </font>
00411 <font class="keyword">  </font>{
00412     <font class="keyword">const</font> <a class="code" href="class_WtLexDiffHistoryRep.html">WtLexDiffHistoryRep</a>&amp; ddh = (<a class="code" href="class_WtLexDiffHistoryRep.html">WtLexDiffHistoryRep</a>&amp;)dh;
00413     <font class="keywordflow">if</font> (ddh.c0 &amp;&amp; (c0==0 || w0 &lt; ddh.w0 || (w0==ddh.w0 &amp;&amp; ddh.c0 == 1))){ 
00414       c0 = ddh.c0; w0 = ddh.w0;}
00415     <font class="keywordflow">if</font> (ddh.c1 &amp;&amp; (c1==0 || w1 &lt; ddh.w1 || (w1==ddh.w1 &amp;&amp; ddh.c1 == 1))){ 
00416       c1 = ddh.c1; w1 = ddh.w1;}
00417   }
<a name="l00418"></a><a class="code" href="class_WtLexDiffHistoryRep.html#a16">00418</a>   Bool <a class="code" href="class_DiffHistoryRep.html#a11">possibleReductionAhead</a>()<font class="keyword"> const </font>{ 
00419      <font class="keywordflow">return</font> ((c0 &amp;&amp; w0 &gt; 0) || (w0 &gt; 1 &amp;&amp; c0==1));}
00420 
<a name="l00421"></a><a class="code" href="class_WtLexDiffHistoryRep.html#a17">00421</a>   <a class="code" href="class_AheadInfoRep.html">AheadInfoRep</a> * <a class="code" href="class_DiffHistoryRep.html#a12">buildAheadInfoRep</a>()<font class="keyword"> const </font>{ 
00422     <a class="code" href="class_WtLexAheadInfoRep.html">WtLexAheadInfoRep</a> *  aip = <font class="keyword">new</font> WtLexAheadInfoRep(w0,c0); <font class="keywordflow">return</font> aip; }
00423 
<a name="l00424"></a><a class="code" href="class_WtLexDiffHistoryRep.html#a18">00424</a>   <font class="keywordtype">void</font> <a class="code" href="class_DiffHistoryRep.html#a13">printOn</a>(ostream &amp;ostr = cout)<font class="keyword"> const </font>
00425 <font class="keyword">  </font>{
00426     ostr &lt;&lt; <font class="stringliteral">"d="</font>&lt;&lt; d &lt;&lt; <font class="stringliteral">" c0="</font>&lt;&lt; c0 &lt;&lt;<font class="stringliteral">" w0="</font>&lt;&lt;w0&lt;&lt;<font class="stringliteral">" c1="</font>&lt;&lt;c1&lt;&lt;<font class="stringliteral">" w1="</font>&lt;&lt;w1&lt;&lt;<font class="stringliteral">"; "</font>;
00427   }
00428   
00429   <font class="keyword">inline</font> <font class="keyword">friend</font> ostream&amp; <font class="keyword">operator</font> &lt;&lt; 
<a name="l00430"></a><a class="code" href="class_WtLexDiffHistoryRep.html#l0">00430</a>         ( ostream&amp; ostr, <font class="keyword">const</font> <a class="code" href="class_WtLexDiffHistoryRep.html">WtLexDiffHistoryRep</a>&amp; dh ) {
00431                   ostr &lt;&lt; <font class="stringliteral">"d="</font>&lt;&lt; dh.d &lt;&lt; <font class="stringliteral">" c0="</font>&lt;&lt; dh.c0 &lt;&lt;
00432                          <font class="stringliteral">" w0="</font>&lt;&lt;dh.w0&lt;&lt;<font class="stringliteral">" c1="</font>&lt;&lt;dh.c1&lt;&lt;<font class="stringliteral">" w1="</font>&lt;&lt;dh.w1&lt;&lt;<font class="stringliteral">"; "</font>;
00433     <font class="keywordflow">return</font> ostr;
00434   }
00435   
00436   
00437 <font class="keyword">private</font>:
<a name="l00438"></a><a class="code" href="class_WtLexDiffHistoryRep.html#o0">00438</a>   State d;
<a name="l00439"></a><a class="code" href="class_WtLexDiffHistoryRep.html#o2">00439</a>   <font class="keywordtype">int</font> c0, c1;
<a name="l00440"></a><a class="code" href="class_WtLexDiffHistoryRep.html#o4">00440</a>   <font class="keywordtype">int</font> w0, w1;
00441 };
00442 
00443 
00444 <font class="comment">// Now the DiffHistoryVtxRep hierarchy. There is one type for each word order. </font>
00445 <font class="comment">// In the comments below d is always a word difference, which has arisen</font>
00446 <font class="comment">// as various products of the form w^-1u</font>
00447 
<a name="l00448"></a><a class="code" href="class_DiffHistoryVtxRep.html">00448</a> <font class="keyword">class </font><a class="code" href="class_DiffHistoryVtxRep.html">DiffHistoryVtxRep</a> : <font class="keyword">public</font> <a class="code" href="class_RefCounter.html">RefCounter</a> {
00449 <font class="keyword">public</font>:
00450 <font class="comment">//constructor</font>
<a name="l00451"></a><a class="code" href="class_DiffHistoryVtxRep.html#a0">00451</a>   <a class="code" href="class_DiffHistoryVtxRep.html#a0">DiffHistoryVtxRep</a>(): diff(0), gen(0), backptr(0),len(0) {};
<a name="l00452"></a><a class="code" href="class_DiffHistoryVtxRep.html#a1">00452</a>   <a class="code" href="class_DiffHistoryVtxRep.html#a0">DiffHistoryVtxRep</a>(State D,<font class="keywordtype">int</font> G,<a class="code" href="class_DiffHistoryVtx.html">DiffHistoryVtx</a> * ptr,<font class="keywordtype">int</font> L):
00453      diff(D), gen(G), backptr(ptr),len(L) {};
00454 <font class="comment">//copy constructor</font>
<a name="l00455"></a><a class="code" href="class_DiffHistoryVtxRep.html#a2">00455</a>   <a class="code" href="class_DiffHistoryVtxRep.html#a0">DiffHistoryVtxRep</a>(<font class="keyword">const</font> <a class="code" href="class_DiffHistoryVtxRep.html">DiffHistoryVtxRep</a> &amp; dh)<font class="keyword"> </font>{
00456     diff = dh.diff; gen = dh.gen; backptr = dh.backptr; len = dh.len;
00457   };
<a name="l00458"></a><a class="code" href="class_DiffHistoryVtxRep.html#a3">00458</a>   <a class="code" href="class_DiffHistoryVtxRep.html">DiffHistoryVtxRep</a> *<a class="code" href="class_AheadInfoRep.html#a2">clone</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> <font class="keyword">new</font> <a class="code" href="class_DiffHistoryVtxRep.html#a0">DiffHistoryVtxRep</a>(*<font class="keyword">this</font>);};
00459 <font class="comment">//destructor</font>
<a name="l00460"></a><a class="code" href="class_DiffHistoryVtxRep.html#a4">00460</a>   <a class="code" href="class_DiffHistoryVtxRep.html#a4">~DiffHistoryVtxRep</a>()<font class="keyword"> </font>{};
00461 
<a name="l00462"></a><a class="code" href="class_DiffHistoryVtxRep.html#a5">00462</a>   State <a class="code" href="class_DiffHistoryRep.html#a6">getDiff</a>()<font class="keyword"> const </font>{<font class="keywordflow">return</font> diff;};
<a name="l00463"></a><a class="code" href="class_DiffHistoryVtxRep.html#a6">00463</a>   <font class="keywordtype">int</font> <a class="code" href="class_DiffHistoryVtxRep.html#a6">getGenerator</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> gen;}
<a name="l00464"></a><a class="code" href="class_DiffHistoryVtxRep.html#a7">00464</a>   <a class="code" href="class_DiffHistoryVtx.html">DiffHistoryVtx</a> *<a class="code" href="class_DiffHistoryVtxRep.html#a7">getBackptr</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> backptr;}
<a name="l00465"></a><a class="code" href="class_DiffHistoryVtxRep.html#a8">00465</a>   <font class="keywordtype">int</font> <a class="code" href="class_DiffHistoryVtxRep.html#a8">getLength</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> len;}
00466 <font class="comment">//operators</font>
<a name="l00467"></a><a class="code" href="class_DiffHistoryVtxRep.html#a9">00467</a>   <font class="keywordtype">int</font> <a class="code" href="Property_h.html#a1">operator== </a>( <font class="keyword">const</font> <a class="code" href="class_DiffHistoryVtxRep.html">DiffHistoryVtxRep</a> &amp; dh)<font class="keyword"> const </font>{
00468   diff == dh.diff; gen==dh.gen; backptr == dh.backptr; len==dh.len;};
<a name="l00469"></a><a class="code" href="class_DiffHistoryVtxRep.html#a10">00469</a>   <a class="code" href="class_DiffHistoryVtxRep.html">DiffHistoryVtxRep</a>&amp;  <a class="code" href="class_RefCounter.html#c0">operator= </a>( <font class="keyword">const</font> <a class="code" href="class_DiffHistoryVtxRep.html">DiffHistoryVtxRep</a> &amp; dh )<font class="keyword"> </font>{
00470     diff = dh.diff; gen = dh.gen; backptr = dh.backptr; len = dh.len;
00471     <font class="keywordflow">return</font> *<font class="keyword">this</font>;
00472   };
00473 
<a name="l00474"></a><a class="code" href="class_DiffHistoryVtxRep.html#a11">00474</a>   <font class="keyword">virtual</font> <a class="code" href="class_Trichotomy.html">Trichotomy</a> <a class="code" href="class_DiffHistoryVtxRep.html#a11">betterThan</a>(<font class="keyword">const</font> <a class="code" href="class_DiffHistoryVtxRep.html">DiffHistoryVtxRep</a> &amp; dh)<font class="keyword"> const </font>{};
00475 <font class="comment">// Only to be called if the word differences match.</font>
00476 <font class="comment">// If the word differences match,</font>
00477 <font class="comment">// returns yes if whenever dh predicts a reduction, the current</font>
00478 <font class="comment">// DiffHistoryVtx predicts one too and there could be situations</font>
00479 <font class="comment">// where the current DiffHistoryVtx predicts a reduction but dh </font>
00480 <font class="comment">// does not, no if dh predicts a</font>
00481 <font class="comment">// reduction whenever the current DiffHistoryVtx does,</font>
00482 <font class="comment">// dontknow if neither of the above is true (or it seems too much work </font>
00483 <font class="comment">// to find out).</font>
00484 
<a name="l00485"></a><a class="code" href="class_DiffHistoryVtxRep.html#a12">00485</a>   <font class="keyword">virtual</font> Bool <a class="code" href="class_DiffHistoryRep.html#a11">possibleReductionAhead</a>()<font class="keyword"> const </font>{};
00486 <font class="comment">// return YES if the possibility cannot be ruled out that some w is equal</font>
00487 <font class="comment">// in G to a longer word u', of which u is a prefix, and such that u&lt;w.</font>
00488 
00489 
<a name="l00490"></a><a class="code" href="class_DiffHistoryVtxRep.html#a13">00490</a>   <font class="keywordtype">void</font> <a class="code" href="class_DiffHistoryRep.html#a13">printOn</a>(ostream &amp;ostr = cout)<font class="keyword"> const </font>{
00491     ostr &lt;&lt; <font class="stringliteral">"diff="</font>&lt;&lt; diff &lt;&lt;<font class="stringliteral">", gen= "</font>&lt;&lt;gen&lt;&lt;<font class="stringliteral">", backptr = "</font>&lt;&lt;backptr
00492          &lt;&lt;<font class="stringliteral">", len="</font>&lt;&lt;len&lt;&lt;<font class="stringliteral">"; "</font>;
00493   };
00494 
<a name="l00495"></a><a class="code" href="class_DiffHistoryVtxRep.html#l0">00495</a>   <font class="keyword">inline</font> <font class="keyword">friend</font> ostream&amp; <a class="code" href="DatabaseManager_h.html#a28">operator &lt;&lt; </a>(ostream &amp; ostr, <font class="keyword">const</font> <a class="code" href="class_DiffHistoryVtxRep.html">DiffHistoryVtxRep</a>&amp; dh )<font class="keyword"> </font>{
00496     ostr &lt;&lt; <font class="stringliteral">"diff="</font>&lt;&lt; dh.diff &lt;&lt;<font class="stringliteral">", gen= "</font>&lt;&lt;dh.gen&lt;&lt;<font class="stringliteral">", backptr = "</font>&lt;&lt;dh.backptr
00497          &lt;&lt;<font class="stringliteral">", len="</font>&lt;&lt;dh.len&lt;&lt;<font class="stringliteral">"; "</font>;
00498     <font class="keywordflow">return</font> ostr;
00499   };
00500 <font class="keyword">private</font>:
<a name="l00501"></a><a class="code" href="class_DiffHistoryVtxRep.html#o0">00501</a>   State diff;
<a name="l00502"></a><a class="code" href="class_DiffHistoryVtxRep.html#o1">00502</a>   <font class="keywordtype">int</font> gen;
<a name="l00503"></a><a class="code" href="class_DiffHistoryVtxRep.html#o2">00503</a>   <a class="code" href="class_DiffHistoryVtx.html">DiffHistoryVtx</a> * backptr;
<a name="l00504"></a><a class="code" href="class_DiffHistoryVtxRep.html#o3">00504</a>   <font class="keywordtype">int</font> len;
00505 };
00506 
00507 
<a name="l00508"></a><a class="code" href="class_SLDiffHistoryVtxRep.html">00508</a> <font class="keyword">class </font><a class="code" href="class_SLDiffHistoryVtxRep.html">SLDiffHistoryVtxRep</a> : <font class="keyword">public</font> <a class="code" href="class_DiffHistoryVtxRep.html">DiffHistoryVtxRep</a> {
00509 
00510 <font class="keyword">public</font>:
00511 <font class="comment">//constructors</font>
<a name="l00512"></a><a class="code" href="class_SLDiffHistoryVtxRep.html#a0">00512</a>   <a class="code" href="class_SLDiffHistoryVtxRep.html#a0">SLDiffHistoryVtxRep</a>(): <a class="code" href="class_DiffHistoryVtxRep.html">DiffHistoryVtxRep</a>(),lexComp(0){};
<a name="l00513"></a><a class="code" href="class_SLDiffHistoryVtxRep.html#a1">00513</a>   <a class="code" href="class_SLDiffHistoryVtxRep.html#a0">SLDiffHistoryVtxRep</a>(State D,<font class="keywordtype">int</font> G,<a class="code" href="class_DiffHistoryVtx.html">DiffHistoryVtx</a> * ptr,<font class="keywordtype">int</font> L,<font class="keywordtype">int</font> C):
00514     <a class="code" href="class_DiffHistoryVtxRep.html">DiffHistoryVtxRep</a>(D,G,ptr,L),lexComp(C) {};
00515 <font class="comment">//copy constructor</font>
<a name="l00516"></a><a class="code" href="class_SLDiffHistoryVtxRep.html#a2">00516</a>   <a class="code" href="class_SLDiffHistoryVtxRep.html#a0">SLDiffHistoryVtxRep</a>(<font class="keyword">const</font> <a class="code" href="class_SLDiffHistoryVtxRep.html">SLDiffHistoryVtxRep</a> &amp; dh) 
00517     : <a class="code" href="class_DiffHistoryVtxRep.html">DiffHistoryVtxRep</a>(dh), lexComp(dh.lexComp){};
<a name="l00518"></a><a class="code" href="class_SLDiffHistoryVtxRep.html#a3">00518</a>   <a class="code" href="class_DiffHistoryVtxRep.html">DiffHistoryVtxRep</a> *<a class="code" href="class_AheadInfoRep.html#a2">clone</a>()<font class="keyword"> const </font>{ 
00519     <font class="keywordflow">return</font> <font class="keyword">new</font> <a class="code" href="class_SLDiffHistoryVtxRep.html#a0">SLDiffHistoryVtxRep</a>(*<font class="keyword">this</font>); } 
00520 <font class="comment">//destructor</font>
<a name="l00521"></a><a class="code" href="class_SLDiffHistoryVtxRep.html#a4">00521</a>   <a class="code" href="class_SLDiffHistoryVtxRep.html#a4">~SLDiffHistoryVtxRep</a>()<font class="keyword"> </font>{};
00522 <font class="comment">//accessors</font>
<a name="l00523"></a><a class="code" href="class_SLDiffHistoryVtxRep.html#a5">00523</a>   <font class="keywordtype">int</font> <a class="code" href="class_SLDiffHistoryVtxRep.html#a5">getLexComp</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> lexComp;};
00524 
00525   <font class="comment">//operators</font>
00526 <font class="comment">/*</font>
00527 <font class="comment">  int operator== ( const DiffHistoryVtxRep &amp; dh) const</font>
00528 <font class="comment">  {</font>
00529 <font class="comment">LOOK in FSA hierarchy</font>
00530 <font class="comment">    const SLDiffHistoryVtxRep&amp; ddh = (SLDiffHistoryVtxRep&amp;)dh;</font>
00531 <font class="comment">    return (SOMETHING &amp;&amp; lexComp = ddh.lexComp);</font>
00532 <font class="comment">  }</font>
00533 <font class="comment">*/</font>
00534  
<a name="l00535"></a><a class="code" href="class_SLDiffHistoryVtxRep.html#a6">00535</a>   <a class="code" href="class_DiffHistoryVtxRep.html">DiffHistoryVtxRep</a>&amp;  <a class="code" href="class_RefCounter.html#c0">operator= </a>( <font class="keyword">const</font> <a class="code" href="class_DiffHistoryVtxRep.html">DiffHistoryVtxRep</a> &amp; dh )<font class="keyword"></font>
00536 <font class="keyword">  </font>{
00537     (<a class="code" href="class_DiffHistoryVtxRep.html">DiffHistoryVtxRep</a>)*<font class="keyword">this</font> = dh;
00538     <font class="keyword">const</font> <a class="code" href="class_SLDiffHistoryVtxRep.html">SLDiffHistoryVtxRep</a>&amp; ddh = (<a class="code" href="class_SLDiffHistoryVtxRep.html">SLDiffHistoryVtxRep</a>&amp;)dh;
00539     lexComp = ddh.lexComp;
00540     <font class="keywordflow">return</font> *<font class="keyword">this</font>;
00541   }
00542 
<a name="l00543"></a><a class="code" href="class_SLDiffHistoryVtxRep.html#a7">00543</a>    <a class="code" href="class_Trichotomy.html">Trichotomy</a> <a class="code" href="class_DiffHistoryVtxRep.html#a11">betterThan</a>(<font class="keyword">const</font> <a class="code" href="class_DiffHistoryVtxRep.html">DiffHistoryVtxRep</a> &amp; dh)<font class="keyword"> const </font>{
00544 <font class="comment">// Only to be called if the word differences match.</font>
00545 <font class="comment">// If the word differences match,</font>
00546 <font class="comment">// returns yes if whenever dh predicts a reduction, the current</font>
00547 <font class="comment">// DiffHistoryVtx predicts one too and there could be situations</font>
00548 <font class="comment">// where the current DiffHistoryVtx predicts a reduction but dh </font>
00549 <font class="comment">// does not, no if dh predicts a</font>
00550 <font class="comment">// reduction whenever the current DiffHistoryVtx does,</font>
00551 <font class="comment">// dontknow if neither of the above is true (or it seems too much work </font>
00552 <font class="comment">// to find out).</font>
00553 
00554     <font class="keywordflow">if</font> (<a class="code" href="class_DiffHistoryRep.html#a6">getDiff</a>()!=dh.<a class="code" href="class_DiffHistoryVtxRep.html#a5">getDiff</a>()) <font class="keywordflow">return</font> dontknow;
00555 
00556     <font class="keywordtype">int</font> g1,g2;
00557 
00558 <font class="comment">// If one DiffHistoryVtx corresponds to a shorter word and one to a word</font>
00559 <font class="comment">// the same length as w, neither can be considered to be better than</font>
00560 <font class="comment">// the other</font>
00561     <font class="keywordflow">if</font> (((g1=<a class="code" href="class_DiffHistoryVtxRep.html#a6">getGenerator</a>())==0 &amp;&amp; (g2=dh.<a class="code" href="class_DiffHistoryVtxRep.html#a6">getGenerator</a>()))||
00562          g1 &amp; g2==0) <font class="keywordflow">return</font> dontknow;
00563 
00564 <font class="comment">// If both words are shorter than w, either DiffHistoryVtx is as</font>
00565 <font class="comment">// good as the other, so we return no</font>
00566 
00567     <font class="keywordflow">if</font> (g1==0 &amp;&amp; g2==0) <font class="keywordflow">return</font> no;
00568 
00569 <font class="comment">// If both words are the same length as w, we return yes if the</font>
00570 <font class="comment">// current DiffHistoryVtx corresponds to a word which precedes w</font>
00571 <font class="comment">// lexicographically, but dh does not.</font>
00572 <font class="comment">// Otherwise dh is just as good as the current DiffHistoryVtx, so</font>
00573 <font class="comment">// we return no.</font>
00574      
00575     <font class="keyword">const</font> <a class="code" href="class_SLDiffHistoryVtxRep.html">SLDiffHistoryVtxRep</a>&amp; ddh = (<a class="code" href="class_SLDiffHistoryVtxRep.html">SLDiffHistoryVtxRep</a>&amp;)dh;
00576     <font class="keywordflow">if</font> (lexComp==1 &amp;&amp; ddh.lexComp== -1) <font class="keywordflow">return</font> yes;
00577     <font class="keywordflow">else</font> <font class="keywordflow">return</font> no; 
00578   }
00579 
<a name="l00580"></a><a class="code" href="class_SLDiffHistoryVtxRep.html#a8">00580</a>   Bool <a class="code" href="class_DiffHistoryRep.html#a11">possibleReductionAhead</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> no;}
00581 
<a name="l00582"></a><a class="code" href="class_SLDiffHistoryVtxRep.html#a9">00582</a>   <font class="keywordtype">void</font> <a class="code" href="class_DiffHistoryRep.html#a13">printOn</a>(ostream &amp;ostr = cout)<font class="keyword"> const </font>
00583 <font class="keyword">  </font>{
00584     <a class="code" href="class_DiffHistoryRep.html#a13">DiffHistoryVtxRep::printOn</a>(ostr);
00585     ostr &lt;&lt; <font class="stringliteral">" lexComp="</font>&lt;&lt; lexComp &lt;&lt;<font class="stringliteral">"; "</font>;
00586   }
00587   
00588   <font class="keyword">inline</font> <font class="keyword">friend</font> ostream&amp; <font class="keyword">operator</font> &lt;&lt; 
<a name="l00589"></a><a class="code" href="class_SLDiffHistoryVtxRep.html#l0">00589</a>         ( ostream&amp; ostr, <font class="keyword">const</font> <a class="code" href="class_SLDiffHistoryVtxRep.html">SLDiffHistoryVtxRep</a>&amp; dh ) {
00590     <a class="code" href="class_DiffHistoryVtxRep.html">DiffHistoryVtxRep</a> ddh = (<a class="code" href="class_DiffHistoryVtxRep.html">DiffHistoryVtxRep</a>)dh;
00591     ostr &lt;&lt; ddh &lt;&lt; <font class="stringliteral">", lexComp="</font>&lt;&lt; dh.lexComp &lt;&lt;<font class="stringliteral">"; "</font>;
00592     <font class="keywordflow">return</font> ostr;
00593   }
00594   
00595   
00596 <font class="keyword">private</font>:
<a name="l00597"></a><a class="code" href="class_SLDiffHistoryVtxRep.html#o0">00597</a>   <font class="keywordtype">int</font> lexComp; <font class="comment">// =1 if, where d=w^-1u, w&gt;u in lex, -1 if w&lt;u</font>
00598                       <font class="comment">// 0 if not set</font>
00599 };
00600 
00601 <font class="comment">// at the moment the two classes below are identical.</font>
00602 <font class="comment">// if they don't change we could probably manage with one!</font>
00603 
<a name="l00604"></a><a class="code" href="class_WtSLDiffHistoryVtxRep.html">00604</a> <font class="keyword">class </font><a class="code" href="class_WtSLDiffHistoryVtxRep.html">WtSLDiffHistoryVtxRep</a> : <font class="keyword">public</font> <a class="code" href="class_DiffHistoryVtxRep.html">DiffHistoryVtxRep</a> {
00605 
00606 <font class="keyword">public</font>:
00607 <font class="comment">//constructors</font>
<a name="l00608"></a><a class="code" href="class_WtSLDiffHistoryVtxRep.html#a0">00608</a>   <a class="code" href="class_WtSLDiffHistoryVtxRep.html#a0">WtSLDiffHistoryVtxRep</a>(): <a class="code" href="class_DiffHistoryVtxRep.html">DiffHistoryVtxRep</a>(),lexComp(0), wtdiff(0){};
<a name="l00609"></a><a class="code" href="class_WtSLDiffHistoryVtxRep.html#a1">00609</a>   <a class="code" href="class_WtSLDiffHistoryVtxRep.html#a0">WtSLDiffHistoryVtxRep</a>(State D,<font class="keywordtype">int</font> G,<a class="code" href="class_DiffHistoryVtx.html">DiffHistoryVtx</a> * ptr,<font class="keywordtype">int</font> L,
00610                          <font class="keywordtype">int</font> C, <font class="keywordtype">int</font> WD):
00611     <a class="code" href="class_DiffHistoryVtxRep.html">DiffHistoryVtxRep</a>(D,G,ptr,L),lexComp(C), wtdiff(WD) {};
00612 <font class="comment">//copy constructor</font>
<a name="l00613"></a><a class="code" href="class_WtSLDiffHistoryVtxRep.html#a2">00613</a>   <a class="code" href="class_WtSLDiffHistoryVtxRep.html#a0">WtSLDiffHistoryVtxRep</a>(<font class="keyword">const</font> <a class="code" href="class_WtSLDiffHistoryVtxRep.html">WtSLDiffHistoryVtxRep</a> &amp; dh) 
00614     : <a class="code" href="class_DiffHistoryVtxRep.html">DiffHistoryVtxRep</a>(dh), lexComp(dh.lexComp), wtdiff(dh.wtdiff) {};
<a name="l00615"></a><a class="code" href="class_WtSLDiffHistoryVtxRep.html#a3">00615</a>   <a class="code" href="class_DiffHistoryVtxRep.html">DiffHistoryVtxRep</a> *<a class="code" href="class_AheadInfoRep.html#a2">clone</a>()<font class="keyword"> const </font>{ 
00616     <font class="keywordflow">return</font> <font class="keyword">new</font> <a class="code" href="class_WtSLDiffHistoryVtxRep.html#a0">WtSLDiffHistoryVtxRep</a>(*<font class="keyword">this</font>); } 
00617 <font class="comment">//destructor</font>
<a name="l00618"></a><a class="code" href="class_WtSLDiffHistoryVtxRep.html#a4">00618</a>   <a class="code" href="class_WtSLDiffHistoryVtxRep.html#a4">~WtSLDiffHistoryVtxRep</a>()<font class="keyword"> </font>{};
00619 <font class="comment">//accessors</font>
<a name="l00620"></a><a class="code" href="class_WtSLDiffHistoryVtxRep.html#a5">00620</a>   <font class="keywordtype">int</font> <a class="code" href="class_WtSLDiffHistoryVtxRep.html#a5">getLexComp</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> lexComp;};
<a name="l00621"></a><a class="code" href="class_WtSLDiffHistoryVtxRep.html#a6">00621</a>   <font class="keywordtype">int</font> <a class="code" href="class_WtSLDiffHistoryVtxRep.html#a6">getWtDiff</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> wtdiff;};
00622 
00623   <font class="comment">//operators</font>
00624 <font class="comment">/*</font>
00625 <font class="comment">  int operator== ( const DiffHistoryVtxRep &amp; dh) const</font>
00626 <font class="comment">  {</font>
00627 <font class="comment">LOOK in FSA hierarchy</font>
00628 <font class="comment">    const WtSLDiffHistoryVtxRep&amp; ddh = (WtSLDiffHistoryVtxRep&amp;)dh;</font>
00629 <font class="comment">    return (SOMETHING &amp;&amp; lexComp = ddh.lexComp &amp;&amp; wtdiff == ddh.wtdiff);</font>
00630 <font class="comment">  }</font>
00631 <font class="comment">*/</font>
00632  
<a name="l00633"></a><a class="code" href="class_WtSLDiffHistoryVtxRep.html#a7">00633</a>   <a class="code" href="class_DiffHistoryVtxRep.html">DiffHistoryVtxRep</a>&amp;  <a class="code" href="class_RefCounter.html#c0">operator= </a>( <font class="keyword">const</font> <a class="code" href="class_DiffHistoryVtxRep.html">DiffHistoryVtxRep</a> &amp; dh )<font class="keyword"></font>
00634 <font class="keyword">  </font>{
00635     (<a class="code" href="class_WtSLDiffHistoryVtxRep.html">WtSLDiffHistoryVtxRep</a>)*<font class="keyword">this</font> = dh;
00636     <font class="keyword">const</font> <a class="code" href="class_WtSLDiffHistoryVtxRep.html">WtSLDiffHistoryVtxRep</a>&amp; ddh = (<a class="code" href="class_WtSLDiffHistoryVtxRep.html">WtSLDiffHistoryVtxRep</a>&amp;)dh;
00637     lexComp = ddh.lexComp; wtdiff = ddh.wtdiff;
00638     <font class="keywordflow">return</font> *<font class="keyword">this</font>;
00639   }
00640 
<a name="l00641"></a><a class="code" href="class_WtSLDiffHistoryVtxRep.html#a8">00641</a>    <a class="code" href="class_Trichotomy.html">Trichotomy</a> <a class="code" href="class_DiffHistoryVtxRep.html#a11">betterThan</a>(<font class="keyword">const</font> <a class="code" href="class_DiffHistoryVtxRep.html">DiffHistoryVtxRep</a> &amp; dh)<font class="keyword"> const </font>{
00642 <font class="comment">// Only to be called if the word differences match.</font>
00643 <font class="comment">// If the word differences match,</font>
00644 <font class="comment">// returns yes if whenever dh predicts a reduction, the current</font>
00645 <font class="comment">// DiffHistoryVtx predicts one too and there could be situations</font>
00646 <font class="comment">// where the current DiffHistoryVtx predicts a reduction but dh </font>
00647 <font class="comment">// does not, no if dh predicts a</font>
00648 <font class="comment">// reduction whenever the current DiffHistoryVtx does,</font>
00649 <font class="comment">// dontknow if neither of the above is true (or it seems too much work </font>
00650 <font class="comment">// to find out).</font>
00651 
00652     <font class="keywordflow">if</font> (<a class="code" href="class_DiffHistoryRep.html#a6">getDiff</a>()!=dh.<a class="code" href="class_DiffHistoryVtxRep.html#a5">getDiff</a>()) <font class="keywordflow">return</font> dontknow;
00653 
00654     <font class="keywordtype">int</font> g1,g2;
00655 
00656 <font class="comment">// If one DiffHistoryVtx corresponds to a shorter word and one to a word</font>
00657 <font class="comment">// the same length as w, neither can be considered to be better than</font>
00658 <font class="comment">// the other</font>
00659     <font class="keywordflow">if</font> (((g1=<a class="code" href="class_DiffHistoryVtxRep.html#a6">getGenerator</a>())==0 &amp;&amp; (g2=dh.<a class="code" href="class_DiffHistoryVtxRep.html#a6">getGenerator</a>()))||
00660          g1 &amp; g2==0) <font class="keywordflow">return</font> dontknow;
00661 
00662 <font class="comment">// If both words are shorter than w, </font>
00663 <font class="comment">// the current history is better if it has a larger weight difference,</font>
00664 <font class="comment">// but otherwise dh is at least as good as the other, so we return no.</font>
00665 
00666     <font class="keyword">const</font> <a class="code" href="class_WtSLDiffHistoryVtxRep.html">WtSLDiffHistoryVtxRep</a>&amp; ddh = (<a class="code" href="class_WtSLDiffHistoryVtxRep.html">WtSLDiffHistoryVtxRep</a>&amp;)dh;
00667     <font class="keywordflow">if</font> (g1==0 &amp;&amp; g2==0){
00668       <font class="keywordflow">if</font> (wtdiff &gt; ddh.wtdiff) <font class="keywordflow">return</font> yes;
00669       <font class="keywordflow">else</font> <font class="keywordflow">return</font> no;
00670     }
00671 
00672 <font class="comment">// If both words are the same length as w, we return yes if the</font>
00673 <font class="comment">// current DiffHistoryVtx has larger weight difference than dh,</font>
00674 <font class="comment">// or if it has the same weight difference as dh and corresponds </font>
00675 <font class="comment">// to a word which precedes w lexicographically, but dh does not.</font>
00676 <font class="comment">// Otherwise dh is just as good as the current DiffHistoryVtx, so</font>
00677 <font class="comment">// we return no.</font>
00678      
00679     <font class="keywordflow">if</font> ((wtdiff&gt;ddh.wtdiff) ||
00680     (wtdiff==ddh.wtdiff &amp;&amp; lexComp==1 &amp;&amp; ddh.lexComp== -1))
00681       <font class="keywordflow">return</font> yes;
00682     <font class="keywordflow">else</font> <font class="keywordflow">return</font> no; 
00683   }
00684 
<a name="l00685"></a><a class="code" href="class_WtSLDiffHistoryVtxRep.html#a9">00685</a>   Bool <a class="code" href="class_DiffHistoryRep.html#a11">possibleReductionAhead</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> (wtdiff &gt; 1);}
00686 
<a name="l00687"></a><a class="code" href="class_WtSLDiffHistoryVtxRep.html#a10">00687</a>   <font class="keywordtype">void</font> <a class="code" href="class_DiffHistoryRep.html#a13">printOn</a>(ostream &amp;ostr = cout)<font class="keyword"> const </font>
00688 <font class="keyword">  </font>{
00689     <a class="code" href="class_DiffHistoryRep.html#a13">DiffHistoryVtxRep::printOn</a>(ostr);
00690     ostr &lt;&lt; <font class="stringliteral">" lexComp="</font>&lt;&lt; lexComp &lt;&lt;<font class="stringliteral">" wtdiff="</font>&lt;&lt;wtdiff&lt;&lt;<font class="stringliteral">"; "</font>;
00691   }
00692   
00693   <font class="keyword">inline</font> <font class="keyword">friend</font> ostream&amp; <font class="keyword">operator</font> &lt;&lt; 
<a name="l00694"></a><a class="code" href="class_WtSLDiffHistoryVtxRep.html#l0">00694</a>         ( ostream&amp; ostr, <font class="keyword">const</font> <a class="code" href="class_WtSLDiffHistoryVtxRep.html">WtSLDiffHistoryVtxRep</a>&amp; dh ) {
00695     <a class="code" href="class_DiffHistoryVtxRep.html">DiffHistoryVtxRep</a> ddh = (<a class="code" href="class_DiffHistoryVtxRep.html">DiffHistoryVtxRep</a>)dh;
00696     ostr &lt;&lt; ddh &lt;&lt; <font class="stringliteral">", lexComp="</font>&lt;&lt; dh.lexComp &lt;&lt;<font class="stringliteral">" wtdiff="</font>&lt;&lt;dh.wtdiff&lt;&lt;<font class="stringliteral">"; "</font>;
00697     <font class="keywordflow">return</font> ostr;
00698   }
00699   
00700   
00701 <font class="keyword">private</font>:
<a name="l00702"></a><a class="code" href="class_WtSLDiffHistoryVtxRep.html#o0">00702</a>   <font class="keywordtype">int</font> lexComp;
<a name="l00703"></a><a class="code" href="class_WtSLDiffHistoryVtxRep.html#o1">00703</a>   <font class="keywordtype">int</font> wtdiff;
00704 };
00705 
<a name="l00706"></a><a class="code" href="class_WtLexDiffHistoryVtxRep.html">00706</a> <font class="keyword">class </font><a class="code" href="class_WtLexDiffHistoryVtxRep.html">WtLexDiffHistoryVtxRep</a> : <font class="keyword">public</font> <a class="code" href="class_DiffHistoryVtxRep.html">DiffHistoryVtxRep</a> {
00707 <font class="keyword">public</font>:
00708 <font class="comment">//constructors</font>
<a name="l00709"></a><a class="code" href="class_WtLexDiffHistoryVtxRep.html#a0">00709</a>   <a class="code" href="class_WtLexDiffHistoryVtxRep.html#a0">WtLexDiffHistoryVtxRep</a>(): <a class="code" href="class_DiffHistoryVtxRep.html">DiffHistoryVtxRep</a>(),lexComp(0), wtdiff(0){};
<a name="l00710"></a><a class="code" href="class_WtLexDiffHistoryVtxRep.html#a1">00710</a>   <a class="code" href="class_WtLexDiffHistoryVtxRep.html#a0">WtLexDiffHistoryVtxRep</a>(State D,<font class="keywordtype">int</font> G,<a class="code" href="class_DiffHistoryVtx.html">DiffHistoryVtx</a> * ptr,<font class="keywordtype">int</font> L,
00711                          <font class="keywordtype">int</font> C, <font class="keywordtype">int</font> WD):
00712     <a class="code" href="class_DiffHistoryVtxRep.html">DiffHistoryVtxRep</a>(D,G,ptr,L),lexComp(C), wtdiff(WD) {};
00713 <font class="comment">//copy constructor</font>
<a name="l00714"></a><a class="code" href="class_WtLexDiffHistoryVtxRep.html#a2">00714</a>   <a class="code" href="class_WtLexDiffHistoryVtxRep.html#a0">WtLexDiffHistoryVtxRep</a>(<font class="keyword">const</font> <a class="code" href="class_WtLexDiffHistoryVtxRep.html">WtLexDiffHistoryVtxRep</a> &amp; dh) 
00715     : <a class="code" href="class_DiffHistoryVtxRep.html">DiffHistoryVtxRep</a>(dh), lexComp(dh.lexComp), wtdiff(dh.wtdiff) {};
<a name="l00716"></a><a class="code" href="class_WtLexDiffHistoryVtxRep.html#a3">00716</a>   <a class="code" href="class_DiffHistoryVtxRep.html">DiffHistoryVtxRep</a> *<a class="code" href="class_AheadInfoRep.html#a2">clone</a>()<font class="keyword"> const </font>{ 
00717     <font class="keywordflow">return</font> <font class="keyword">new</font> <a class="code" href="class_WtLexDiffHistoryVtxRep.html#a0">WtLexDiffHistoryVtxRep</a>(*<font class="keyword">this</font>); } 
00718 <font class="comment">//destructor</font>
<a name="l00719"></a><a class="code" href="class_WtLexDiffHistoryVtxRep.html#a4">00719</a>   <a class="code" href="class_WtLexDiffHistoryVtxRep.html#a4">~WtLexDiffHistoryVtxRep</a>()<font class="keyword"> </font>{};
00720 <font class="comment">//accessors</font>
<a name="l00721"></a><a class="code" href="class_WtLexDiffHistoryVtxRep.html#a5">00721</a>   <font class="keywordtype">int</font> <a class="code" href="class_WtLexDiffHistoryVtxRep.html#a5">getLexComp</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> lexComp;};
<a name="l00722"></a><a class="code" href="class_WtLexDiffHistoryVtxRep.html#a6">00722</a>   <font class="keywordtype">int</font> <a class="code" href="class_WtLexDiffHistoryVtxRep.html#a6">getWtDiff</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> wtdiff;};
00723 
00724   <font class="comment">//operators</font>
00725 <font class="comment">/*</font>
00726 <font class="comment">  int operator== ( const DiffHistoryVtxRep &amp; dh) const</font>
00727 <font class="comment">  {</font>
00728 <font class="comment">LOOK in FSA hierarchy</font>
00729 <font class="comment">    const WtLexDiffHistoryVtxRep&amp; ddh = (WtLexDiffHistoryVtxRep&amp;)dh;</font>
00730 <font class="comment">    return (SOMETHING &amp;&amp; lexComp = ddh.lexComp &amp;&amp; wtdiff == ddh.wtdiff);</font>
00731 <font class="comment">  }</font>
00732 <font class="comment">*/</font>
00733  
<a name="l00734"></a><a class="code" href="class_WtLexDiffHistoryVtxRep.html#a7">00734</a>   <a class="code" href="class_DiffHistoryVtxRep.html">DiffHistoryVtxRep</a>&amp;  <a class="code" href="class_RefCounter.html#c0">operator= </a>( <font class="keyword">const</font> <a class="code" href="class_DiffHistoryVtxRep.html">DiffHistoryVtxRep</a> &amp; dh )<font class="keyword"></font>
00735 <font class="keyword">  </font>{
00736     (<a class="code" href="class_WtLexDiffHistoryVtxRep.html">WtLexDiffHistoryVtxRep</a>)*<font class="keyword">this</font> = dh;
00737     <font class="keyword">const</font> <a class="code" href="class_WtLexDiffHistoryVtxRep.html">WtLexDiffHistoryVtxRep</a>&amp; ddh = (<a class="code" href="class_WtLexDiffHistoryVtxRep.html">WtLexDiffHistoryVtxRep</a>&amp;)dh;
00738     lexComp = ddh.lexComp; wtdiff = ddh.wtdiff;
00739     <font class="keywordflow">return</font> *<font class="keyword">this</font>;
00740   }
00741 
<a name="l00742"></a><a class="code" href="class_WtLexDiffHistoryVtxRep.html#a8">00742</a>    <a class="code" href="class_Trichotomy.html">Trichotomy</a> <a class="code" href="class_DiffHistoryVtxRep.html#a11">betterThan</a>(<font class="keyword">const</font> <a class="code" href="class_DiffHistoryVtxRep.html">DiffHistoryVtxRep</a> &amp; dh)<font class="keyword"> const </font>{
00743 <font class="comment">// Only to be called if the word differences match.</font>
00744 <font class="comment">// If the word differences match,</font>
00745 <font class="comment">// returns yes if whenever dh predicts a reduction, the current</font>
00746 <font class="comment">// DiffHistoryVtx predicts one too and there could be situations</font>
00747 <font class="comment">// where the current DiffHistoryVtx predicts a reduction but dh </font>
00748 <font class="comment">// does not, no if dh predicts a</font>
00749 <font class="comment">// reduction whenever the current DiffHistoryVtx does,</font>
00750 <font class="comment">// dontknow if neither of the above is true (or it seems too much work </font>
00751 <font class="comment">// to find out).</font>
00752 
00753     <font class="keywordflow">if</font> (<a class="code" href="class_DiffHistoryRep.html#a6">getDiff</a>()!=dh.<a class="code" href="class_DiffHistoryVtxRep.html#a5">getDiff</a>()) <font class="keywordflow">return</font> dontknow;
00754 
00755     <font class="keywordtype">int</font> g1,g2;
00756 
00757 <font class="comment">// If one DiffHistoryVtx corresponds to a shorter word and one to a word</font>
00758 <font class="comment">// the same length as w, neither can be considered to be better than</font>
00759 <font class="comment">// the other</font>
00760     <font class="keywordflow">if</font> (((g1=<a class="code" href="class_DiffHistoryVtxRep.html#a6">getGenerator</a>())==0 &amp;&amp; (g2=dh.<a class="code" href="class_DiffHistoryVtxRep.html#a6">getGenerator</a>()))||
00761          g1 &amp; g2==0) <font class="keywordflow">return</font> dontknow;
00762 
00763 <font class="comment">// If both words are shorter than w, </font>
00764 <font class="comment">// the current history is better if it has a larger weight difference,</font>
00765 <font class="comment">// but otherwise dh is at least as good as the other, so we return no.</font>
00766 
00767     <font class="keyword">const</font> <a class="code" href="class_WtLexDiffHistoryVtxRep.html">WtLexDiffHistoryVtxRep</a>&amp; ddh = (<a class="code" href="class_WtLexDiffHistoryVtxRep.html">WtLexDiffHistoryVtxRep</a>&amp;)dh;
00768     <font class="keywordflow">if</font> (g1==0 &amp;&amp; g2==0){
00769       <font class="keywordflow">if</font> (wtdiff &gt; ddh.wtdiff) <font class="keywordflow">return</font> yes;
00770       <font class="keywordflow">else</font> <font class="keywordflow">return</font> no;
00771     }
00772 
00773 <font class="comment">// If both words are the same length as w, we return yes if the</font>
00774 <font class="comment">// current DiffHistoryVtx has larger weight difference than dh,</font>
00775 <font class="comment">// or if it has the same weight difference as dh and corresponds </font>
00776 <font class="comment">// to a word which precedes w lexicographically, but dh does not.</font>
00777 <font class="comment">// Otherwise dh is just as good as the current DiffHistoryVtx, so</font>
00778 <font class="comment">// we return no.</font>
00779      
00780     <font class="keywordflow">if</font> ((wtdiff&gt;ddh.wtdiff) ||
00781     (wtdiff==ddh.wtdiff &amp;&amp; lexComp==1 &amp;&amp; ddh.lexComp== -1))
00782       <font class="keywordflow">return</font> yes;
00783     <font class="keywordflow">else</font> <font class="keywordflow">return</font> no; 
00784   }
00785 
00786 
<a name="l00787"></a><a class="code" href="class_WtLexDiffHistoryVtxRep.html#a9">00787</a>   Bool <a class="code" href="class_DiffHistoryRep.html#a11">possibleReductionAhead</a>()<font class="keyword"> const </font>{ 
00788      <font class="keywordflow">return</font> (wtdiff&gt;1 ||(lexComp==1 &amp;&amp; wtdiff &gt; 0));}
00789 
<a name="l00790"></a><a class="code" href="class_WtLexDiffHistoryVtxRep.html#a10">00790</a>   <font class="keywordtype">void</font> <a class="code" href="class_DiffHistoryRep.html#a13">printOn</a>(ostream &amp;ostr = cout)<font class="keyword"> const </font>
00791 <font class="keyword">  </font>{
00792     <a class="code" href="class_DiffHistoryRep.html#a13">DiffHistoryVtxRep::printOn</a>(ostr);
00793     ostr &lt;&lt; <font class="stringliteral">" lexComp="</font>&lt;&lt; lexComp &lt;&lt;<font class="stringliteral">" wtdiff="</font>&lt;&lt;wtdiff&lt;&lt;<font class="stringliteral">"; "</font>;
00794   }
00795   
00796   <font class="keyword">inline</font> <font class="keyword">friend</font> ostream&amp; <font class="keyword">operator</font> &lt;&lt; 
<a name="l00797"></a><a class="code" href="class_WtLexDiffHistoryVtxRep.html#l0">00797</a>         ( ostream&amp; ostr, <font class="keyword">const</font> <a class="code" href="class_WtLexDiffHistoryVtxRep.html">WtLexDiffHistoryVtxRep</a>&amp; dh ) {
00798     <a class="code" href="class_DiffHistoryVtxRep.html">DiffHistoryVtxRep</a> ddh = (<a class="code" href="class_DiffHistoryVtxRep.html">DiffHistoryVtxRep</a>)dh;
00799     ostr &lt;&lt; ddh &lt;&lt; <font class="stringliteral">", lexComp="</font>&lt;&lt; dh.lexComp &lt;&lt;
00800           <font class="stringliteral">" wtdiff="</font>&lt;&lt;dh.wtdiff&lt;&lt;<font class="stringliteral">"; "</font>;
00801     <font class="keywordflow">return</font> ostr;
00802   }
00803   
00804   
00805 <font class="keyword">private</font>:
<a name="l00806"></a><a class="code" href="class_WtLexDiffHistoryVtxRep.html#o0">00806</a>   <font class="keywordtype">int</font> lexComp;
<a name="l00807"></a><a class="code" href="class_WtLexDiffHistoryVtxRep.html#o1">00807</a>   <font class="keywordtype">int</font> wtdiff;
00808 };
00809 
00810 
00811 <font class="preprocessor">#endif</font>
</font></pre></div><hr><address><small>Generated at Tue Jun 19 09:49:36 2001 for Magnus Classes by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.6 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2001</small></address>
</body>
</html>
