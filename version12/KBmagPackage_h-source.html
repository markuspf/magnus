<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta name="robots" content="noindex">
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>/magnus/back_end/KB/include/KBmagPackage.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.6 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>/magnus/back_end/KB/include/KBmagPackage.h</h1><a href="KBmagPackage_h.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <font class="comment">/*</font>
00002 <font class="comment">  *   $Id: KBmagPackage.h,v 1.3 1996/08/15 18:55:48 bormotov Exp $</font>
00003 <font class="comment"> */</font>
00004 
00005 <font class="comment">// Copyright (C) 1994 The New York Group Theory Cooperative</font>
00006 <font class="comment">// See magnus/doc/COPYRIGHT for the full notice.</font>
00007 
00008 <font class="comment">// Contents: Definition of KBmagPackage class.</font>
00009 <font class="comment">//</font>
00010 <font class="comment">// Principal Author: Sarah Rees</font>
00011 <font class="comment">//</font>
00012 <font class="comment">// Status: in progress</font>
00013 <font class="comment">//</font>
00014 <font class="comment">// Revision History:</font>
00015 <font class="comment">//</font>
00016 <font class="comment">// * 06/24/95 Roger moved the ctors to .C, and made the static</font>
00017 <font class="comment">//            const Chars cdbin</font>
00018 <font class="comment">//            into a class data member, to both work around a compiler</font>
00019 <font class="comment">//            bug, and to avoid problems with the order of static init.</font>
00020 <font class="comment">//</font>
00021 <font class="comment">// Next implementation steps:</font>
00022 <font class="comment">//</font>
00023 <font class="comment">// * Deal with the many @rn, @rn:@sr, @sr comments here and in KBmagPackage.C</font>
00024 
00025 
00026 <font class="preprocessor">#ifndef _KBmagPackage_H_</font>
00027 <font class="preprocessor"></font><font class="preprocessor">#define _KBmagPackage_H_</font>
00028 <font class="preprocessor"></font>
00029 <font class="preprocessor">#include &lt;iomanip.h&gt;</font>
00030 
00031 <font class="preprocessor">#include "<a class="code" href="Vector_h.html">Vector.h</a>"</font>
00032 <font class="preprocessor">#include "<a class="code" href="Chars_h.html">Chars.h</a>"</font>
00033 <font class="preprocessor">#include "<a class="code" href="Set_h.html">Set.h</a>"</font>
00034 <font class="preprocessor">#include "<a class="code" href="Word_h.html">Word.h</a>"</font>
00035 <font class="preprocessor">#include "DFSA.h"</font>
00036 <font class="preprocessor">#include "<a class="code" href="DiffMachine_h.html">DiffMachine.h</a>"</font>
00037 <font class="preprocessor">#include "<a class="code" href="GenMult_h.html">GenMult.h</a>"</font>
00038 <font class="preprocessor">#include "<a class="code" href="WordOrder_h.html">WordOrder.h</a>"</font>
00039 
00040 <font class="keyword">extern</font> <font class="stringliteral">"C"</font> {
00041   <font class="keywordtype">char</font>* <a class="code" href="KBmagPackage_h.html#a0">tempnam</a>(<font class="keyword">const</font> <font class="keywordtype">char</font>*,<font class="keyword">const</font> <font class="keywordtype">char</font> *); 
00042          <font class="comment">// Lib functions SunOS doesn't declare.</font>
00043 }
<a name="l00044"></a><a class="code" href="class_KBmagPackage.html">00044</a> <font class="keyword">class </font><a class="code" href="class_KBmagPackage.html">KBmagPackage</a> {
00045 <font class="keyword">public</font>:
00046  
00047   <font class="comment">// KBmagPackage is a wrapper for Derek Holt's implementation of the automatic</font>
00048   <font class="comment">// group procedures which attempt to prove a group automatic by constructing</font>
00049   <font class="comment">// and verifying a shortlex automatic structure.</font>
00050   <font class="comment">// Each of the relevant programs corresponds to a method in this class,</font>
00051   <font class="comment">// which carries the name of Holt's program.</font>
00052   <font class="comment">// Various automata are computed by these programs, and are stored in</font>
00053   <font class="comment">// temporary files, but may be accessed by methods in this class.</font>
00054   <font class="comment">//</font>
00055   <font class="comment">// The method autgroup() runs the whole procedure. It returns YES if the</font>
00056   <font class="comment">// procedure completes and proves the group automatic, NO if the procedure</font>
00057   <font class="comment">// completes but fails to prove the group automatic, DONTKNOW if the procedure  // is unable to complete (probably through lack of memory). For a group which</font>
00058   <font class="comment">// is not automatic, autgroup() could run forever, so it is unwise to call it.  // It is wiser to run its constituent parts individually.</font>
00059   <font class="comment">//</font>
00060   <font class="comment">// These are as follows:-</font>
00061   <font class="comment">//</font>
00062   <font class="comment">// The method kbprog() runs a Knuth-Bendix procedure for a finite amount</font>
00063   <font class="comment">// of time, and, given enough resources, must eventually terminate,</font>
00064   <font class="comment">// when certain parameter bounds are met.</font>
00065   <font class="comment">// When it terminates a difference machine is computed.</font>
00066   <font class="comment">// YES is returned on successful termination, DONTKNOW if the</font>
00067   <font class="comment">// program cannot terminate through lack of resources.</font>
00068   <font class="comment">//</font>
00069   <font class="comment">// Once a difference machine has been supplied, the method gpwa() computes</font>
00070   <font class="comment">// a word acceptor from it. The construction is a finite logical operation,</font>
00071   <font class="comment">// and, given enough resources, must terminate.</font>
00072   <font class="comment">// Once a difference machine and word acceptor have been supplied, the</font>
00073   <font class="comment">// method gpgenmult() computes a general multiplier from it. Given</font>
00074   <font class="comment">// enough resources, this mult also terminate.</font>
00075   <font class="comment">// For both gpwa() and gpgenmult(),</font>
00076   <font class="comment">// YES is returned on successful termination, DONTKNOW if the</font>
00077   <font class="comment">// program cannot terminate through lack of resources.</font>
00078   <font class="comment">//</font>
00079   <font class="comment">// gpcheckmult() performs preliminary checks on the word acceptor and</font>
00080   <font class="comment">// general multipliers, and returns NO if those checks fails, YES on</font>
00081   <font class="comment">// successful termination and DONTKNOW if the program cannot terminate through  </font>
00082   <font class="comment">// lack of resources. In the case of a NO answer, additional word</font>
00083   <font class="comment">// differences are found and the difference machine is accordingly modified.</font>
00084   <font class="comment">// A new word acceptor and new general multiplier may be computed from</font>
00085   <font class="comment">// the modified difference machine, using gpwa() and gpgenmult()</font>
00086   <font class="comment">// and the preliminary checks run again.</font>
00087   <font class="comment">// The loop may be run until a YES answer is obtained from gpcheckmult()</font>
00088   <font class="comment">//</font>
00089   <font class="comment">// gpaxioms() performs further checks on the word acceptor and general</font>
00090   <font class="comment">// multipliers, and returns YES if those check verify that the automata</font>
00091   <font class="comment">// form an automatic structure, NO if the checks fail and DONTKNOW</font>
00092   <font class="comment">// if the checks fail to complete due to lack of resources.</font>
00093   <font class="comment">//</font>
00094   <font class="comment">// The sensible way to test whether or not a group is automatic is thus</font>
00095   <font class="comment">// to run kbprog(), then the sequence gpwa(), gpgenmult(), gpcheckmult()</font>
00096   <font class="comment">// repeatedly until a YES answer is obtained from gpcheckmult(),</font>
00097   <font class="comment">// then finally gpaxioms(). autgroup() runs the full suite of</font>
00098   <font class="comment">// programs as above, and gpmakefsa() runs the loop gpwa(), gpcheckmult(),</font>
00099   <font class="comment">// gpcheckmult(), stopping only when a YES answer is obtained.</font>
00100   <font class="comment">// Hence both of autgroup() and gpmakefsa() should be used only with extreme</font>
00101   <font class="comment">// caution.</font>
00102   <font class="comment">//</font>
00103   <font class="comment">// The automata may be recovered from the package using the</font>
00104   <font class="comment">// methods wordAcceptor(), differenceMachine() and generalMultiplier().</font>
00105   <font class="comment">// These automata may also be set, in which case any previously calculated</font>
00106   <font class="comment">// by the package will be overwritten using the methods setWordAcceptor(),</font>
00107   <font class="comment">// setDifferenceMachine() and setGeneralMultiplier(). Thus for instance</font>
00108   <font class="comment">// the method gpwa() may be used to compute a word acceptor from any</font>
00109   <font class="comment">// difference machine, and gpgenmult() may be used to compute the general</font>
00110   <font class="comment">// multiplier based on any difference machine and word acceptor.</font>
00111   <font class="comment">// In fact the automatic groups procedure builds in general two difference</font>
00112   <font class="comment">// machines, the first of which accepts a sublanguage of the second.</font>
00113   <font class="comment">//</font>
00114   <font class="comment">// The integer argument of the methods differenceMachine and</font>
00115   <font class="comment">// setDifferenceMachine() differentiates between those two automata. At the</font>
00116   <font class="comment">// present the second is always used by the methods gpwa() and gpgenmult() -</font>
00117   <font class="comment">// the Holt programs may be run to use the first as a space-saving device,</font>
00118   <font class="comment">// but currently this option is not available within this class.</font>
00119   <font class="comment">//</font>
00120  
00121   <font class="comment">// The Package is initialised with the list of generators and relators</font>
00122   <font class="comment">// of the groups,</font>
00123   <font class="comment">// and (optionally)</font>
00124   <font class="comment">// an integer array with specifies the order of the generators</font>
00125   <font class="comment">// and their inverses used in the shortlex ordering.</font>
00126   <font class="comment">// and an integer tidyint, which is a parameter for the KnuthBendix procedure. </font>
00127 
00128 
00129 
00130 
00131   <a class="code" href="class_KBmagPackage.html#a0">KBmagPackage</a>(<font class="keyword">const</font> <a class="code" href="class_VectorOf.html">VectorOf&lt;Chars&gt;</a>&amp; genNames, <font class="keyword">const</font> <a class="code" href="class_SetOf.html">SetOf&lt;Word&gt;</a>&amp; rels,
00132           <font class="keyword">const</font> <a class="code" href="class_WordOrder.html">WordOrder</a> &amp; word_order,<font class="keywordtype">int</font> tidyint) ; 
00133 
00134   <a class="code" href="class_KBmagPackage.html#a0">KBmagPackage</a>(<font class="keyword">const</font> <a class="code" href="class_VectorOf.html">VectorOf&lt;Chars&gt;</a>&amp; genNames, <font class="keyword">const</font> <a class="code" href="class_SetOf.html">SetOf&lt;Word&gt;</a>&amp; rels,
00135           <font class="keyword">const</font> <a class="code" href="class_WordOrder.html">WordOrder</a> &amp; word_order) ; 
00136 
00137   <a class="code" href="class_KBmagPackage.html#a0">KBmagPackage</a>(<font class="keyword">const</font> <a class="code" href="class_VectorOf.html">VectorOf&lt;Chars&gt;</a>&amp; genNames, <font class="keyword">const</font> <a class="code" href="class_SetOf.html">SetOf&lt;Word&gt;</a>&amp; rels);
00138 
00139   <a class="code" href="class_KBmagPackage.html#a3">~KBmagPackage</a>();
00140   <font class="comment">// Takes care of shutting down the programs, and unlinking temp files/pipes.</font>
<a name="l00141"></a><a class="code" href="class_KBmagPackage.html#a4">00141</a>   Bool <a class="code" href="class_KBmagPackage.html#a4">sanityCheck</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> !error; }
00142 
00143 <font class="comment">// In each of the below, YES is returned if the program completes successfully</font>
00144 <font class="comment">// having verified all checks which need to be made, and DONTKNOW is returned</font>
00145 <font class="comment">// if for some reason the program cannot complete (usually because of lack of</font>
00146 <font class="comment">// memory). NO is returned if the program completes and some checks have failed.</font>
00147 <font class="comment">// In fact a NO answer is not possible from gpgenmult, gpmakefsa, gpwa or</font>
00148 <font class="comment">// kbprog.</font>
00149   <a class="code" href="class_Trichotomy.html">Trichotomy</a> <a class="code" href="class_KBmagPackage.html#a5">autgroup</a>();
00150   <a class="code" href="class_Trichotomy.html">Trichotomy</a> <a class="code" href="class_KBmagPackage.html#a6">gpaxioms</a>();
00151   <a class="code" href="class_Trichotomy.html">Trichotomy</a> <a class="code" href="class_KBmagPackage.html#a7">gpcheckmult</a>();
00152   <a class="code" href="class_Trichotomy.html">Trichotomy</a> <a class="code" href="class_KBmagPackage.html#a8">gpgenmult</a>(Bool eqcheck=YES);
00153   <a class="code" href="class_Trichotomy.html">Trichotomy</a> <a class="code" href="class_KBmagPackage.html#a9">gpmakefsa</a>(Bool eqcheck=YES);
00154   <a class="code" href="class_Trichotomy.html">Trichotomy</a> <a class="code" href="class_KBmagPackage.html#a10">gpwa</a>();
00155   <a class="code" href="class_Trichotomy.html">Trichotomy</a> <a class="code" href="class_KBmagPackage.html#a11">kbprog</a> (<font class="keywordtype">int</font> haltingfactor=100,<font class="keywordtype">int</font> tidyint=20,<font class="keywordtype">int</font> maxeqns=200,
00156          <font class="keywordtype">int</font> maxstates=1000);
00157 
<a name="l00158"></a><a class="code" href="class_KBmagPackage.html#a12">00158</a>   <a class="code" href="class_Chars.html">Chars</a> <a class="code" href="class_KBmagPackage.html#a12">getName</a>()<font class="keyword"> const </font>{ <a class="code" href="class_Chars.html">Chars</a> s = problemName; <font class="keywordflow">return</font> s;}
00159 
<a name="l00160"></a><a class="code" href="class_KBmagPackage.html#a13">00160</a>   Bool <a class="code" href="class_KBmagPackage.html#a13">isProvedAutomatic</a>( )<font class="keyword"> const </font>{ <font class="keywordflow">return</font> provedAutomatic; }
<a name="l00161"></a><a class="code" href="class_KBmagPackage.html#a14">00161</a>   Bool <a class="code" href="class_KBmagPackage.html#a14">isProvedConfluent</a>( )<font class="keyword"> const </font>{ <font class="keywordflow">return</font> provedConfluent; }
00162 
00163 
<a name="l00164"></a><a class="code" href="class_KBmagPackage.html#a15">00164</a>   <a class="code" href="class_Chars.html">Chars</a> <a class="code" href="class_KBmagPackage.html#a15">getGeneratorName</a>(<a class="code" href="class_Generator.html">Generator</a> g)<font class="keyword"> const </font>{
00165      <font class="keywordtype">int</font> i = ord(g);
00166      <font class="keywordflow">if</font> (i&gt;0) <font class="keywordflow">return</font> generatorNames[i-1];
00167      <font class="keywordflow">else</font> <font class="keywordflow">return</font>(generatorNames[-i-1]+<font class="stringliteral">"^-1"</font>);
00168   }
00169 
00170   GroupDFSA <a class="code" href="class_KBmagPackage.html#a16">wordAcceptor</a>();
00171   <a class="code" href="class_GenMult.html">GenMult</a> <a class="code" href="class_KBmagPackage.html#a17">generalMultiplier</a>();
00172   <a class="code" href="class_DiffMachine.html">DiffMachine</a> <a class="code" href="class_KBmagPackage.html#a18">differenceMachine</a>(<font class="keywordtype">int</font> i);
00173 
00174   <font class="keywordtype">void</font> <a class="code" href="class_KBmagPackage.html#a19">setWordAcceptor</a>(<font class="keyword">const</font> GroupDFSA &amp; WA);
00175   <font class="keywordtype">void</font> <a class="code" href="class_KBmagPackage.html#a20">setGeneralMultiplier</a>(<font class="keyword">const</font> <a class="code" href="class_GenMult.html">GenMult</a> &amp; GM);
00176   <font class="keywordtype">void</font> <a class="code" href="class_KBmagPackage.html#a21">setDifferenceMachine</a>(<font class="keyword">const</font> <a class="code" href="class_DiffMachine.html">DiffMachine</a> &amp; Diff,<font class="keywordtype">int</font> i);
00177 
00178 <font class="comment">// and now versions of the above which use DFSARep's rather than DFSA's</font>
00179 <font class="comment">// Maybe these should be private.</font>
00180 <font class="comment">// They are necessary for use in code which needs to do serious manipulation</font>
00181 <font class="comment">// with the automata, e.g. hyperbolicity testing.</font>
00182 
00183   <a class="code" href="class_GroupDFSARep.html">GroupDFSARep</a> <a class="code" href="class_KBmagPackage.html#a22">wordAcceptorRep</a>();
00184   <a class="code" href="class_GenMultRep.html">GenMultRep</a> <a class="code" href="class_KBmagPackage.html#a23">generalMultiplierRep</a>();
00185   <a class="code" href="class_DiffMachineRep.html">DiffMachineRep</a> <a class="code" href="class_KBmagPackage.html#a24">differenceMachineRep</a>(<font class="keywordtype">int</font> i);
00186 
00187   <font class="keywordtype">void</font> <a class="code" href="class_KBmagPackage.html#a19">setWordAcceptor</a>(<font class="keyword">const</font> <a class="code" href="class_GroupDFSARep.html">GroupDFSARep</a> &amp; WARep);
00188   <font class="keywordtype">void</font> <a class="code" href="class_KBmagPackage.html#a20">setGeneralMultiplier</a>(<font class="keyword">const</font> <a class="code" href="class_GenMultRep.html">GenMultRep</a> &amp; GMRep);
00189   <font class="keywordtype">void</font> <a class="code" href="class_KBmagPackage.html#a21">setDifferenceMachine</a>(<font class="keyword">const</font> <a class="code" href="class_DiffMachineRep.html">DiffMachineRep</a> &amp; DiffRep,<font class="keywordtype">int</font> i);
00190   Bool <a class="code" href="class_KBmagPackage.html#a28">minimize</a>(DFSA &amp; D);
00191   Bool <a class="code" href="class_KBmagPackage.html#a28">minimize</a>(GroupDFSA &amp; D);
00192   Bool <a class="code" href="class_KBmagPackage.html#a28">minimize</a>(DFSARep &amp; D);
00193   Bool <a class="code" href="class_KBmagPackage.html#a28">minimize</a>(<a class="code" href="class_GroupDFSARep.html">GroupDFSARep</a> &amp; D);
00194   Bool <a class="code" href="class_KBmagPackage.html#a32">gpcomp</a>(GroupDFSA &amp; D1,GroupDFSA &amp; D2,GroupDFSA &amp; D3);
00195   Bool <a class="code" href="class_KBmagPackage.html#a32">gpcomp</a>(<a class="code" href="class_GroupDFSARep.html">GroupDFSARep</a> &amp; D1,<a class="code" href="class_GroupDFSARep.html">GroupDFSARep</a> &amp; D2,<a class="code" href="class_GroupDFSARep.html">GroupDFSARep</a> &amp; D3);
00196 
00197 <font class="keyword">private</font>:
00198 
<a name="l00199"></a><a class="code" href="class_KBmagPackage.html#o0">00199</a>   <font class="keywordtype">int</font> numOfSymbols;
<a name="l00200"></a><a class="code" href="class_KBmagPackage.html#o1">00200</a>   <font class="keywordtype">int</font> tidyInterval;
00201 
<a name="l00202"></a><a class="code" href="class_KBmagPackage.html#o2">00202</a>   <a class="code" href="class_Chars.html">Chars</a> problemName;     <font class="comment">// Problem name supplied to KBmagPackage</font>
00203 
<a name="l00204"></a><a class="code" href="class_KBmagPackage.html#o3">00204</a>   <a class="code" href="class_VectorOf.html">VectorOf&lt;Chars&gt;</a> generatorNames;
<a name="l00205"></a><a class="code" href="class_KBmagPackage.html#o4">00205</a>   <a class="code" href="class_SetOf.html">SetOf&lt;Word&gt;</a> relators;
<a name="l00206"></a><a class="code" href="class_KBmagPackage.html#o5">00206</a>   <a class="code" href="class_WordOrder.html">WordOrder</a> order;
00207   
<a name="l00208"></a><a class="code" href="class_KBmagPackage.html#o6">00208</a>   Bool error;
<a name="l00209"></a><a class="code" href="class_KBmagPackage.html#o7">00209</a>   Bool provedAutomatic;
<a name="l00210"></a><a class="code" href="class_KBmagPackage.html#o8">00210</a>   Bool provedConfluent;
00211 
<a name="l00212"></a><a class="code" href="class_KBmagPackage.html#o9">00212</a>   <a class="code" href="class_Chars.html">Chars</a> cdbin;  <font class="comment">//@rn Should be const, but then trouble initing.</font>
00213 
00214 
00215   <font class="comment">// Methods:</font>
00216 
00217   Bool <a class="code" href="class_KBmagPackage.html#c0">findInputFile</a>(<font class="keyword">const</font> <a class="code" href="class_Chars.html">Chars</a> &amp; fname);
00218   <font class="keywordtype">void</font> <a class="code" href="class_KBmagPackage.html#c1">createRWSFile</a>();
00219   <a class="code" href="class_Word.html">Word</a> <a class="code" href="class_KBmagPackage.html#c2">readWord</a>(istream&amp; istr);
00220   <font class="keywordtype">void</font> <a class="code" href="class_KBmagPackage.html#c3">printWord</a>(ostream&amp; str,<font class="keyword">const</font> <a class="code" href="class_Word.html">Word</a>&amp; w);
00221 <font class="comment">/*</font>
00222 <font class="comment">  void restartProcess();</font>
00223 <font class="comment">  void haltProcess();</font>
00224 <font class="comment">*/</font>
00225 };
00226 
00227 <font class="preprocessor">#endif  </font>
</font></pre></div><hr><address><small>Generated at Tue Jun 19 09:49:36 2001 for Magnus Classes by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.6 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2001</small></address>
</body>
</html>
