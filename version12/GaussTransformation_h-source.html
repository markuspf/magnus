<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta name="robots" content="noindex">
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>/magnus/back_end/Matrix/include/GaussTransformation.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.6 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>/magnus/back_end/Matrix/include/GaussTransformation.h</h1><a href="GaussTransformation_h.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <font class="comment">/*</font>
00002 <font class="comment"> *   $Id: GaussTransformation.h,v 1.8 2000/02/09 22:36:53 bormotov Exp $</font>
00003 <font class="comment"> */</font>
00004 
00005 <font class="comment">// Copyright (C) 1994 The New York Group Theory Cooperative</font>
00006 <font class="comment">// See magnus/doc/COPYRIGHT for the full notice.</font>
00007 
00008 <font class="comment">// Contents: Definition of the GaussTransformation class.</font>
00009 <font class="comment">//</font>
00010 <font class="comment">// Principal Authors: Dmitry Bormotov, Aleksey Myasnikov</font>
00011 <font class="comment">//</font>
00012 <font class="comment">// Status: Useable</font>
00013 <font class="comment">//</font>
00014 <font class="comment">// Revision History:</font>
00015 <font class="comment">//</font>
00016 
00017 
00018 <font class="preprocessor">#ifndef _GAUSS_TRANSFORMATION_H_</font>
00019 <font class="preprocessor"></font><font class="preprocessor">#define _GAUSS_TRANSFORMATION_H_</font>
00020 <font class="preprocessor"></font>
00021 <font class="preprocessor">#include "Integer.h"</font>
00022 <font class="preprocessor">#include "Rational.h"</font>
00023 <font class="preprocessor">#include "<a class="code" href="Matrix_h.html">Matrix.h</a>"</font>
00024 
00025 <font class="comment">// --------------------------------------------------------------------------//</font>
00026 <font class="comment">// ------------------------- GaussTransformation ----------------------------//</font>
00027 <font class="comment">// --------------------------------------------------------------------------//</font>
00028 
00029 
00030 
<a name="l00031"></a><a class="code" href="class_GaussTransformation.html">00031</a> template &lt;class T&gt; <font class="keyword">class </font><a class="code" href="class_GaussTransformation.html">GaussTransformation</a> {
00032 
00033 
00034 <font class="keyword">public</font>:
00035 
00036 <font class="comment"></font>
00037 <font class="comment">  /////////////////////////////////////////////////////////////////////////</font>
00038 <font class="comment"></font>  <font class="comment">//                                                                     //</font>
00039   <font class="comment">// Constructors:                                                       //</font>
00040   <font class="comment">//                                                                     //</font><font class="comment"></font>
00041 <font class="comment">  /////////////////////////////////////////////////////////////////////////</font>
00042 <font class="comment"></font>  // If buildTransMatrix or buildInvTransMatrix = true the transformation matrix would be built
<a name="l00043"></a><a class="code" href="class_GaussTransformation.html#a0">00043</a>   <a class="code" href="class_GaussTransformation.html#a0">GaussTransformation</a>(<font class="keyword">const</font> <a class="code" href="class_Matrix.html">Matrix&lt;T&gt;</a>&amp; M, <font class="keywordtype">bool</font> buildTransMatrix = <font class="keyword">false</font>, <font class="keywordtype">bool</font> buildInvTransMatrix = <font class="keyword">false</font>) : 
00044     matrix( M ), 
00045     bDone( false ), bStart( false ),transformed(false), 
00046     isSingularMatrix( dontknow ), isInvertibleMatrix( dontknow ),
00047     transMatrix(NULL),invTransMatrix(NULL),buildTransformations(buildTransMatrix),
00048     buildInverseTransformations(buildInvTransMatrix) 
00049   { }
00050 
00051   <font class="comment">// Copy constructor and operator = are disabled.</font>
00052   <a class="code" href="class_GaussTransformation.html#a0">GaussTransformation</a>(<font class="keyword">const</font> <a class="code" href="class_GaussTransformation.html">GaussTransformation</a>&amp;);
00053   <a class="code" href="class_GaussTransformation.html">GaussTransformation</a> <a class="code" href="class_GaussTransformation.html#a2">operator = </a>( <font class="keyword">const</font> <a class="code" href="class_GaussTransformation.html">GaussTransformation</a>&amp; );
00054 
<a name="l00055"></a><a class="code" href="class_GaussTransformation.html#a3">00055</a>   <a class="code" href="class_GaussTransformation.html#a3">~GaussTransformation</a>()<font class="keyword"> </font>{
00056     <font class="keywordflow">if</font> (transMatrix)  <font class="keyword">delete</font> transMatrix;
00057   }
00058    <font class="comment"></font>
00059 <font class="comment">  /////////////////////////////////////////////////////////////////////////</font>
00060 <font class="comment"></font>  <font class="comment">//                                                                     //</font>
00061   <font class="comment">// Activation members:                                                 //</font>
00062   <font class="comment">//                                                                     //</font><font class="comment"></font>
00063 <font class="comment">  /////////////////////////////////////////////////////////////////////////</font>
00064 <font class="comment"></font>
00065   <font class="comment">// This was left, because sometimes Gauss runing with breaks or restarting,</font>
00066   <font class="comment">// so it's needed to reinitialize the algorithm</font>
00067   <font class="keywordtype">void</font> <a class="code" href="class_GaussTransformation.html#a4">startComputation</a>( );
00068          
00069   <font class="comment">// Runs until the end of transformation. It's long time algorithm</font>
<a name="l00070"></a><a class="code" href="class_GaussTransformation.html#a5">00070</a>   <font class="keywordtype">void</font> <a class="code" href="class_GaussTransformation.html#a5">run</a>()<font class="keyword"></font>{
00071         <a class="code" href="class_GaussTransformation.html#c0">continueComputation</a>( RUNALL);
00072   }
00073 
00074   <font class="comment">// Run for 'rowNum' rows, then suspends.</font>
00075   <font class="keywordtype">void</font> <a class="code" href="class_GaussTransformation.html#a6">runRow</a>(<font class="keywordtype">int</font> rowNum);
00076 
00077   <font class="comment">// Runs until a zero element appears on diagonal.</font>
00078   <font class="keywordtype">void</font> <a class="code" href="class_GaussTransformation.html#a7">runUntilDiagHasZero</a>();
00079 
00080   <font class="comment">// Runs while diagonal elements are 1 or -1.</font>
00081   <font class="comment">// It's a very stupid name for such procedure, but i couldn't find something better.</font>
00082   <font class="keywordtype">void</font> <a class="code" href="class_GaussTransformation.html#a8">runWhileDiagHasSingles</a>();
00083 
00084   <font class="comment">// returns the indexs of current diagonal element.</font>
<a name="l00085"></a><a class="code" href="class_GaussTransformation.html#a9">00085</a>   <font class="keywordtype">int</font> <a class="code" href="class_GaussTransformation.html#a9">getCurrentRow</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> currentRow-1;}
<a name="l00086"></a><a class="code" href="class_GaussTransformation.html#a10">00086</a>   <font class="keywordtype">int</font> <a class="code" href="class_GaussTransformation.html#a10">getCurrentCol</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> currentCol-1;}<font class="comment"></font>
00087 <font class="comment">  /////////////////////////////////////////////////////////////////////////</font>
00088 <font class="comment"></font>  <font class="comment">//                                                                     //</font>
00089   <font class="comment">// Status Queries:                                                     //</font>
00090   <font class="comment">//                                                                     //</font><font class="comment"></font>
00091 <font class="comment">  /////////////////////////////////////////////////////////////////////////</font>
00092 <font class="comment"></font>
<a name="l00093"></a><a class="code" href="class_GaussTransformation.html#a11">00093</a>   <font class="keywordtype">bool</font> <a class="code" href="class_GaussTransformation.html#a11">canChange</a>( )<font class="keyword"> const </font>{ <font class="keywordflow">return</font> !bStart; }
00094   <font class="comment">// You can change matrix only if GausTransformation is not in process.</font>
00095   <font class="comment">// Return true if you can change matrix.</font>
00096 
<a name="l00097"></a><a class="code" href="class_GaussTransformation.html#a12">00097</a>   <font class="keywordtype">bool</font> <a class="code" href="class_GaussTransformation.html#a12">done</a>( )<font class="keyword"> const </font>{ <font class="keywordflow">return</font> bDone; }
00098   <font class="comment">// True if computation was finished</font><font class="comment"></font>
00099 <font class="comment">  /////////////////////////////////////////////////////////////////////////</font>
00100 <font class="comment"></font>  //                                                                     //
00101   <font class="comment">// Accessors:                                                          //</font>
00102   <font class="comment">//                                                                     //</font><font class="comment"></font>
00103 <font class="comment">  /////////////////////////////////////////////////////////////////////////</font>
00104 <font class="comment"></font>  
<a name="l00105"></a><a class="code" href="class_GaussTransformation.html#a13">00105</a>   <a class="code" href="class_Trichotomy.html">Trichotomy</a> <a class="code" href="class_GaussTransformation.html#a13">isSingular</a>( )<font class="keyword"> const </font>
00106 <font class="keyword">  </font>{
00107     <font class="keywordflow">return</font> isSingularMatrix;
00108   }
00109 
00110   <a class="code" href="class_Trichotomy.html">Trichotomy</a> <a class="code" href="class_GaussTransformation.html#a14">isInvertible</a>( ) <font class="keyword">const</font>; 
00111   
00112   <font class="comment">// Returns transformated matrix</font>
<a name="l00113"></a><a class="code" href="class_GaussTransformation.html#a15">00113</a>   <font class="keyword">const</font> <a class="code" href="class_Matrix.html">Matrix&lt;T&gt;</a>&amp; <a class="code" href="class_GaussTransformation.html#a15">getMatrix</a>()<font class="keyword"> const</font>
00114 <font class="keyword">    </font>{
00115       <font class="keywordflow">return</font> matrix;
00116     }
00117   <font class="comment">// Returns transformation matrix</font>
<a name="l00118"></a><a class="code" href="class_GaussTransformation.html#a16">00118</a>   <font class="keyword">const</font> <a class="code" href="class_Matrix.html">Matrix&lt;T&gt;</a>&amp; <a class="code" href="class_GaussTransformation.html#a16">getTrMatrix</a>()<font class="keyword">const</font>
00119     {
00120 <font class="preprocessor">   #if SAFETY &gt; 0</font>
00121 <font class="preprocessor"></font>    <font class="keywordflow">if</font> (!transMatrix )
00122       <a class="code" href="error_h.html#a0">error</a>(<font class="stringliteral">"void GaussTransformation::getTrMatrix( ) : object was not built."</font>);
00123 <font class="preprocessor">   #endif</font>
00124 <font class="preprocessor"></font>      <font class="keywordflow">return</font> *transMatrix;
00125     }
00126   <font class="comment">// Returns inverse transformation matrix</font>
<a name="l00127"></a><a class="code" href="class_GaussTransformation.html#a17">00127</a>   <font class="keyword">const</font> <a class="code" href="class_Matrix.html">Matrix&lt;T&gt;</a>&amp; <a class="code" href="class_GaussTransformation.html#a17">getInvTrMatrix</a>()<font class="keyword">const</font>
00128     {
00129 <font class="preprocessor">   #if SAFETY &gt; 0</font>
00130 <font class="preprocessor"></font>    <font class="keywordflow">if</font> (!invTransMatrix )
00131       <a class="code" href="error_h.html#a0">error</a>(<font class="stringliteral">"void GaussTransformation::getInvTrMatrix( ) : object was not built."</font>);
00132 <font class="preprocessor">   #endif</font>
00133 <font class="preprocessor"></font>      <font class="keywordflow">return</font> *invTransMatrix;
00134     }
00135   
00136   <font class="comment">// Returns reference on transformated matrix</font>
<a name="l00137"></a><a class="code" href="class_GaussTransformation.html#a18">00137</a>   <a class="code" href="class_Matrix.html">Matrix&lt;T&gt;</a>&amp; <a class="code" href="class_GaussTransformation.html#a18">refMatrix</a>()<font class="keyword"></font>
00138 <font class="keyword">    </font>{
00139 <font class="preprocessor">   #if SAFETY &gt; 0</font>
00140 <font class="preprocessor"></font>    <font class="keywordflow">if</font> (!<a class="code" href="class_GaussTransformation.html#a11">canChange</a>() )
00141       <a class="code" href="error_h.html#a0">error</a>(<font class="stringliteral">"void GaussTransformation::refMatrix( ) : transformations are in process."</font>);
00142 <font class="preprocessor">   #endif</font>
00143 <font class="preprocessor"></font>      <font class="keywordflow">return</font> matrix;
00144     }
<a name="l00145"></a><a class="code" href="class_GaussTransformation.html#a19">00145</a>     <font class="keywordtype">bool</font> <a class="code" href="class_GaussTransformation.html#a19">isTransformed</a>()<font class="keyword"> const</font>{
00146       <font class="keywordflow">return</font> transformed;
00147     }
00148 
00149 <font class="keyword">private</font>:
00150 <font class="comment"></font>
00151 <font class="comment">  /////////////////////////////////////////////////////////////////////////</font>
00152 <font class="comment"></font>  <font class="comment">//                                                                     //</font>
00153   <font class="comment">// Data Members:                                                       //</font>
00154   <font class="comment">//                                                                     //</font><font class="comment"></font>
00155 <font class="comment">  /////////////////////////////////////////////////////////////////////////</font>
00156 <font class="comment"></font>
<a name="l00157"></a><a class="code" href="class_GaussTransformation.html#o0">00157</a>   <font class="keywordtype">bool</font> bDone; 
<a name="l00158"></a><a class="code" href="class_GaussTransformation.html#o1">00158</a>   <font class="keywordtype">bool</font> bStart;
<a name="l00159"></a><a class="code" href="class_GaussTransformation.html#o2">00159</a>   <font class="keywordtype">bool</font> transformed;
<a name="l00160"></a><a class="code" href="class_GaussTransformation.html#o3">00160</a>   <a class="code" href="class_Trichotomy.html">Trichotomy</a> isSingularMatrix;
<a name="l00161"></a><a class="code" href="class_GaussTransformation.html#o4">00161</a>   <a class="code" href="class_Trichotomy.html">Trichotomy</a> isInvertibleMatrix;
00162 
<a name="l00163"></a><a class="code" href="class_GaussTransformation.html#o5">00163</a>   <a class="code" href="class_Matrix.html">Matrix&lt;T&gt;</a> matrix;  <font class="comment">// Main  matrix</font>
<a name="l00164"></a><a class="code" href="class_GaussTransformation.html#o6">00164</a>   <a class="code" href="class_Matrix.html">Matrix&lt;T&gt;</a>* transMatrix; <font class="comment">// Transformation matrix</font>
<a name="l00165"></a><a class="code" href="class_GaussTransformation.html#o7">00165</a>   <a class="code" href="class_Matrix.html">Matrix&lt;T&gt;</a>* invTransMatrix; <font class="comment">// Inverse transformation matrix</font>
<a name="l00166"></a><a class="code" href="class_GaussTransformation.html#o8">00166</a>   <font class="keywordtype">int</font> untilRow;  <font class="comment">// Number of rows to run gaus transformation for</font>
<a name="l00167"></a><a class="code" href="class_GaussTransformation.html#o9">00167</a>   <font class="keywordtype">int</font> currentRow; <font class="comment">// Current row of transformation</font>
<a name="l00168"></a><a class="code" href="class_GaussTransformation.html#o10">00168</a>   <font class="keywordtype">int</font> currentCol; <font class="comment">// Current column of transformation</font>
<a name="l00169"></a><a class="code" href="class_GaussTransformation.html#o11">00169</a>   <font class="keywordtype">bool</font> buildTransformations; <font class="comment">// True if transformation matrix is building</font>
<a name="l00170"></a><a class="code" href="class_GaussTransformation.html#o12">00170</a>   <font class="keywordtype">bool</font> buildInverseTransformations; <font class="comment">// True if inverse transformation matrix is building</font>
00171 
00172   <font class="comment">// Constants for types of running a computations.</font>
<a name="l00173"></a><a class="code" href="class_GaussTransformation.html#r0">00173</a>   <font class="keyword">static</font> <font class="keyword">const</font> <font class="keywordtype">int</font>  UNTILNOT_0 = 0;
<a name="l00174"></a><a class="code" href="class_GaussTransformation.html#r1">00174</a>   <font class="keyword">static</font> <font class="keyword">const</font> <font class="keywordtype">int</font>  UNTIL_1 = 1;
<a name="l00175"></a><a class="code" href="class_GaussTransformation.html#r2">00175</a>   <font class="keyword">static</font> <font class="keyword">const</font> <font class="keywordtype">int</font>  RUNROW = 2;
<a name="l00176"></a><a class="code" href="class_GaussTransformation.html#r3">00176</a>   <font class="keyword">static</font> <font class="keyword">const</font> <font class="keywordtype">int</font>  RUNALL = 3;<font class="comment"></font>
00177 <font class="comment">  /////////////////////////////////////////////////////////////////////////</font>
00178 <font class="comment"></font>  <font class="comment">//                                                                     //</font>
00179   <font class="comment">// Inner methods:                                                      //</font>
00180   <font class="comment">//                                                                     //</font><font class="comment"></font>
00181 <font class="comment">  /////////////////////////////////////////////////////////////////////////</font>
00182 <font class="comment"></font>  void continueComputation( int whatDeal);
00183 
<a name="l00184"></a><a class="code" href="class_GaussTransformation.html#c1">00184</a>   <font class="keywordtype">void</font> <a class="code" href="class_GaussTransformation.html#c1">finishComputation</a>( <a class="code" href="class_Trichotomy.html">Trichotomy</a> isSingular, <a class="code" href="class_Trichotomy.html">Trichotomy</a> isInvertible )<font class="keyword"></font>
00185 <font class="keyword">  </font>{
00186     <font class="keywordflow">if</font> (isSingularMatrix != yes)
00187         isSingularMatrix = isSingular;
00188     <font class="keywordflow">if</font> (isInvertibleMatrix != no)
00189         isInvertibleMatrix = isInvertible;
00190     <font class="keywordflow">if</font> (matrix.height()!=matrix.width())
00191         isSingularMatrix = no;
00192     bDone = <font class="keyword">true</font>;
00193     bStart = <font class="keyword">false</font>;
00194   }
00195 
00196   <font class="keywordtype">void</font> <a class="code" href="class_GaussTransformation.html#c2">addRow</a>( <font class="keywordtype">int</font> firstRow, <font class="keywordtype">int</font> secondRow, T koef);
00197   <font class="comment">// Adds elements of secondRow * koef to elements of firstRow</font>
00198 
00199   <font class="keywordtype">void</font> <a class="code" href="class_GaussTransformation.html#c3">makeZero</a>( <font class="keywordtype">int</font>&amp; row1, <font class="keywordtype">int</font>&amp; row2 );
00200   <font class="comment">// Makes a zero in column</font>
00201 <font class="comment"></font>
00202 <font class="comment">  /////////////////////////////////////////////////////////////////////////</font>
00203 <font class="comment"></font>  <font class="comment">//                                                                     //</font>
00204   <font class="comment">//  Debugging stuff:                                                   //</font>
00205   <font class="comment">//                                                                     //</font><font class="comment"></font>
00206 <font class="comment">  /////////////////////////////////////////////////////////////////////////</font>
00207 <font class="comment"></font>
00208 <font class="preprocessor">#ifdef DEBUG</font>
00209 <font class="preprocessor"></font>
00210   <font class="comment">//friend int main( );</font>
00211 
00212 <font class="preprocessor">#endif</font>
00213 <font class="preprocessor"></font>
00214 };
00215 <font class="preprocessor">#endif</font>
00216 <font class="preprocessor"></font>
00217 
00218 
</pre></div><hr><address><small>Generated at Tue Jun 19 09:49:37 2001 for Magnus Classes by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.6 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2001</small></address>
</body>
</html>
