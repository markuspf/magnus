<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta name="robots" content="noindex">
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>/magnus/back_end/NilpotentGroup/include/Letter.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.6 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>/magnus/back_end/NilpotentGroup/include/Letter.h</h1><a href="Letter_h.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <font class="comment">// Copyright (C) 1994 The New York Group Theory Cooperative</font>
00002 <font class="comment">// See magnus/doc/COPYRIGHT for the full notice.</font>
00003 <font class="comment">//</font>
00004 <font class="comment">// Contents: Definition of structure Letter</font>
00005 <font class="comment">//</font>
00006 <font class="comment">// This is a helper class for Free Nilpotent Groups.</font>
00007 <font class="comment">//</font>
00008 <font class="comment">//  Letter is an element of word: a generator together with its power,</font>
00009 <font class="comment">//  i.e. an expression g^p. Generator value is always positive.</font>
00010 <font class="comment">//</font>
00011 <font class="comment">// Principal Author: Eugene Paderin</font>
00012 <font class="comment">//</font>
00013 <font class="comment">// Status: In progress</font>
00014 <font class="comment">//</font>
00015 <font class="comment">// Revision History:</font>
00016 <font class="comment">//</font>
00017 <font class="comment">// Special Notes:</font>
00018 <font class="comment">//</font>
00019 
00020 <font class="preprocessor">#ifndef _LETTER_H_</font>
00021 <font class="preprocessor"></font><font class="preprocessor">#define _LETTER_H_</font>
00022 <font class="preprocessor"></font>
00023 <font class="preprocessor">#include "<a class="code" href="Word_h.html">Word.h</a>"</font>
00024 <font class="preprocessor">#include "<a class="code" href="Generator_h.html">Generator.h</a>"</font>
00025 
<a name="l00026"></a><a class="code" href="struct_Letter.html">00026</a> <font class="keyword">struct </font><a class="code" href="struct_Letter.html">Letter</a> {
00027 
00028   <font class="comment">// constructors</font>
00029 
<a name="l00030"></a><a class="code" href="struct_Letter.html#a0">00030</a>   <a class="code" href="struct_Letter.html#a0">Letter</a>() : gen(1), power(0) {}
00031   <font class="comment">// Default constructor makes fictive letter</font>
00032 
<a name="l00033"></a><a class="code" href="struct_Letter.html#a1">00033</a>   <a class="code" href="struct_Letter.html#a0">Letter</a>(<a class="code" href="class_Generator.html">Generator</a> g, <font class="keywordtype">int</font> pow = 1)<font class="keyword"> </font>{
00034     <font class="keywordflow">if</font>( ord(g) &gt; 0 ) {
00035       gen = g; 
00036       power = pow; 
00037     }
00038     <font class="keywordflow">else</font> { 
00039       gen = <a class="code" href="Letter_h.html#a1">inv</a>(g); 
00040       power = -pow; 
00041     }
00042   }
00043 
<a name="l00044"></a><a class="code" href="struct_Letter.html#a2">00044</a>   <a class="code" href="struct_Letter.html#a0">Letter</a>(<font class="keywordtype">int</font> g, <font class="keywordtype">int</font> pow = 1)<font class="keyword"> </font>{
00045     <font class="keywordflow">if</font>( g &gt; 0 ) { 
00046       gen = Generator(g); 
00047       power = pow; 
00048     }
00049     <font class="keywordflow">else</font> { 
00050       gen = Generator(-g); 
00051       power = -pow; 
00052     }
00053   }
00054 
00055   <font class="comment">// collects letters</font>
<a name="l00056"></a><a class="code" href="struct_Letter.html#a3">00056</a>   <font class="keywordtype">void</font> <a class="code" href="struct_Letter.html#a3">collectWith</a> (<a class="code" href="class_Generator.html">Generator</a> g)<font class="keyword"> </font>{
00057     <font class="keywordflow">if</font>( power == 0 ) {
00058       gen = <a class="code" href="global_h.html#a7">abs</a>(g);
00059       power = ::power(g);
00060     }
00061     <font class="keywordflow">else</font> <font class="keywordflow">if</font>( <a class="code" href="global_h.html#a7">abs</a>(g) == ord(gen) ) 
00062       power += ::power(g);
00063     <font class="keywordflow">else</font> <a class="code" href="error_h.html#a0">error</a>(<font class="stringliteral">"Attempt to collect two distinct letters."</font>);
00064   }
00065 
00066   <font class="comment">// conversion to Word</font>
<a name="l00067"></a><a class="code" href="struct_Letter.html#a4">00067</a>   <a class="code" href="struct_Letter.html#a4">operator Word</a>()<font class="keyword"> const </font>{
00068     <a class="code" href="class_Word.html">Word</a> w;
00069     <a class="code" href="class_Generator.html">Generator</a> g;
00070     <font class="keywordtype">int</font> r;
00071     <font class="keywordflow">if</font>(power &gt; 0) {
00072       g = gen;
00073       r = power;
00074     } <font class="keywordflow">else</font> <font class="keywordflow">if</font>(power &lt; 0) {
00075       g = <a class="code" href="Letter_h.html#a1">inv</a>(gen);
00076       r = -power;
00077     } <font class="keywordflow">else</font> {
00078       <font class="keywordflow">return</font> w;
00079     }
00080     <font class="keywordflow">for</font>( ; r &gt; 0; r--) w *= g;
00081     <font class="keywordflow">return</font> w;
00082   }
00083 
<a name="l00084"></a><a class="code" href="struct_Letter.html#a5">00084</a>   <font class="keywordtype">void</font> <a class="code" href="struct_Letter.html#a5">printOn</a>(ostream&amp; os)<font class="keyword"> const </font>{
00085     os &lt;&lt; gen;
00086     <font class="keywordflow">if</font>(power != 1) os &lt;&lt; <font class="stringliteral">"^"</font> &lt;&lt; power;
00087   }
00088 
<a name="l00089"></a><a class="code" href="struct_Letter.html#a6">00089</a>   <font class="keywordtype">void</font> <a class="code" href="struct_Letter.html#a6">invert</a>()<font class="keyword"> </font>{  power = -power; }
00090   <font class="comment">// Inverts the letter. Do not confuse with inv() global function.</font>
00091 
<a name="l00092"></a><a class="code" href="struct_Letter.html#a7">00092</a>   <font class="keywordtype">int</font> <a class="code" href="struct_Letter.html#a7">shortLexIndex</a>()<font class="keyword"> const </font>{
00093     <font class="keywordtype">int</font> g = ord(gen);
00094     <font class="keywordflow">return</font> (power &gt; 0) ? 2*(g-1) : 2*g-1;
00095   }
00096   <font class="comment">// Returns generator's ShortLex index. Does not work with power==0.</font>
00097 
00098   <font class="comment">// IPC write</font>
<a name="l00099"></a><a class="code" href="struct_Letter.html#l0">00099</a>   <font class="keyword">friend</font> ostream&amp; <a class="code" href="struct_Letter.html#l0">operator &lt; </a>(ostream&amp; os, <font class="keyword">const</font> <a class="code" href="struct_Letter.html">Letter</a>&amp; let)<font class="keyword"> </font>{
00100     os &lt; let.gen &lt; let.power;
00101   }
00102 
00103   <font class="comment">// IPC read</font>
<a name="l00104"></a><a class="code" href="struct_Letter.html#l1">00104</a>   <font class="keyword">friend</font> istream&amp; <a class="code" href="struct_Letter.html#l1">operator &gt; </a>(istream&amp; is, <a class="code" href="struct_Letter.html">Letter</a>&amp; let)<font class="keyword"> </font>{
00105     is &gt; let.gen &gt; let.power;
00106   }
00107 
00108   <font class="comment">// Data</font>
00109 
<a name="l00110"></a><a class="code" href="struct_Letter.html#m0">00110</a>   <a class="code" href="class_Generator.html">Generator</a> gen;
<a name="l00111"></a><a class="code" href="struct_Letter.html#m1">00111</a>   <font class="keywordtype">int</font> power;
00112 };
00113 
00114 <font class="comment">// Global functions</font>
00115 
<a name="l00116"></a><a class="code" href="Letter_h.html#a0">00116</a> <font class="keyword">inline</font> ostream&amp; <a class="code" href="DatabaseManager_h.html#a28">operator&lt;&lt; </a>(ostream&amp; os, <font class="keyword">const</font> <a class="code" href="struct_Letter.html">Letter</a>&amp; let)<font class="keyword"> </font>{
00117   let.<a class="code" href="struct_Letter.html#a5">printOn</a>(os);
00118   <font class="keywordflow">return</font> os;
00119 }
00120 
00121 <font class="comment">// inversion</font>
<a name="l00122"></a><a class="code" href="Letter_h.html#a1">00122</a> <font class="keyword">inline</font> <a class="code" href="struct_Letter.html">Letter</a> <a class="code" href="Letter_h.html#a1">inv</a>( <font class="keyword">const</font> <a class="code" href="struct_Letter.html">Letter</a>&amp; let)<font class="keyword"> </font>{
00123   <font class="keywordflow">return</font> Letter(let.gen, -let.power); 
00124 }
00125 
00126 <font class="comment">// comparison</font>
00127 
<a name="l00128"></a><a class="code" href="Letter_h.html#a2">00128</a> <font class="keyword">inline</font> <font class="keywordtype">bool</font> <a class="code" href="Property_h.html#a1">operator == </a>(<font class="keyword">const</font> <a class="code" href="struct_Letter.html">Letter</a>&amp; let1, <font class="keyword">const</font> <a class="code" href="struct_Letter.html">Letter</a>&amp; let2)<font class="keyword"> </font>{
00129   <font class="keywordflow">if</font>( let1.power != let2.power ) <font class="keywordflow">return</font> <font class="keyword">false</font>;
00130   <font class="keywordflow">if</font>( let1.power == 0 ) <font class="keywordflow">return</font> <font class="keyword">true</font>;
00131   <font class="keywordflow">return</font> (let1.gen == let2.gen);
00132 }
00133 
<a name="l00134"></a><a class="code" href="Letter_h.html#a3">00134</a> <font class="keyword">inline</font> <font class="keywordtype">bool</font> <a class="code" href="Property_h.html#a2">operator != </a>(<font class="keyword">const</font> <a class="code" href="struct_Letter.html">Letter</a>&amp; let1, <font class="keyword">const</font> <a class="code" href="struct_Letter.html">Letter</a>&amp; let2)<font class="keyword"> </font>{
00135   <font class="keywordflow">return</font> ! (let1 == let2);
00136 }
00137 
00138 <font class="preprocessor">#endif</font>
00139 <font class="preprocessor"></font>
00140 
</pre></div><hr><address><small>Generated at Tue Jun 19 09:49:37 2001 for Magnus Classes by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.6 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2001</small></address>
</body>
</html>
