<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta name="robots" content="noindex">
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>/magnus/back_end/Elt/include/WordData.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.6 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>/magnus/back_end/Elt/include/WordData.h</h1><a href="WordData_h.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <font class="comment">/*</font>
00002 <font class="comment"> *   $Id: WordData.h,v 1.3 1999/11/23 20:22:43 bormotov Exp $</font>
00003 <font class="comment"> */</font>
00004 
00005 <font class="comment">// Copyright (C) 1994 The New York Group Theory Cooperative</font>
00006 <font class="comment">// See magnus/doc/COPYRIGHT for the full notice.</font>
00007 
00008 <font class="comment">// Contents: Definition of expanded format WordData class.</font>
00009 <font class="comment">//</font>
00010 <font class="comment">// Principal Author: Stephane Collart</font>
00011 <font class="comment">//</font>
00012 <font class="comment">// Status: Useable.</font>
00013 <font class="comment">//</font>
00014 <font class="comment">// Revision History:</font>
00015 <font class="comment">//</font>
00016 
00017 <font class="preprocessor">#ifndef _WORD_DATA_H_</font>
00018 <font class="preprocessor"></font><font class="preprocessor">#define _WORD_DATA_H_</font>
00019 <font class="preprocessor"></font>
00020 <font class="preprocessor">#include "<a class="code" href="global_h.html">global.h</a>"</font>
00021 <font class="preprocessor">#include "<a class="code" href="Generator_h.html">Generator.h</a>"</font>
00022 <font class="preprocessor">#include "<a class="code" href="List_h.html">List.h</a>"</font>
00023 <font class="preprocessor">#include "<a class="code" href="Vector_h.html">Vector.h</a>"</font>
00024 
00025 
<a name="l00026"></a><a class="code" href="class_WordData.html">00026</a> <font class="keyword">class </font><a class="code" href="class_WordData.html">WordData</a> {
00027 
00028 <font class="keyword">public</font>:
00029   
00030   <font class="comment">// provide type parameter access to users</font>
<a name="l00031"></a><a class="code" href="class_WordData.html#s0">00031</a>   <font class="keyword">typedef</font> <font class="keywordtype">int</font> <a class="code" href="class_WordData.html">GeneratorType</a>;
<a name="l00032"></a><a class="code" href="class_WordData.html#s1">00032</a>   <font class="keyword">typedef</font> <a class="code" href="class_WordData.html">GeneratorType</a>* <a class="code" href="class_WordData.html">GeneratorPtrType</a>; <font class="comment">// for pseudo-ptr would be a class</font>
<a name="l00033"></a><a class="code" href="class_WordData.html#s2">00033</a>   <font class="keyword">typedef</font> <font class="keyword">const</font> <a class="code" href="class_WordData.html">GeneratorType</a>* <a class="code" href="class_WordData.html">cGeneratorPtrType</a>;
00034   
00035   <font class="comment">// copy constructor does deep copy</font>
<a name="l00036"></a><a class="code" href="class_WordData.html#a0">00036</a>   <a class="code" href="class_WordData.html#a0">WordData</a>( <font class="keyword">const</font> <a class="code" href="class_WordData.html">WordData</a>&amp; wd ) :
00037   len(wd.len), wrd(new <a class="code" href="class_WordData.html">GeneratorType</a>[wd.len]) {
00038          <font class="keywordflow">for</font> (<font class="keywordtype">int</font> i = 0; i &lt; len; i++) <a class="code" href="class_WordData.html#a9">ref</a>(i) = wd.val(i);
00039   }
00040   
00041   <font class="comment">// destructor deletes data</font>
<a name="l00042"></a><a class="code" href="class_WordData.html#a1">00042</a>   <a class="code" href="class_WordData.html#a1">~WordData</a>( )<font class="keyword"> </font>{ <font class="keyword">delete</font>[] wrd; }
00043   
00044   <font class="comment">// data specific constructor(s)</font>
00045 
<a name="l00046"></a><a class="code" href="class_WordData.html#a2">00046</a>   <a class="code" href="class_WordData.html#a0">WordData</a>( <font class="keywordtype">int</font> le )<font class="keyword"> </font>{
00047 <font class="preprocessor">         #if SAFETY &gt; 0</font>
00048 <font class="preprocessor"></font>           <font class="keywordflow">if</font> ( le &gt; MAXLENGTH )
00049                   <a class="code" href="error_h.html#a0">error</a>(<font class="stringliteral">"Tried to init a Word which is too long"</font>);
00050 <font class="preprocessor">    #endif</font>
00051 <font class="preprocessor"></font>         len = le;
00052          wrd = <font class="keyword">new</font> <a class="code" href="class_WordData.html">GeneratorType</a>[le];
00053   }
00054 
<a name="l00055"></a><a class="code" href="class_WordData.html#a3">00055</a>   <a class="code" href="class_WordData.html#a0">WordData</a>( <font class="keyword">const</font> <a class="code" href="class_Generator.html">Generator</a>&amp; x ) : len(1), wrd(new <a class="code" href="class_WordData.html">GeneratorType</a>[1]) {
00056 <font class="preprocessor">         #if SAFETY &gt; 0</font>
00057 <font class="preprocessor"></font>      <font class="keywordflow">if</font> ( ord(x) == 0 ) <a class="code" href="error_h.html#a0">error</a>(<font class="stringliteral">"Tried to init Word with Generator of ord 0"</font>);
00058 <font class="preprocessor">    #endif</font>
00059 <font class="preprocessor"></font>         *wrd = ord(x);
00060   }
00061 
<a name="l00062"></a><a class="code" href="class_WordData.html#a4">00062</a>   <a class="code" href="class_WordData.html#a0">WordData</a>( <font class="keyword">const</font> <a class="code" href="class_Generator.html">Generator</a>&amp; x, <font class="keyword">const</font> <a class="code" href="class_Generator.html">Generator</a>&amp; y ) :
00063     len(2), wrd(new <a class="code" href="class_WordData.html">GeneratorType</a>[2]) {
00064 <font class="preprocessor">         #if SAFETY &gt; 0</font>
00065 <font class="preprocessor"></font>      <font class="keywordflow">if</font> ( ord(x) == 0 || ord(y) == 0 )
00066                   <a class="code" href="error_h.html#a0">error</a>(<font class="stringliteral">"Tried to init Word with Generator of ord 0"</font>);
00067 <font class="preprocessor">    #endif</font>
00068 <font class="preprocessor"></font>         wrd[0] = ord(x);
00069          wrd[1] = ord(y);
00070   }
00071 
<a name="l00072"></a><a class="code" href="class_WordData.html#a5">00072</a>   <a class="code" href="class_WordData.html#a0">WordData</a>( <font class="keyword">const</font> <a class="code" href="class_VectorOf.html">VectorOf&lt;Generator&gt;</a>&amp; v )<font class="keyword"> </font>{
00073 <font class="preprocessor">         #if SAFETY &gt; 0</font>
00074 <font class="preprocessor"></font>           <font class="keywordflow">if</font> ( v.<a class="code" href="class_VectorOf.html#a11">length</a>() &gt; MAXLENGTH )
00075                   <a class="code" href="error_h.html#a0">error</a>(<font class="stringliteral">"Tried to init a Word which is too long"</font>);
00076 <font class="preprocessor">    #endif</font>
00077 <font class="preprocessor"></font>         len = v.<a class="code" href="class_VectorOf.html#a11">length</a>();
00078          wrd = <font class="keyword">new</font> <a class="code" href="class_WordData.html">GeneratorType</a>[len];
00079 <font class="preprocessor">         #if SAFETY &gt; 0</font>
00080 <font class="preprocessor"></font>      <font class="keywordflow">for</font> (<font class="keywordtype">int</font> i = 0; i &lt; len; i++)
00081         <font class="keywordflow">if</font> ( (wrd[i] = ord(v[i])) == 0 )
00082           <a class="code" href="error_h.html#a0">error</a>(<font class="stringliteral">"Tried to init Word with Generator of ord 0"</font>);
00083 <font class="preprocessor">    #else</font>
00084 <font class="preprocessor"></font>           <font class="keywordflow">for</font> (<font class="keywordtype">int</font> i = 0; i &lt; len; i++) wrd[i] = ord(v[i]);
00085 <font class="preprocessor">    #endif</font>
00086 <font class="preprocessor"></font>  }
00087 
<a name="l00088"></a><a class="code" href="class_WordData.html#a6">00088</a>   <a class="code" href="class_WordData.html#a0">WordData</a>( <font class="keyword">const</font> <a class="code" href="class_ListOf.html">ListOf&lt;Generator&gt;</a>&amp; l )<font class="keyword"> </font>{
00089 <font class="preprocessor">         #if SAFETY &gt; 0</font>
00090 <font class="preprocessor"></font>           <font class="keywordflow">if</font> ( l.<a class="code" href="class_ListOf.html#a7">length</a>() &gt; MAXLENGTH )
00091                   <a class="code" href="error_h.html#a0">error</a>(<font class="stringliteral">"Tried to init a Word which is too long"</font>);
00092 <font class="preprocessor">    #endif</font>
00093 <font class="preprocessor"></font>         len = l.<a class="code" href="class_ListOf.html#a7">length</a>();
00094          wrd = <font class="keyword">new</font> <a class="code" href="class_WordData.html">GeneratorType</a>[len];
00095     <a class="code" href="class_ListIterator.html">ListIterator&lt; ListOf&lt;Generator&gt;</a> &gt; it(l);
00096 <font class="preprocessor">         #if SAFETY &gt; 0</font>
00097 <font class="preprocessor"></font>      <font class="keywordflow">for</font> (<font class="keywordtype">int</font> i = 0; i &lt; len; i++) {
00098         <font class="keywordflow">if</font> ( (wrd[i] = ord(it.<a class="code" href="class_ListIterator.html#a2">value</a>())) == 0 )
00099           <a class="code" href="error_h.html#a0">error</a>(<font class="stringliteral">"Tried to init Word with Generator of ord 0"</font>);
00100                   it.<a class="code" href="class_ListIterator.html#a3">next</a>();
00101       }
00102 <font class="preprocessor">    #else</font>
00103 <font class="preprocessor"></font>           <font class="keywordflow">for</font> (<font class="keywordtype">int</font> i = 0; i &lt; len; i++) {
00104         wrd[i] = ord(it.<a class="code" href="class_ListIterator.html#a2">value</a>());
00105         it.<a class="code" href="class_ListIterator.html#a3">next</a>();
00106       }
00107 <font class="preprocessor">    #endif</font>
00108 <font class="preprocessor"></font>  }
00109 
<a name="l00110"></a><a class="code" href="class_WordData.html#a7">00110</a>   <a class="code" href="class_WordData.html#a0">WordData</a>( <font class="keyword">const</font> <a class="code" href="class_WordData.html">GeneratorType</a> *p, <font class="keywordtype">int</font> le )<font class="keyword"> </font>{
00111 <font class="preprocessor">         #if SAFETY &gt; 0</font>
00112 <font class="preprocessor"></font>           <font class="keywordflow">if</font> ( le &gt; MAXLENGTH )
00113                   <a class="code" href="error_h.html#a0">error</a>(<font class="stringliteral">"Tried to init a Word which is too long"</font>);
00114 <font class="preprocessor">    #endif</font>
00115 <font class="preprocessor"></font>         len = le;
00116          wrd = <font class="keyword">new</font> <a class="code" href="class_WordData.html">GeneratorType</a>[le];
00117 <font class="preprocessor">         #if SAFETY &gt; 0</font>
00118 <font class="preprocessor"></font>      <font class="keywordflow">for</font> (<font class="keywordtype">int</font> i = 0; i &lt; le; i++)
00119         <font class="keywordflow">if</font> ( (wrd[i] = *p++) == 0 )
00120           <a class="code" href="error_h.html#a0">error</a>(<font class="stringliteral">"Tried to init Word with Generator of ord 0"</font>);
00121 <font class="preprocessor">    #else</font>
00122 <font class="preprocessor"></font>           <font class="keywordflow">for</font> (<font class="keywordtype">int</font> i = 0; i &lt; le; i++) wrd[i] = *p++;
00123 <font class="preprocessor">    #endif</font>
00124 <font class="preprocessor"></font>  }
00125 
00126   
00127   <font class="comment">// handles:</font>
00128   
<a name="l00129"></a><a class="code" href="class_WordData.html#a8">00129</a>   <font class="keywordtype">int</font> <a class="code" href="class_WordData.html#a8">length</a>( )<font class="keyword"> const </font>{ <font class="keywordflow">return</font> len; }
00130   
00131   <font class="comment">// for reference access</font>
<a name="l00132"></a><a class="code" href="class_WordData.html#a9">00132</a>   <a class="code" href="class_WordData.html">GeneratorType</a>&amp; <a class="code" href="class_WordData.html#a9">ref</a>(<font class="keywordtype">int</font> i)<font class="keyword"> </font>{
00133 <font class="preprocessor">    #if ( SAFETY &gt; 0 )</font>
00134 <font class="preprocessor"></font>           <font class="keywordflow">if</font> ( i &lt; 0 || i &gt;= len ) <a class="code" href="error_h.html#a0">error</a>(<font class="stringliteral">"Word index out of bounds "</font>
00135                         <font class="stringliteral">"in GeneratorType&amp; WordData::ref(int)"</font>);
00136 <font class="preprocessor">         #endif</font>
00137 <font class="preprocessor"></font>         <font class="keywordflow">return</font> wrd[i];
00138   }
00139   
00140   <font class="comment">// for value access</font>
<a name="l00141"></a><a class="code" href="class_WordData.html#a10">00141</a>   <a class="code" href="class_WordData.html">GeneratorType</a> <a class="code" href="class_WordData.html#a10">val</a>(<font class="keywordtype">int</font> i)<font class="keyword"> const </font>{
00142 <font class="preprocessor">    #if ( SAFETY &gt; 0 )</font>
00143 <font class="preprocessor"></font>           <font class="keywordflow">if</font> ( i &lt; 0 || i &gt;= len ) <a class="code" href="error_h.html#a0">error</a>(<font class="stringliteral">"Word index out of bounds "</font>
00144                         <font class="stringliteral">"in GeneratorType WordData::val(int)"</font>);
00145 <font class="preprocessor">         #endif</font>
00146 <font class="preprocessor"></font>         <font class="keywordflow">return</font> wrd[i];
00147   }
00148   
00149   <font class="comment">// for pointer and pseudo pointer manipulation</font>
<a name="l00150"></a><a class="code" href="class_WordData.html#a11">00150</a>   <a class="code" href="class_WordData.html">GeneratorPtrType</a> <a class="code" href="class_WordData.html#a11">first</a>( )<font class="keyword"> </font>{ <font class="keywordflow">return</font> wrd; }
<a name="l00151"></a><a class="code" href="class_WordData.html#a12">00151</a>   <a class="code" href="class_WordData.html">cGeneratorPtrType</a> <a class="code" href="class_WordData.html#a12">cFirst</a>( )<font class="keyword"> const </font>{ <font class="keywordflow">return</font> wrd; }
<a name="l00152"></a><a class="code" href="class_WordData.html#a13">00152</a>   <a class="code" href="class_WordData.html">GeneratorPtrType</a> <a class="code" href="class_WordData.html#a13">last</a>( )<font class="keyword"> </font>{ <font class="keywordflow">return</font> wrd + len - 1; }
<a name="l00153"></a><a class="code" href="class_WordData.html#a14">00153</a>   <a class="code" href="class_WordData.html">cGeneratorPtrType</a> <a class="code" href="class_WordData.html#a14">cLast</a>( )<font class="keyword"> const </font>{ <font class="keywordflow">return</font> wrd + len - 1; }
00154   <font class="comment">// for pseudo-p would have +, -, ++ and -- defined,</font>
00155   <font class="comment">// and a dereferencer operator*( )</font>
00156 
00157 
00158 <font class="keyword">private</font>:
00159 
<a name="l00160"></a><a class="code" href="class_WordData.html#o0">00160</a>   <font class="keywordtype">int</font> len;
<a name="l00161"></a><a class="code" href="class_WordData.html#r0">00161</a>   <font class="keyword">static</font> <font class="keyword">const</font> <font class="keywordtype">int</font> MAXLENGTH = 2000000000; <font class="comment">// The biggest int which will fit in len.</font>
<a name="l00162"></a><a class="code" href="class_WordData.html#o1">00162</a>   <a class="code" href="class_WordData.html">GeneratorType</a>* wrd;
00163 
00164 
00165 <font class="comment">//@@db temporary declaration.</font>
00166 
<a name="l00167"></a><a class="code" href="class_WordData.html#l0">00167</a>   <font class="keyword">friend</font> <font class="keyword">class </font><a class="code" href="struct_WordRep.html">WordRep</a>;
00168 };
00169 
00170 <font class="preprocessor">#endif</font>
</font></pre></div><hr><address><small>Generated at Tue Jun 19 09:49:34 2001 for Magnus Classes by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.6 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2001</small></address>
</body>
</html>
