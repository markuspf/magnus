<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta name="robots" content="noindex">
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>/magnus/back_end/general/include/DList.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.6 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>/magnus/back_end/general/include/DList.h</h1><a href="DList_h.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <font class="comment">/*</font>
00002 <font class="comment"> *   $Id: DList.h,v 1.4 2000/02/10 00:14:42 bormotov Exp $</font>
00003 <font class="comment"> */</font>
00004 
00005 <font class="comment">// Copyright (C) 1994 The New York Group Theory Cooperative</font>
00006 <font class="comment">// See magnus/doc/COPYRIGHT for the full notice.</font>
00007 
00008 <font class="comment">// Contents: Definition and implementation of DListOf, DListRep,</font>
00009 <font class="comment">//           DListIterator, and DListIteratorRep template classes.</font>
00010 <font class="comment">//</font>
00011 <font class="comment">// Principal Authors: Sergey Lyutikov</font>
00012 <font class="comment">//</font>
00013 <font class="comment">// Status: Useable.</font>
00014 <font class="comment">//</font>
00015 <font class="comment">// Revision History:</font>
00016 <font class="comment">//</font>
00017 <font class="comment">// Special Notes:</font>
00018 <font class="comment">//</font>
00019 <font class="comment">// * class DListOf represents a double linked list.</font>
00020 <font class="comment">//</font>
00021 <font class="comment">// * To instantiate DListOf&lt;T&gt;, class T must have</font>
00022 <font class="comment">//   1) An assignment operator</font>
00023 <font class="comment">//   2) A copy constructor</font>
00024 <font class="comment">//   3) An == operator</font>
00025 <font class="comment">//   4) A destructor</font>
00026 <font class="comment">//   and there must be an</font>
00027 <font class="comment">//     ostream&amp; operator &lt;&lt; ( ostream&amp;, const Type&amp; ),</font>
00028 <font class="comment">//   and a conversion of T to Type.</font>
00029 <font class="comment">//</font>
00030 <font class="comment">// * Some DListOf methods can safely ignore bad indices, but they post a</font>
00031 <font class="comment">//   warning if SAFETY &gt; 0 on the assumption that the caller is probably bugged.</font>
00032 <font class="comment">//</font>
00033 <font class="comment">// * Based on implementation of ListOf class.</font>
00034 <font class="comment">//</font>
00035 <font class="comment">// * IMPORTANT: DListIterator iterates a copy of the DList, </font>
00036 <font class="comment">//   not the list itself! So, if you change the list after constructing </font>
00037 <font class="comment">//   DListIterator, don't expect to get new values from the list.</font>
00038 <font class="comment">//   ( The same can be said about ListIterator. )</font>
00039 <font class="comment">//</font>
00040 <font class="comment">// 07/96 Aleksey M. implemented IPC tools</font>
00041  
00042 <font class="preprocessor">#ifndef _DLIST_H_</font>
00043 <font class="preprocessor"></font><font class="preprocessor">#define _DLIST_H_</font>
00044 <font class="preprocessor"></font>
00045 <font class="preprocessor">#include "<a class="code" href="RefCounter_h.html">RefCounter.h</a>"</font>
00046 <font class="preprocessor">#include "<a class="code" href="ObjectOf_h.html">ObjectOf.h</a>"</font>
00047 <font class="preprocessor">#include "<a class="code" href="DCell_h.html">DCell.h</a>"</font>
00048 
00049 template &lt;class T&gt; <font class="keyword">class </font><a class="code" href="class_DListIteratorRep.html">DListIteratorRep</a>;
00050 <font class="comment">// Forward declaration for friend declarations.</font>
00051 
00052 
00053 <font class="comment">//---------------------- class DListRep ----------------------------------</font>
00054 
<a name="l00055"></a><a class="code" href="class_DListRep.html">00055</a> template &lt;class T&gt; <font class="keyword">class </font><a class="code" href="class_DListRep.html">DListRep</a> : <font class="keyword">public</font> <a class="code" href="class_RefCounter.html">RefCounter</a> {
00056 
00057 <font class="keyword">public</font>:
00058 
<a name="l00059"></a><a class="code" href="class_DListRep.html#a0">00059</a>   <a class="code" href="class_DListRep.html#a0">DListRep</a>( ) : root(NULL), last(NULL), len(0) { }
00060 
<a name="l00061"></a><a class="code" href="class_DListRep.html#a1">00061</a>   <a class="code" href="class_DListRep.html#a0">DListRep</a>( <font class="keyword">const</font> T&amp; t )<font class="keyword"> </font>{
00062          root = last = <font class="keyword">new</font> <a class="code" href="class_DListRep.html#u0">CellType</a>(t);
00063          len = 1;
00064   }
00065 
00066   <font class="comment">// copy constructor does deep copy</font>
<a name="l00067"></a><a class="code" href="class_DListRep.html#a2">00067</a>   <a class="code" href="class_DListRep.html#a0">DListRep</a>( <font class="keyword">const</font> <a class="code" href="class_DListRep.html">DListRep</a>&amp; lr ) : len(lr.len) {
00068          
00069          <font class="keywordflow">if</font> ( lr.root == NULL )
00070                 root = last = NULL;
00071          <font class="keywordflow">else</font> {
00072                 <a class="code" href="class_Cell.html">CellType</a>* to = root = <font class="keyword">new</font> <a class="code" href="class_DListRep.html#u0">CellType</a>( *lr.root );
00073                 <a class="code" href="class_Cell.html">CellType</a>* from = lr.root-&gt;nextCell;
00074                 <font class="keywordflow">while</font> ( from ) {
00075                   to-&gt;nextCell = <font class="keyword">new</font> <a class="code" href="class_DListRep.html#u0">CellType</a>( *from );
00076                   to-&gt;nextCell-&gt;previousCell = to;
00077                   to = to-&gt;nextCell;
00078                   from = from-&gt;nextCell;
00079                 }
00080                 last = to;
00081                 last-&gt;nextCell = NULL; <font class="comment">// Better safe than sorry</font>
00082          }
00083   }
00084 
<a name="l00085"></a><a class="code" href="class_DListRep.html#a3">00085</a>   <a class="code" href="class_DListRep.html#a3">~DListRep</a>( )<font class="keyword"> </font>{
00086          <a class="code" href="class_Cell.html">CellType</a>* r;
00087          <font class="keywordflow">while</font> ( root ) {
00088                 r = root-&gt;nextCell;
00089                 <font class="keyword">delete</font> root;
00090                 root = r;
00091          }
00092   }
00093 
<a name="l00094"></a><a class="code" href="class_DListRep.html#a4">00094</a>   Bool <a class="code" href="Property_h.html#a1">operator == </a>( <font class="keyword">const</font> <a class="code" href="class_DListRep.html">DListRep</a>&amp; lr )<font class="keyword"> const </font>{
00095          <font class="keywordflow">return</font> ( len == lr.len &amp;&amp; <a class="code" href="class_DListRep.html#a17">agreement</a>(&amp;lr, 0) == len );
00096   }
00097 
<a name="l00098"></a><a class="code" href="class_DListRep.html#a5">00098</a>   <a class="code" href="class_DListRep.html">DListRep</a>* <a class="code" href="class_DListRep.html#a5">clone</a>( )<font class="keyword"> </font>{ <font class="keywordflow">return</font> <font class="keyword">new</font> <a class="code" href="class_DListRep.html#a0">DListRep</a>(*<font class="keyword">this</font>); }
00099 
<a name="l00100"></a><a class="code" href="class_DListRep.html#a6">00100</a>   <font class="keywordtype">void</font> <a class="code" href="class_DListRep.html#a6">insert</a>( <font class="keyword">const</font> T&amp; t, <font class="keywordtype">int</font> i )<font class="keyword"> </font>{
00101 <font class="preprocessor">    #if SAFETY &gt; 0</font>
00102 <font class="preprocessor"></font>      <font class="keywordflow">if</font> ( i &lt; 0 || i &gt; len )
00103                   <a class="code" href="error_h.html#a0">error</a>(<font class="stringliteral">"index argument to DListRep::insert out of bounds"</font>);
00104 <font class="preprocessor">    #endif</font>
00105 <font class="preprocessor"></font>         <font class="keywordflow">if</font> ( i == 0 ) {
00106                 <font class="keywordflow">if</font> ( root )
00107                   root = <font class="keyword">new</font> <a class="code" href="class_DListRep.html#u0">CellType</a>(t, NULL, root);
00108                 <font class="keywordflow">else</font>
00109                   root = last = <font class="keyword">new</font> <a class="code" href="class_DListRep.html#u0">CellType</a>(t);
00110          }
00111          <font class="keywordflow">else</font> <font class="keywordflow">if</font> ( i == len ) {
00112                 last = last-&gt;nextCell = <font class="keyword">new</font> <a class="code" href="class_DListRep.html#u0">CellType</a>(t, last);
00113          }
00114          <font class="keywordflow">else</font> {
00115                 <a class="code" href="class_Cell.html">CellType</a>* scan = root;
00116                 <font class="keywordflow">while</font> ( --i ) {
00117 <font class="preprocessor">         #if SAFETY &gt; 0</font>
00118 <font class="preprocessor"></font>            <font class="keywordflow">if</font> ( scan == NULL )
00119             <a class="code" href="error_h.html#a0">error</a>(<font class="stringliteral">"internal error, len and actual length differ in DListRep"</font>);
00120 <font class="preprocessor">         #endif</font>
00121 <font class="preprocessor"></font>                  scan = scan-&gt;nextCell;
00122                 }
00123                 scan-&gt;nextCell = 
00124                         <font class="keyword">new</font> <a class="code" href="class_DListRep.html#u0">CellType</a>(t, scan, scan-&gt;nextCell);
00125                 scan = scan-&gt;nextCell;
00126                 scan-&gt;nextCell-&gt;previousCell = scan;
00127          }
00128          ++len;
00129   }
00130 
<a name="l00131"></a><a class="code" href="class_DListRep.html#a7">00131</a>   <font class="keywordtype">void</font> <a class="code" href="class_DListRep.html#a6">insert</a>( <font class="keyword">const</font> <a class="code" href="class_DListRep.html">DListRep</a>* LR, <font class="keywordtype">int</font> i )<font class="keyword"> </font>{
00132 
00133 <font class="preprocessor">         #if SAFETY &gt; 0</font>
00134 <font class="preprocessor"></font>                <font class="keywordflow">if</font> ( i &lt; 0 || i &gt; len )
00135                   <a class="code" href="error_h.html#a0">error</a>(<font class="stringliteral">"index argument to DListRep::insert out of bounds"</font>);
00136 <font class="preprocessor">         #endif</font>
00137 <font class="preprocessor"></font>
00138          <font class="keywordflow">if</font> ( LR-&gt;root == NULL ) <font class="keywordflow">return</font>;
00139 
00140          <a class="code" href="class_Cell.html">CellType</a>* copy = LR-&gt;root;
00141          <a class="code" href="class_Cell.html">CellType</a>* scan = root;
00142 
00143          <font class="keywordflow">if</font> ( i == 0 ) {
00144                 <font class="keywordflow">if</font> ( root != NULL ) 
00145                   scan = root = <font class="keyword">new</font> <a class="code" href="class_DListRep.html#u0">CellType</a>( copy-&gt;contents, NULL, root );
00146                 <font class="keywordflow">else</font> 
00147                   scan = root = last = <font class="keyword">new</font> <a class="code" href="class_DListRep.html#u0">CellType</a>( *copy );
00148                 copy = copy-&gt;nextCell;
00149          }
00150          <font class="keywordflow">else</font> <font class="keywordflow">if</font> ( i == len ) scan = last;
00151          <font class="keywordflow">else</font> {
00152                 <font class="keywordflow">while</font> ( --i ) {
00153 <font class="preprocessor">            #if SAFETY &gt; 0</font>
00154 <font class="preprocessor"></font>            <font class="keywordflow">if</font> ( scan == NULL )
00155             <a class="code" href="error_h.html#a0">error</a>(<font class="stringliteral">"internal error, len and actual length differ in DListRep"</font>);
00156 <font class="preprocessor">            #endif</font>
00157 <font class="preprocessor"></font>                  scan = scan-&gt;nextCell;
00158                 }
00159          }
00160          <font class="keywordflow">while</font> ( copy ) {
00161                 scan = scan-&gt;nextCell = <font class="keyword">new</font> <a class="code" href="class_DListRep.html#u0">CellType</a>( copy-&gt;contents, scan, scan-&gt;nextCell );
00162                 copy = copy-&gt;nextCell;
00163          }
00164          <font class="keywordflow">if</font> ( scan-&gt;nextCell == NULL ) last = scan;
00165          <font class="keywordflow">else</font> scan-&gt;nextCell-&gt;previousCell = scan;
00166          len += LR-&gt;len;
00167   }
00168 
<a name="l00169"></a><a class="code" href="class_DListRep.html#a8">00169</a>   <font class="keywordtype">void</font> <a class="code" href="class_DListRep.html#a8">removeElement</a>( <font class="keyword">const</font> T&amp; t )<font class="keyword"> </font>{
00170         <font class="keywordflow">if</font> ( root == NULL ) <font class="keywordflow">return</font>;
00171         <font class="keywordflow">if</font> ( root-&gt;contents == t ) <a class="code" href="class_DListRep.html#a9">removeElementOfIndex</a>(0);
00172         <font class="keywordflow">else</font> {
00173            <a class="code" href="class_Cell.html">CellType</a>* scan = root-&gt;nextCell;
00174            <font class="keywordflow">while</font> ( scan != NULL ) {
00175              <font class="keywordflow">if</font> ( scan-&gt;contents == t ) {
00176                 <font class="keywordflow">if</font> ( (scan-&gt;previousCell-&gt;nextCell = scan-&gt;nextCell) 
00177                         == NULL ) last = scan-&gt;previousCell;
00178                 <font class="keywordflow">else</font> scan-&gt;nextCell-&gt;previousCell = scan-&gt;previousCell;
00179                 <font class="keyword">delete</font> scan;
00180                 --len;
00181                 <font class="keywordflow">break</font>;
00182              }
00183              scan = scan-&gt;nextCell;
00184            }
00185        }
00186   }
00187 
<a name="l00188"></a><a class="code" href="class_DListRep.html#a9">00188</a>   <font class="keywordtype">void</font> <a class="code" href="class_DListRep.html#a9">removeElementOfIndex</a>( <font class="keywordtype">int</font> i )<font class="keyword"> </font>{
00189         <font class="keywordflow">if</font> ( root == NULL ) <font class="keywordflow">return</font>;
00190 <font class="preprocessor">        #if SAFETY &gt; 0</font>
00191 <font class="preprocessor"></font>         <font class="keywordflow">if</font> ( i &lt; 0 ) {
00192            <a class="code" href="error_h.html#a1">warn</a>(<font class="stringliteral">"ignoring negative index in DListRep::removeElementOfIndex"</font>);
00193            <font class="keywordflow">return</font>;
00194          }
00195 <font class="preprocessor">        #endif</font>
00196 <font class="preprocessor"></font>        <font class="keywordflow">if</font> ( i == 0 ) {
00197                 <a class="code" href="class_Cell.html">CellType</a>* tmp = root;
00198                 root = root-&gt;nextCell;
00199                 <font class="keywordflow">if</font> ( root ) root-&gt;previousCell = NULL;
00200                 --len;
00201                 <font class="keyword">delete</font> tmp;
00202          }
00203          <font class="keywordflow">else</font> {
00204                 <a class="code" href="class_Cell.html">CellType</a>* scan = root-&gt;nextCell;
00205                 <font class="keywordflow">while</font> ( scan != NULL ) {
00206                   <font class="keywordflow">if</font> ( --i == 0 ) {
00207                         <font class="keywordflow">if</font> ( (scan-&gt;previousCell-&gt;nextCell = scan-&gt;nextCell) 
00208                                 == NULL ) last = scan-&gt;previousCell;
00209                         <font class="keywordflow">else</font> scan-&gt;nextCell-&gt;previousCell = scan-&gt;previousCell;
00210                         <font class="keyword">delete</font> scan;
00211                         --len;
00212                         <font class="keywordflow">break</font>;
00213                   }
00214                   scan = scan-&gt;nextCell;
00215                 }
00216 <font class="preprocessor">                #if SAFETY &gt; 0</font>
00217 <font class="preprocessor"></font>                 <font class="keywordflow">if</font> ( scan == NULL &amp;&amp; i )
00218                  <a class="code" href="error_h.html#a1">warn</a>(<font class="stringliteral">"ignoring index &gt; length in DListRep::removeElementOfIndex"</font>);
00219 <font class="preprocessor">                #endif</font>
00220 <font class="preprocessor"></font>         }
00221   }
00222 
00223 
<a name="l00224"></a><a class="code" href="class_DListRep.html#a10">00224</a>   <font class="keywordtype">void</font> <a class="code" href="class_DListRep.html#a10">splice</a>( <font class="keyword">const</font> <a class="code" href="class_DListRep.html">DListRep</a>* rp, <font class="keywordtype">int</font> i, <font class="keywordtype">int</font> j )<font class="keyword"> </font>{
00225 <font class="preprocessor">         #if SAFETY &gt; 0</font>
00226 <font class="preprocessor"></font>           <font class="keywordflow">if</font> ( i &lt; 0 || j &lt; i || j &gt; len )
00227                   <a class="code" href="error_h.html#a0">error</a>(<font class="stringliteral">"DListRep::splice indices out of bounds"</font>);
00228 <font class="preprocessor">         #endif</font>
00229 <font class="preprocessor"></font>         <a class="code" href="class_Cell.html">CellType</a>* left = root;
00230          <a class="code" href="class_Cell.html">CellType</a>* right;
00231          <a class="code" href="class_Cell.html">CellType</a>* copy = rp-&gt;root;
00232          <font class="comment">// When i &gt; 0, set left to predecessor of cell with index i.</font>
00233          <font class="keywordflow">for</font>( <font class="keywordtype">int</font> k = 1; k &lt; i; k++ ) left = left-&gt;nextCell;
00234          <font class="comment">// Remove sublist [i,j), setting up left &amp; right for splicing.</font>
00235          <font class="keywordflow">if</font> ( i == 0 ) right = left;
00236          <font class="keywordflow">else</font> right = left-&gt;nextCell;
00237          <font class="keywordflow">for</font>( <font class="keywordtype">int</font> k = i; k &lt; j; k++ ) {
00238                 <a class="code" href="class_Cell.html">CellType</a>* tmp = right;
00239                 right = right-&gt;nextCell;
00240                 <font class="keyword">delete</font> tmp;
00241          }
00242          <font class="comment">// Attach rp btween left and right</font>
00243          <font class="keywordflow">if</font> ( i == 0 ) {
00244                 <font class="keywordflow">if</font> ( copy == NULL ) root = left = right;
00245                 <font class="keywordflow">else</font> {
00246                        root = left = <font class="keyword">new</font> <a class="code" href="class_DListRep.html#u0">CellType</a>(copy-&gt;contents);
00247                        copy = copy-&gt;nextCell;
00248                 }
00249          }
00250          <font class="keywordflow">while</font> ( copy != NULL ) {
00251                 left-&gt;nextCell = <font class="keyword">new</font> <a class="code" href="class_DListRep.html#u0">CellType</a>(copy-&gt;contents);
00252                 left-&gt;nextCell-&gt;previousCell = left;
00253                 left = left-&gt;nextCell;
00254                 copy = copy-&gt;nextCell;
00255          }
00256          left-&gt;nextCell = right;
00257          <font class="keywordflow">if</font> ( right == NULL ) last = left;
00258          <font class="keywordflow">else</font> right-&gt;previousCell = left;
00259          len += rp-&gt;len + i - j;
00260   }
00261 
00262 
<a name="l00263"></a><a class="code" href="class_DListRep.html#a11">00263</a>   <a class="code" href="class_DListRep.html">DListRep</a>* <a class="code" href="class_DListRep.html#a11">sublist</a>( <font class="keywordtype">int</font> i, <font class="keywordtype">int</font> j )<font class="keyword"> const </font>{
00264 <font class="preprocessor">         #if SAFETY &gt; 0</font>
00265 <font class="preprocessor"></font>           <font class="keywordflow">if</font> ( i &lt; 0 || j &lt; i || j &gt; len )
00266                   <a class="code" href="error_h.html#a0">error</a>(<font class="stringliteral">"DListRep::sublist indices out of bounds"</font>);
00267 <font class="preprocessor">    #endif</font>
00268 <font class="preprocessor"></font>         <a class="code" href="class_Cell.html">CellType</a>* scan = root;
00269          <font class="keywordflow">for</font>( <font class="keywordtype">int</font> k = 0; k &lt; i; k++ ) scan = scan-&gt;nextCell;
00270          <a class="code" href="class_DListRep.html">DListRep</a>* result = <font class="keyword">new</font> <a class="code" href="class_DListRep.html">DListRep</a>;
00271          <font class="keywordtype">int</font> result_len = 0;
00272          <font class="keywordflow">for</font>(<font class="keywordtype">int</font> k = i; k &lt; j; k++ ) {
00273                 result-&gt;<a class="code" href="class_DListRep.html#a6">insert</a>(scan-&gt;contents, result_len++);
00274                 scan = scan-&gt;nextCell;
00275          }
00276          <font class="keywordflow">return</font> result;
00277   }
00278          
00279 
<a name="l00280"></a><a class="code" href="class_DListRep.html#a12">00280</a>   <a class="code" href="class_DListRep.html">DListRep</a>* <a class="code" href="Vector_h.html#a2">concatenate</a>( <font class="keyword">const</font> <a class="code" href="class_DListRep.html">DListRep</a>* rp )<font class="keyword"> const </font>{
00281          <a class="code" href="class_DListRep.html">DListRep</a>* result = <font class="keyword">new</font> <a class="code" href="class_DListRep.html">DListRep</a>;
00282          <a class="code" href="class_Cell.html">CellType</a>* scan = root;
00283          <font class="keywordtype">int</font> result_len = 0;
00284          <font class="keywordflow">while</font> ( scan != NULL ) {
00285                 result-&gt;<a class="code" href="class_DListRep.html#a6">insert</a>(scan-&gt;contents, result_len++);
00286                 scan = scan-&gt;nextCell;
00287          }
00288          scan = rp-&gt;root;
00289          <font class="keywordflow">while</font> ( scan != NULL ) {
00290                 result-&gt;<a class="code" href="class_DListRep.html#a6">insert</a>(scan-&gt;contents, result_len++);
00291                 scan = scan-&gt;nextCell;
00292          }
00293          <font class="keywordflow">return</font> result;
00294   }
00295 
<a name="l00296"></a><a class="code" href="class_DListRep.html#a13">00296</a>   <a class="code" href="class_DListRep.html">DListRep</a>* <a class="code" href="class_DListRep.html#a13">reverse</a>( )<font class="keyword"> const </font>{
00297          <a class="code" href="class_DListRep.html">DListRep</a>* result = <font class="keyword">new</font> <a class="code" href="class_DListRep.html">DListRep</a>;
00298          <a class="code" href="class_Cell.html">CellType</a>* scan = root;
00299          <font class="keywordflow">while</font> ( scan != NULL ) {
00300                 result-&gt;<a class="code" href="class_DListRep.html#a6">insert</a>(scan-&gt;contents, 0);
00301                 scan = scan-&gt;nextCell;
00302          }
00303          <font class="keywordflow">return</font> result;
00304   }
00305 
<a name="l00306"></a><a class="code" href="class_DListRep.html#a14">00306</a>   <font class="keywordtype">int</font> <a class="code" href="class_DListRep.html#a14">length</a>( )<font class="keyword"> const </font>{ <font class="keywordflow">return</font> len; }
00307 
<a name="l00308"></a><a class="code" href="class_DListRep.html#a15">00308</a>   T <a class="code" href="class_DListRep.html#a15">element</a>( <font class="keywordtype">int</font> i )<font class="keyword"> const </font>{
00309 <font class="preprocessor">         #if SAFETY &gt; 0</font>
00310 <font class="preprocessor"></font>           <font class="keywordflow">if</font> ( i &lt; 0 || i &gt;= len )
00311                   <a class="code" href="error_h.html#a0">error</a>(<font class="stringliteral">"index argument to DListRep::element out of bounds"</font>);
00312 <font class="preprocessor">    #endif</font>
00313 <font class="preprocessor"></font>         <a class="code" href="class_Cell.html">CellType</a>* scan = root;
00314          <font class="keywordflow">while</font> ( i-- ) scan = scan-&gt;nextCell;
00315          <font class="keywordflow">return</font> scan-&gt;contents;
00316   }
00317 
<a name="l00318"></a><a class="code" href="class_DListRep.html#a16">00318</a>   <font class="keywordtype">int</font> <a class="code" href="class_DListRep.html#a16">indexOf</a>( <font class="keyword">const</font> T&amp; t )<font class="keyword"> const </font>{
00319          <font class="keywordtype">int</font> result = 0;
00320          <a class="code" href="class_Cell.html">CellType</a>* scan = root;
00321          <font class="keywordflow">while</font> ( scan != NULL ) {
00322                 <font class="keywordflow">if</font> ( scan-&gt;contents == t ) <font class="keywordflow">return</font> result;
00323                 ++result;
00324                 scan = scan-&gt;nextCell;
00325          }
00326          <font class="keywordflow">return</font> -1;
00327   }
00328 
<a name="l00329"></a><a class="code" href="class_DListRep.html#a17">00329</a>   <font class="keywordtype">int</font> <a class="code" href="class_DListRep.html#a17">agreement</a>( <font class="keyword">const</font> <a class="code" href="class_DListRep.html">DListRep</a>* rp, <font class="keywordtype">int</font> start )<font class="keyword"> const </font>{
00330          <a class="code" href="class_Cell.html">CellType</a>* scan1 = root;
00331          <a class="code" href="class_Cell.html">CellType</a>* scan2 = rp-&gt;root;
00332          <font class="keywordflow">while</font> ( start ) {
00333                 --start;
00334                 <font class="keywordflow">if</font> ( scan2 == NULL ) {
00335 <font class="preprocessor">                  #if SAFETY &gt; 0</font>
00336 <font class="preprocessor"></font>                    <a class="code" href="error_h.html#a1">warn</a>(<font class="stringliteral">"ignoring start &gt; length in DListRep::agreement"</font>);
00337 <font class="preprocessor">        #endif</font>
00338 <font class="preprocessor"></font>                  <font class="keywordflow">return</font> 0;
00339                 }
00340                 scan2 = scan2-&gt;nextCell;
00341          }
00342          <font class="keywordtype">int</font> result = 0;
00343          <font class="keywordflow">while</font> ( scan1 != NULL &amp;&amp; scan2 != NULL &amp;&amp;
00344                                 scan1-&gt;contents == scan2-&gt;contents ) {
00345                 ++result;
00346                 scan1 = scan1-&gt;nextCell;
00347                 scan2 = scan2-&gt;nextCell;
00348          }
00349          <font class="keywordflow">return</font> result;
00350   }
00351 
00352 <font class="preprocessor">  #ifdef DEBUG</font>
00353 <font class="preprocessor"></font>    <font class="keywordtype">void</font> <a class="code" href="Margin_h.html#a9">debugPrint</a>( ostream&amp; ostr )<font class="keyword"> const </font>{ }
00354 <font class="preprocessor">  #endif</font>
00355 <font class="preprocessor"></font>
<a name="l00356"></a><a class="code" href="class_DListRep.html#a18">00356</a>   <font class="keywordtype">void</font> <a class="code" href="class_DListRep.html#a18">printOn</a>( ostream&amp; ostr )<font class="keyword"> const </font>{
00357          <a class="code" href="class_Cell.html">CellType</a>* r = root;
00358          <font class="keywordflow">while</font> ( r ) {
00359                 ostr &lt;&lt; <font class="stringliteral">" &lt;-&gt; "</font> &lt;&lt; r-&gt;contents;
00360                 r = r-&gt;nextCell;
00361          }
00362   }
00363   <font class="comment">//@rn imposes constraint on Associations Key type</font>
00364 <font class="comment"></font>
00365 <font class="comment">  /////////////////////////////////////////////////////////////////////////</font>
00366 <font class="comment"></font>  <font class="comment">//                                                                     //</font>
00367   <font class="comment">// IPC tools:                                                          //</font>
00368   <font class="comment">//                                                                     //</font><font class="comment"></font>
00369 <font class="comment">  /////////////////////////////////////////////////////////////////////////</font>
00370 <font class="comment"></font>
00371   <font class="keywordtype">void</font>  <a class="code" href="class_DListRep.html#a19">write</a>( ostream&amp; ostr ) <font class="keyword">const</font>;
00372 
00373   <font class="keywordtype">void</font>  <a class="code" href="class_DListRep.html#a20">read</a>( istream&amp; istr );
00374 
00375 
00376 <font class="keyword">private</font>:
00377 
00378   <a class="code" href="class_DListRep.html">DListRep</a>&amp; <a class="code" href="class_RefCounter.html#c0">operator = </a>( <font class="keyword">const</font> <a class="code" href="class_DListRep.html">DListRep</a>&amp; ); <font class="comment">// prohibit assignment</font>
00379   <font class="comment">//@rn be systematic about this?</font>
00380 
<a name="l00381"></a><a class="code" href="class_DListRep.html#u0">00381</a>   <font class="keyword">typedef</font> <a class="code" href="class_DCell.html">DCell&lt;T&gt;</a> <a class="code" href="class_Cell.html">CellType</a>;
00382 
<a name="l00383"></a><a class="code" href="class_DListRep.html#l0">00383</a>   <font class="keyword">friend</font> <font class="keyword">class </font><a class="code" href="class_DListIteratorRep.html">DListIteratorRep</a>&lt;T&gt;;
00384 
00385   <font class="comment">// Data members:</font>
00386 
<a name="l00387"></a><a class="code" href="class_DListRep.html#o0">00387</a>   <a class="code" href="class_Cell.html">CellType</a>* root;
<a name="l00388"></a><a class="code" href="class_DListRep.html#o1">00388</a>   <a class="code" href="class_Cell.html">CellType</a>* last;
00389 
<a name="l00390"></a><a class="code" href="class_DListRep.html#o2">00390</a>   <font class="keywordtype">int</font> len;
00391 
00392 };
00393 
00394 
00395 <font class="comment">//---------------------- class DListOf ----------------------------------</font>
00396 
<a name="l00397"></a><a class="code" href="class_DListOf.html">00397</a> template &lt;class T&gt; <font class="keyword">class </font><a class="code" href="class_DListOf.html">DListOf</a> : <a class="code" href="class_ObjectOf.html">ObjectOf</a>&lt; DListRep&lt;T&gt; &gt; {
00398 
00399 <font class="keyword">public</font>:
00400 
<a name="l00401"></a><a class="code" href="class_DListOf.html#s0">00401</a>   <font class="keyword">typedef</font> T ListElementType; <font class="comment">// Export the template parameter</font>
00402 
<a name="l00403"></a><a class="code" href="class_DListOf.html#a0">00403</a>   <a class="code" href="class_DListOf.html#a0">DListOf</a>( ) : <a class="code" href="class_ObjectOf.html">ObjectOf</a>&lt;<a class="code" href="struct_VectorPtrRep.html">Rep</a>&gt;( new <a class="code" href="struct_VectorPtrRep.html">Rep</a>() ) { }
00404   <font class="comment">// Default constructor makes empty list.</font>
00405 
<a name="l00406"></a><a class="code" href="class_DListOf.html#a1">00406</a>   <a class="code" href="class_DListOf.html#a0">DListOf</a>( <font class="keyword">const</font> T&amp; t ) : <a class="code" href="class_ObjectOf.html">ObjectOf</a>&lt;<a class="code" href="struct_VectorPtrRep.html">Rep</a>&gt;( new <a class="code" href="struct_VectorPtrRep.html">Rep</a>(t) ) { }
00407   <font class="comment">// Cast constructor T -&gt; DListOf&lt;T&gt;.</font>
00408 
00409   <font class="comment">// Copy constructor, operator=, and destructor supplied by compiler.</font>
00410 
<a name="l00411"></a><a class="code" href="class_DListOf.html#a2">00411</a>   Bool <a class="code" href="Property_h.html#a1">operator == </a>( <font class="keyword">const</font> <a class="code" href="class_DListOf.html">DListOf</a>&amp; L )<font class="keyword"> const </font>{ <font class="keywordflow">return</font> <a class="code" href="class_DListOf.html#a5">equalTo</a>(L); }
00412 
<a name="l00413"></a><a class="code" href="class_DListOf.html#a3">00413</a>   Bool <a class="code" href="Property_h.html#a2">operator != </a>( <font class="keyword">const</font> <a class="code" href="class_DListOf.html">DListOf</a>&amp; L )<font class="keyword"> const </font>{ <font class="keywordflow">return</font> !<a class="code" href="class_DListOf.html#a5">equalTo</a>(L); }
00414 
<a name="l00415"></a><a class="code" href="class_DListOf.html#a4">00415</a>   T <a class="code" href="class_DListOf.html#a4">operator [ ] </a>( <font class="keywordtype">int</font> i )<font class="keyword"> const </font>{ <font class="keywordflow">return</font> <a class="code" href="class_DListOf.html#a6">element</a>(i); }
00416   <font class="comment">// For read access only. Zero-based indexing.</font>
00417 
<a name="l00418"></a><a class="code" href="class_DListOf.html#a5">00418</a>   Bool <a class="code" href="class_DListOf.html#a5">equalTo</a>( <font class="keyword">const</font> <a class="code" href="class_DListOf.html">DListOf</a>&amp; L )<font class="keyword"> const </font>{
00419          <font class="keywordflow">return</font> ( *<a class="code" href="class_ObjectOf.html#b0">look</a>() == *L.<a class="code" href="class_ObjectOf.html#b0">look</a>() );
00420   }
00421   <font class="comment">// TRUE iff L contains the same T's as this list, in the same order.</font>
00422 
<a name="l00423"></a><a class="code" href="class_DListOf.html#a6">00423</a>   T <a class="code" href="class_DListOf.html#a6">element</a>( <font class="keywordtype">int</font> i )<font class="keyword"> const </font>{ <font class="keywordflow">return</font> <a class="code" href="class_ObjectOf.html#b0">look</a>()-&gt;element(i); }
00424   <font class="comment">// Return the element of index i in this list. Zero-based indexing.</font>
00425   <font class="comment">// It is a fatal error if i &lt; 0 or i &gt;= length().</font>
00426 
<a name="l00427"></a><a class="code" href="class_DListOf.html#a7">00427</a>   <font class="keywordtype">int</font> <a class="code" href="class_DListOf.html#a7">length</a>( )<font class="keyword"> const </font>{ <font class="keywordflow">return</font> <a class="code" href="class_ObjectOf.html#b0">look</a>()-&gt;length(); }
00428   <font class="comment">// Return length of this List.</font>
00429 
<a name="l00430"></a><a class="code" href="class_DListOf.html#a8">00430</a>   Bool <a class="code" href="class_DListOf.html#a8">contains</a>( <font class="keyword">const</font> T&amp; t )<font class="keyword"> const </font>{
00431          <font class="keywordflow">return</font> ( <a class="code" href="class_DListOf.html#a9">indexOf</a>(t) != -1 );
00432   }
00433   <font class="comment">// TRUE iff this list contains t according to T::operator==.</font>
00434 
<a name="l00435"></a><a class="code" href="class_DListOf.html#a9">00435</a>   <font class="keywordtype">int</font> <a class="code" href="class_DListOf.html#a9">indexOf</a>( <font class="keyword">const</font> T&amp; t )<font class="keyword"> const </font>{ <font class="keywordflow">return</font> <a class="code" href="class_ObjectOf.html#b0">look</a>()-&gt;indexOf(t); }
00436   <font class="comment">// Returns the index of t in this list, or -1 if not here.</font>
00437   <font class="comment">// Uses T::operator== in search.</font>
00438   <font class="comment">// Zero-based indexing.</font>
00439 
<a name="l00440"></a><a class="code" href="class_DListOf.html#a10">00440</a>   Bool <a class="code" href="class_DListOf.html#a10">prefixOf</a>( <font class="keyword">const</font> <a class="code" href="class_DListOf.html">DListOf</a>&amp; L )<font class="keyword"> const </font>{
00441          <font class="keywordflow">return</font> ( <a class="code" href="class_DListOf.html#a12">agreement</a>(L) == <a class="code" href="class_DListOf.html#a7">length</a>() );
00442   }
00443   <font class="comment">// TRUE iff this list is a prefix of L.</font>
00444 
<a name="l00445"></a><a class="code" href="class_DListOf.html#a11">00445</a>   Bool <a class="code" href="class_DListOf.html#a11">properPrefixOf</a>( <font class="keyword">const</font> <a class="code" href="class_DListOf.html">DListOf</a>&amp; L )<font class="keyword"> const </font>{
00446          <font class="keywordflow">return</font> ( <a class="code" href="class_DListOf.html#a7">length</a>() &lt; L.<a class="code" href="class_DListOf.html#a7">length</a>() &amp;&amp; <a class="code" href="class_DListOf.html#a10">prefixOf</a>(L) );
00447   }
00448   <font class="comment">// TRUE iff this list is a proper prefix of L.</font>
00449 
<a name="l00450"></a><a class="code" href="class_DListOf.html#a12">00450</a>   <font class="keywordtype">int</font> <a class="code" href="class_DListOf.html#a12">agreement</a>( <font class="keyword">const</font> <a class="code" href="class_DListOf.html">DListOf</a>&amp; L, <font class="keywordtype">int</font> start = 0 )<font class="keyword"> const </font>{
00451          <font class="keywordflow">return</font> <a class="code" href="class_ObjectOf.html#b0">look</a>()-&gt;agreement(L.<a class="code" href="class_ObjectOf.html#b0">look</a>(), start);
00452   }
00453   <font class="comment">// Returns the length of the maximal prefix of this list which matches</font>
00454   <font class="comment">// the suffix of L beginning at start. You get a warning if</font>
00455   <font class="comment">// start &gt;= L.length(); the result is 0 in this case.</font>
00456 
<a name="l00457"></a><a class="code" href="class_DListOf.html#a13">00457</a>   <a class="code" href="class_DListOf.html">DListOf</a> <a class="code" href="class_DListOf.html#a13">sublist</a>( <font class="keywordtype">int</font> i, <font class="keywordtype">int</font> j )<font class="keyword"> const </font>{
00458          <font class="keywordflow">return</font> <a class="code" href="class_DListOf.html#a0">DListOf</a>( <a class="code" href="class_ObjectOf.html#b0">look</a>()-&gt;sublist(i, j) );
00459   }
00460   <font class="comment">// Returns a copy of the sublist [i,j) of this list.</font>
00461   <font class="comment">// It is a fatal error if i &lt; 0, j &lt; i, or j &gt; length().</font>
00462   <font class="comment">// Note if i == j this returns an empty list.</font>
00463 
<a name="l00464"></a><a class="code" href="class_DListOf.html#l1">00464</a>   <font class="keyword">friend</font> <a class="code" href="class_DListOf.html">DListOf</a> <a class="code" href="Vector_h.html#a2">concatenate</a>( <font class="keyword">const</font> <a class="code" href="class_DListOf.html">DListOf</a>&amp; L1, <font class="keyword">const</font> <a class="code" href="class_DListOf.html">DListOf</a>&amp; L2 )<font class="keyword"> </font>{
00465          <font class="keywordflow">return</font> <a class="code" href="class_DListOf.html#a0">DListOf</a>( L1.<a class="code" href="class_ObjectOf.html#b0">look</a>()-&gt;concatenate(L2.<a class="code" href="class_ObjectOf.html#b0">look</a>()) );
00466   }
00467   <font class="comment">// Returns the concatenatation of L1 and L2.</font>
00468 
<a name="l00469"></a><a class="code" href="class_DListOf.html#a14">00469</a>   <a class="code" href="class_DListOf.html">DListOf</a> <a class="code" href="class_DListOf.html#a14">reverse</a>( )<font class="keyword"> const </font>{ <font class="keywordflow">return</font> <a class="code" href="class_DListOf.html#a0">DListOf</a>( <a class="code" href="class_ObjectOf.html#b0">look</a>()-&gt;reverse() ); }
00470   <font class="comment">// Returns a copy of this list in reverse order.</font>
00471 
<a name="l00472"></a><a class="code" href="class_DListOf.html#a15">00472</a>   <font class="keywordtype">void</font> <a class="code" href="class_DListOf.html#a15">append</a>( <font class="keyword">const</font> T&amp; t )<font class="keyword"> </font>{ <a class="code" href="class_ObjectOf.html#b2">change</a>()-&gt;insert(t, <a class="code" href="class_DListOf.html#a7">length</a>()); }
00473   <font class="comment">// Appends t to this List.</font>
00474 
<a name="l00475"></a><a class="code" href="class_DListOf.html#a16">00475</a>   <font class="keywordtype">void</font> <a class="code" href="class_DListOf.html#a16">prepend</a>( <font class="keyword">const</font> T&amp; t )<font class="keyword"> </font>{ <a class="code" href="class_ObjectOf.html#b2">change</a>()-&gt;insert(t, 0); }
00476   <font class="comment">// Prepends t to this List.</font>
00477 
<a name="l00478"></a><a class="code" href="class_DListOf.html#a17">00478</a>   <font class="keywordtype">void</font> <a class="code" href="class_DListOf.html#a17">insert</a>( <font class="keyword">const</font> T&amp; t, <font class="keywordtype">int</font> i )<font class="keyword"> </font>{ <a class="code" href="class_ObjectOf.html#b2">change</a>()-&gt;insert(t, i); }
00479   <font class="comment">// Make t the (i+1)th element of this List. Zero-based. The previous (i+1)th</font>
00480   <font class="comment">// element becomes the (i+2)th. It is a fatal error if i &lt; 0 or i &gt; length().</font>
00481 
<a name="l00482"></a><a class="code" href="class_DListOf.html#a18">00482</a>   <font class="keywordtype">void</font> <a class="code" href="class_DListOf.html#a17">insert</a>( <font class="keyword">const</font> <a class="code" href="class_DListOf.html">DListOf</a>&amp; L, <font class="keywordtype">int</font> i )<font class="keyword"> </font>{ <a class="code" href="class_ObjectOf.html#b2">change</a>()-&gt;insert( L.<a class="code" href="class_ObjectOf.html#b0">look</a>(), i ); }
00483   <font class="comment">// The first element of L becomes the (i+1)th element of this list. </font>
00484   <font class="comment">// Zero-based. The previous (i+1)th element follows the last element of L.</font>
00485   <font class="comment">// It is a fatal error if i &lt; 0 or i &gt; length().</font>
00486 
<a name="l00487"></a><a class="code" href="class_DListOf.html#a19">00487</a>   <font class="keywordtype">void</font> <a class="code" href="class_DListOf.html#a19">removeElement</a>( <font class="keyword">const</font> T&amp; t )<font class="keyword"> </font>{ <a class="code" href="class_ObjectOf.html#b2">change</a>()-&gt;removeElement(t); }
00488   <font class="comment">// Remove t from this list. It is not an error if t is not in this list.</font>
00489 
<a name="l00490"></a><a class="code" href="class_DListOf.html#a20">00490</a>   <font class="keywordtype">void</font> <a class="code" href="class_DListOf.html#a20">removeElementOfIndex</a>( <font class="keywordtype">int</font> i )<font class="keyword"> </font>{ <a class="code" href="class_ObjectOf.html#b2">change</a>()-&gt;removeElementOfIndex(i); }
00491   <font class="comment">// Remove the (i+1)th element of this list. Zero-based. You get a warning</font>
00492   <font class="comment">// if i &lt; 0 or i &gt;= length().</font>
00493 
<a name="l00494"></a><a class="code" href="class_DListOf.html#a21">00494</a>   <font class="keywordtype">void</font> <a class="code" href="class_DListOf.html#a21">splice</a>( <font class="keyword">const</font> <a class="code" href="class_DListOf.html">DListOf</a>&amp; L, <font class="keywordtype">int</font> i, <font class="keywordtype">int</font> j )<font class="keyword"> </font>{
00495          <font class="keywordflow">if</font> ( L.<a class="code" href="class_ObjectOf.html#b0">look</a>() == <a class="code" href="class_ObjectOf.html#b0">look</a>() ) { 
00496                 <a class="code" href="class_DListOf.html">DListOf&lt;T&gt;</a> aCopy = L;
00497                 <a class="code" href="class_ObjectOf.html#b2">change</a>()-&gt;splice( aCopy.<a class="code" href="class_ObjectOf.html#b0">look</a>(), i, j );
00498          }
00499          <font class="keywordflow">else</font> <a class="code" href="class_ObjectOf.html#b2">change</a>()-&gt;splice(L.<a class="code" href="class_ObjectOf.html#b0">look</a>(), i, j);
00500   }
00501   <font class="comment">// Replaces the sublist [i,j) of this list with L.</font>
00502   <font class="comment">// It is a fatal error if i &lt; 0, j &lt; i, or j &gt; length().</font>
00503   <font class="comment">// Note if i == j this inserts L into this list by moving the suffix of</font>
00504   <font class="comment">// this list beginning at index i to the right.</font>
00505 
<a name="l00506"></a><a class="code" href="class_DListOf.html#l2">00506</a>   <font class="keyword">inline</font> <font class="keyword">friend</font> ostream&amp; <a class="code" href="DatabaseManager_h.html#a28">operator &lt;&lt; </a>( ostream&amp; ostr, <font class="keyword">const</font> <a class="code" href="class_DListOf.html">DListOf</a>&amp; l )<font class="keyword"> </font>{
00507          l.<a class="code" href="class_ObjectOf.html#b0">look</a>()-&gt;printOn(ostr);
00508          <font class="keywordflow">return</font> ostr;
00509   }
00510 
00511 <font class="preprocessor">  #ifdef DEBUG</font>
00512 <font class="preprocessor"></font>    <font class="keywordtype">void</font> <a class="code" href="Margin_h.html#a9">debugPrint</a>( ostream&amp; ostr )<font class="keyword"> const </font>{
00513       <a class="code" href="class_ObjectOf.html#b0">look</a>()-&gt;debugPrint(ostr);
00514       ostr &lt;&lt; endl;
00515       <a class="code" href="class_ObjectOf.html#b0">look</a>()-&gt;printOn(ostr);
00516     }
00517 <font class="preprocessor">  #endif</font>
00518 <font class="preprocessor"></font> <font class="comment"></font>
00519 <font class="comment"> /////////////////////////////////////////////////////////////////////////</font>
00520 <font class="comment"></font>  <font class="comment">//                                                                     //</font>
00521   <font class="comment">// IPC tools:                                                          //</font>
00522   <font class="comment">//                                                                     //</font><font class="comment"></font>
00523 <font class="comment">  /////////////////////////////////////////////////////////////////////////</font>
00524 <font class="comment"></font>
<a name="l00525"></a><a class="code" href="class_DListOf.html#l3">00525</a>    <font class="keyword">friend</font> ostream&amp; <a class="code" href="Polynomial_h.html#a2">operator &lt; </a>( ostream&amp; ostr, <font class="keyword">const</font> <a class="code" href="class_DListOf.html">DListOf</a>&amp; DL )<font class="keyword"></font>
00526 <font class="keyword">  </font>{
00527     DL.<a class="code" href="class_ObjectOf.html#b0">look</a>()-&gt;write(ostr);
00528     <font class="keywordflow">return</font> ostr;
00529   }
00530   
<a name="l00531"></a><a class="code" href="class_DListOf.html#l4">00531</a>   <font class="keyword">friend</font> istream&amp; <a class="code" href="Polynomial_h.html#a3">operator &gt; </a>( istream&amp; istr, <a class="code" href="class_DListOf.html">DListOf</a>&amp; DL)<font class="keyword"></font>
00532 <font class="keyword">  </font>{
00533     DL.<a class="code" href="class_ObjectOf.html#b2">change</a>()-&gt;read(istr);
00534     <font class="keywordflow">return</font> istr;
00535   }
00536 
00537 <font class="keyword">private</font>:
00538 
<a name="l00539"></a><a class="code" href="class_DListOf.html#u0">00539</a>   <font class="keyword">typedef</font> <a class="code" href="class_DCell.html">DCell&lt;T&gt;</a> <a class="code" href="class_Cell.html">CellType</a>;
<a name="l00540"></a><a class="code" href="class_DListOf.html#u1">00540</a>   <font class="keyword">typedef</font> <a class="code" href="class_DListRep.html">DListRep&lt;T&gt;</a> <a class="code" href="struct_VectorPtrRep.html">Rep</a>;
00541 
<a name="l00542"></a><a class="code" href="class_DListOf.html#l0">00542</a>   <font class="keyword">friend</font> <font class="keyword">class </font><a class="code" href="class_DListIteratorRep.html">DListIteratorRep</a>&lt;T&gt;;
00543 
<a name="l00544"></a><a class="code" href="class_DListOf.html#u2">00544</a>   <font class="keyword">typedef</font> <a class="code" href="class_ObjectOf.html">ObjectOf&lt;Rep&gt;</a> <a class="code" href="class_ObjectOf.html">R</a>;
<a name="l00545"></a><a class="code" href="class_DListOf.html#c0">00545</a>   <a class="code" href="class_DListOf.html#a0">DListOf</a>( <a class="code" href="struct_VectorPtrRep.html">Rep</a>* p ) : <a class="code" href="class_ObjectOf.html">R</a>(p) { }
00546 
00547 };
00548 
00549 
00550 <font class="comment">//---------------------- class DListIteratorRep ----------------------------------</font>
00551 
<a name="l00552"></a><a class="code" href="class_DListIteratorRep.html">00552</a> template &lt;class T&gt; <font class="keyword">class </font><a class="code" href="class_DListIteratorRep.html">DListIteratorRep</a> : <font class="keyword">public</font> <a class="code" href="class_RefCounter.html">RefCounter</a> {
00553 
00554 <font class="keyword">public</font>:
00555 
<a name="l00556"></a><a class="code" href="class_DListIteratorRep.html#a0">00556</a>   <a class="code" href="class_DListIteratorRep.html#a0">DListIteratorRep</a>( <font class="keyword">const</font> <a class="code" href="class_DListOf.html">DListOf&lt;T&gt;</a>&amp; L ) : theList(L) { <a class="code" href="class_DListIteratorRep.html#a7">reset</a>(); }
00557 
00558   <font class="comment">// Use compiler's copy constructor, operator=, and destructor.</font>
00559 
<a name="l00560"></a><a class="code" href="class_DListIteratorRep.html#a1">00560</a>   <a class="code" href="class_DListIteratorRep.html">DListIteratorRep</a> *<a class="code" href="class_DListIteratorRep.html#a1">clone</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> <font class="keyword">new</font> <a class="code" href="class_DListIteratorRep.html#a0">DListIteratorRep</a>(*<font class="keyword">this</font>); }
00561 
<a name="l00562"></a><a class="code" href="class_DListIteratorRep.html#a2">00562</a>   Bool <a class="code" href="Property_h.html#a1">operator == </a>( <font class="keyword">const</font> <a class="code" href="class_DListIteratorRep.html">DListIteratorRep</a>&amp; <a class="code" href="class_DListIteratorRep.html">LIR</a> )<font class="keyword"> const </font>{
00563          <font class="keywordflow">return</font> ( ( current == <a class="code" href="class_DListIteratorRep.html">LIR</a>.current ) &amp;&amp; 
00564                                  ( ( theList.<a class="code" href="class_ObjectOf.html#b0">look</a>() == <a class="code" href="class_DListIteratorRep.html">LIR</a>.theList.<a class="code" href="class_ObjectOf.html#b0">look</a>() ) ||
00565                                         ( *(theList.<a class="code" href="class_ObjectOf.html#b0">look</a>()) == *(<a class="code" href="class_DListIteratorRep.html">LIR</a>.theList.<a class="code" href="class_ObjectOf.html#b0">look</a>()) ) ));
00566   }
00567 
<a name="l00568"></a><a class="code" href="class_DListIteratorRep.html#a3">00568</a>   T <a class="code" href="class_DListIteratorRep.html#a3">value</a>( )<font class="keyword"> const </font>{
00569 <font class="preprocessor">         #if SAFETY &gt; 0</font>
00570 <font class="preprocessor"></font>           <font class="keywordflow">if</font> ( current == NULL )
00571                   <a class="code" href="error_h.html#a0">error</a>(<font class="stringliteral">"tried to retrieve value from DListIterator which is done"</font>);
00572 <font class="preprocessor">    #endif</font>
00573 <font class="preprocessor"></font>         <font class="keywordflow">return</font> current-&gt;contents;
00574   }
00575 
<a name="l00576"></a><a class="code" href="class_DListIteratorRep.html#a4">00576</a>   Bool <a class="code" href="class_DListIteratorRep.html#a4">next</a>( )<font class="keyword"> </font>{
00577          <font class="keywordflow">if</font> ( current != NULL )
00578                 current = current-&gt;nextCell;
00579          <font class="keywordflow">return</font> current != NULL;
00580   }
00581 
<a name="l00582"></a><a class="code" href="class_DListIteratorRep.html#a5">00582</a>   Bool <a class="code" href="class_DListIteratorRep.html#a5">previous</a>( )<font class="keyword"> </font>{
00583         <font class="keywordflow">if</font> ( current != NULL )
00584                 current = current-&gt;previousCell;
00585         <font class="keywordflow">return</font> current != NULL;
00586   }
00587 
<a name="l00588"></a><a class="code" href="class_DListIteratorRep.html#a6">00588</a>   Bool <a class="code" href="class_DListIteratorRep.html#a6">done</a>( )<font class="keyword"> const </font>{ <font class="keywordflow">return</font> current == NULL; }
00589 
<a name="l00590"></a><a class="code" href="class_DListIteratorRep.html#a7">00590</a>   <font class="keywordtype">void</font> <a class="code" href="class_DListIteratorRep.html#a7">reset</a>( )<font class="keyword"> </font>{ current = theList.<a class="code" href="class_ObjectOf.html#b0">look</a>()-&gt;root; }
00591 
<a name="l00592"></a><a class="code" href="class_DListIteratorRep.html#a8">00592</a>   <font class="keywordtype">void</font> <a class="code" href="class_DListIteratorRep.html#a8">setToEnd</a>( )<font class="keyword"> </font>{ current = theList.<a class="code" href="class_ObjectOf.html#b0">look</a>()-&gt;last; }
00593 <font class="comment"></font>
00594 <font class="comment">  /////////////////////////////////////////////////////////////////////////</font>
00595 <font class="comment"></font>  <font class="comment">//                                                                     //</font>
00596   <font class="comment">// IPC tools:                                                          //</font>
00597   <font class="comment">//                                                                     //</font><font class="comment"></font>
00598 <font class="comment">  /////////////////////////////////////////////////////////////////////////</font>
00599 <font class="comment"></font>
00600   <font class="keywordtype">void</font>  <a class="code" href="class_DListIteratorRep.html#a9">write</a>( ostream&amp; ostr ) <font class="keyword">const</font>;
00601 
00602   <font class="keywordtype">void</font>  <a class="code" href="class_DListIteratorRep.html#a10">read</a>( istream&amp; istr );
00603 
00604 <font class="keyword">private</font>:
00605 
00606   <font class="comment">// Data members:</font>
00607 
<a name="l00608"></a><a class="code" href="class_DListIteratorRep.html#o0">00608</a>   <font class="keyword">const</font> <a class="code" href="class_DListOf.html">DListOf&lt;T&gt;</a>&amp; theList;
<a name="l00609"></a><a class="code" href="class_DListIteratorRep.html#o1">00609</a>   <a class="code" href="class_DCell.html">DCell&lt;T&gt;</a>* current;
00610 
00611 };
00612 
00613 
00614 <font class="comment">//---------------------- class DListIterator ----------------------------------</font>
00615 
00616 <font class="comment">// Example of use:</font>
00617 <font class="comment">//</font>
00618 <font class="comment">//  DListOf&lt;Word&gt; wordList;</font>
00619 <font class="comment">//  Word w;</font>
00620 <font class="comment">//  ...</font>
00621 <font class="comment">//</font>
00622 <font class="comment">//  DListIterator&lt; DListOf&lt;Word&gt; &gt; I(wordList);</font>
00623 <font class="comment">//  </font>
00624 <font class="comment">//  // Stupidly check for w:</font>
00625 <font class="comment">//  while ( !I.valid() ) {</font>
00626 <font class="comment">//    if ( I.value() == w ) /* w is in wordList */</font>
00627 <font class="comment">//    I.next();</font>
00628 <font class="comment">//  }</font>
00629 <font class="comment">//</font>
00630 <font class="comment">//  or</font>
00631 <font class="comment">//</font>
00632 <font class="comment">//  I.setToEnd();</font>
00633 <font class="comment">//  while ( !I.valid() ) {</font>
00634 <font class="comment">//    if ( I.value() == w ) /* w is in wordList */</font>
00635 <font class="comment">//    I.previous();</font>
00636 <font class="comment">//  }</font>
00637 <font class="comment">//</font>
00638 
00639 template &lt;class ListType&gt;
<a name="l00640"></a><a class="code" href="class_DListIterator.html">00640</a> <font class="keyword">class </font><a class="code" href="class_DListIterator.html">DListIterator</a> :
00641 <font class="keyword">public</font> <a class="code" href="class_ObjectOf.html">ObjectOf</a>&lt; DListIteratorRep&lt;typename ListType::ListElementType&gt; &gt; 
00642 {
00643 
00644 <font class="keyword">public</font>:
00645 
<a name="l00646"></a><a class="code" href="class_DListIterator.html#s0">00646</a>   <font class="keyword">typedef</font> <font class="keyword">typename</font> ListType::ListElementType T;
00647 
<a name="l00648"></a><a class="code" href="class_DListIterator.html#a0">00648</a>   <a class="code" href="class_DListIterator.html#a0">DListIterator</a>(<font class="keyword">const</font> <a class="code" href="class_DListOf.html">DListOf&lt;T&gt;</a>&amp; L) : <a class="code" href="class_ObjectOf.html">ObjectOf</a>&lt;<a class="code" href="class_DListIteratorRep.html">LIR</a>&gt;( new <a class="code" href="class_DListIteratorRep.html">LIR</a>(L) ) { }
00649   <font class="comment">// Initialize an iterator with the list over which to iterate.</font>
00650 
00651   <font class="comment">// Copy constructor, operator=, and destructor supplied by compiler.</font>
00652 
00653   <font class="comment">// Copying or assigning an iterator is guaranteed to produce an</font>
00654   <font class="comment">// iterator which visits the (rest of the) same elements in the</font>
00655   <font class="comment">// same order as the original.</font>
00656 
<a name="l00657"></a><a class="code" href="class_DListIterator.html#a1">00657</a>   Bool <a class="code" href="Property_h.html#a1">operator == </a>( <font class="keyword">const</font> <a class="code" href="class_DListIterator.html">DListIterator</a>&amp; I )<font class="keyword"> const </font>{
00658          <font class="keywordflow">return</font> ((<a class="code" href="class_ObjectOf.html#b0">look</a>() == I.<a class="code" href="class_ObjectOf.html#b0">look</a>()) || (*<a class="code" href="class_ObjectOf.html#b0">look</a>() == *I.<a class="code" href="class_ObjectOf.html#b0">look</a>()));
00659   }
00660 
<a name="l00661"></a><a class="code" href="class_DListIterator.html#a2">00661</a>   T <a class="code" href="class_DListIterator.html#a2">value</a>( )<font class="keyword"> const </font>{ <font class="keywordflow">return</font> <a class="code" href="class_ObjectOf.html#b0">look</a>()-&gt;value(); }
00662   <font class="comment">// Returns the current value. Calling this is a fatal error if done().</font>
00663 
<a name="l00664"></a><a class="code" href="class_DListIterator.html#a3">00664</a>   Bool <a class="code" href="class_DListIterator.html#a3">next</a>( )<font class="keyword"> </font>{ <font class="keywordflow">return</font> <a class="code" href="class_ObjectOf.html#b2">change</a>()-&gt;next(); }
00665   <font class="comment">// Advances this iterator.</font>
00666   <font class="comment">// Returns TRUE iff the iteration has not finished.</font>
00667   <font class="comment">// This may be called after it returns FALSE with no side effect.</font>
00668 
<a name="l00669"></a><a class="code" href="class_DListIterator.html#a4">00669</a>   Bool <a class="code" href="class_DListIterator.html#a4">previous</a>( )<font class="keyword"> </font>{ <font class="keywordflow">return</font> <a class="code" href="class_ObjectOf.html#b2">change</a>()-&gt;previous(); }
00670   <font class="comment">// Advances this iterator.</font>
00671   <font class="comment">// Returns TRUE iff the iteration has not finished.</font>
00672   <font class="comment">// This may be called after it returns FALSE with no side effect.</font>
00673 
<a name="l00674"></a><a class="code" href="class_DListIterator.html#a5">00674</a>   Bool <a class="code" href="class_DListIterator.html#a5">done</a>( )<font class="keyword"> const </font>{ <font class="keywordflow">return</font> <a class="code" href="class_ObjectOf.html#b0">look</a>()-&gt;done(); }
00675   <font class="comment">// Returns TRUE iff the iteration has finished. This may</font>
00676   <font class="comment">// be called after it returns TRUE with no side effect.</font>
00677 
<a name="l00678"></a><a class="code" href="class_DListIterator.html#a6">00678</a>   Bool <a class="code" href="class_DListIterator.html#a6">valid</a>( )<font class="keyword"> const </font>{ <font class="keywordflow">return</font> !<a class="code" href="class_ObjectOf.html#b0">look</a>()-&gt;done(); }
00679   <font class="comment">// Returns TRUE iff the iteration hasn't finished. This may</font>
00680   <font class="comment">// be called after it returns FALSE with no side effect.</font>
00681 
<a name="l00682"></a><a class="code" href="class_DListIterator.html#a7">00682</a>   <font class="keywordtype">void</font> <a class="code" href="class_DListIterator.html#a7">reset</a>( )<font class="keyword"> </font>{ <a class="code" href="class_ObjectOf.html#b2">change</a>()-&gt;reset(); }
00683   <font class="comment">// Set iterator pointer to the first element of the list.</font>
00684   <font class="comment">// Resets this iterator to the state it was in after construction.</font>
00685 
<a name="l00686"></a><a class="code" href="class_DListIterator.html#a8">00686</a>   <font class="keywordtype">void</font> <a class="code" href="class_DListIterator.html#a8">setToEnd</a>( )<font class="keyword"> </font>{ <a class="code" href="class_ObjectOf.html#b2">change</a>()-&gt;setToEnd(); }
00687   <font class="comment">// Set iterator pointer to the last element of the list.</font>
00688 
00689  <font class="comment"></font>
00690 <font class="comment"> /////////////////////////////////////////////////////////////////////////</font>
00691 <font class="comment"></font>  <font class="comment">//                                                                     //</font>
00692   <font class="comment">// IPC tools:                                                          //</font>
00693   <font class="comment">//                                                                     //</font><font class="comment"></font>
00694 <font class="comment">  /////////////////////////////////////////////////////////////////////////</font>
00695 <font class="comment"></font>
<a name="l00696"></a><a class="code" href="class_DListIterator.html#l0">00696</a>    <font class="keyword">friend</font> ostream&amp; <a class="code" href="Polynomial_h.html#a2">operator &lt; </a>( ostream&amp; ostr, <font class="keyword">const</font> <a class="code" href="class_DListIterator.html">DListIterator</a>&amp; DLI )<font class="keyword"></font>
00697 <font class="keyword">  </font>{
00698     DLI.<a class="code" href="class_ObjectOf.html#b0">look</a>()-&gt;write(ostr);
00699     <font class="keywordflow">return</font> ostr;
00700   }
00701   
<a name="l00702"></a><a class="code" href="class_DListIterator.html#l1">00702</a>   <font class="keyword">friend</font> istream&amp; <a class="code" href="Polynomial_h.html#a3">operator &gt; </a>( istream&amp; istr, <a class="code" href="class_DListIterator.html">DListIterator</a>&amp; DLI)<font class="keyword"></font>
00703 <font class="keyword">  </font>{
00704     DLI.<a class="code" href="class_ObjectOf.html#b2">change</a>()-&gt;read(istr);
00705     <font class="keywordflow">return</font> istr;
00706   }
00707 
00708 <font class="keyword">private</font>:
00709 
<a name="l00710"></a><a class="code" href="class_DListIterator.html#u0">00710</a>   <font class="keyword">typedef</font> <a class="code" href="class_DListIteratorRep.html">DListIteratorRep&lt;T&gt;</a> <a class="code" href="class_DListIteratorRep.html">LIR</a>;
00711 
00712 };
00713 
00714 <font class="preprocessor">#endif</font>
</font></pre></div><hr><address><small>Generated at Tue Jun 19 09:49:35 2001 for Magnus Classes by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.6 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2001</small></address>
</body>
</html>
