<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta name="robots" content="noindex">
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>/magnus/back_end/SessionManager/include/Supervisor.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.6 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>/magnus/back_end/SessionManager/include/Supervisor.h</h1><a href="Supervisor_h.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <font class="comment">/*</font>
00002 <font class="comment"> *   $Id: Supervisor.h,v 1.10 1998/05/14 19:47:41 bormotov Exp $</font>
00003 <font class="comment"> */</font>
00004  
00005 <font class="comment">// Copyright (C) 1995 The New York Group Theory Cooperative</font>
00006 <font class="comment">// See magnus/doc/COPYRIGHT for the full notice.</font>
00007 <font class="comment">//</font>
00008 <font class="comment">// Contents: Declaration of mixin class Supervisor and helpers</font>
00009 <font class="comment">//</font>
00010 <font class="comment">// Principal Author: Roger Needham, Dmitry Bormotov</font>
00011 <font class="comment">//</font>
00012 <font class="comment">// Status: in progress</font>
00013 <font class="comment">//</font>
00014 <font class="comment">// Revision History:</font>
00015 <font class="comment">//</font>
00016 <font class="comment">// * 7/96 Dmitry B. made porting to gcc 2.7.2.</font>
00017 <font class="comment">//</font>
00018 <font class="comment">// * 06/97 @db added new functions:</font>
00019 <font class="comment">//</font>
00020 <font class="comment">//   virtual bool Supervisor::isSupervisor() const;</font>
00021 <font class="comment">//   void Supervisor::supervise( );</font>
00022 <font class="comment">//</font>
00023 
00024 
00025 <font class="preprocessor">#ifndef _SUPERVISOR_H_</font>
00026 <font class="preprocessor"></font><font class="preprocessor">#define _SUPERVISOR_H_</font>
00027 <font class="preprocessor"></font>
00028 
00029 <font class="preprocessor">#include "<a class="code" href="ARC_h.html">ARC.h</a>"</font>
00030 <font class="preprocessor">#include "<a class="code" href="ARCSlotID_h.html">ARCSlotID.h</a>"</font>
00031 <font class="preprocessor">#include "<a class="code" href="OID_h.html">OID.h</a>"</font>
00032 <font class="preprocessor">#include "<a class="code" href="Associations_h.html">Associations.h</a>"</font>
00033 <font class="preprocessor">#include "<a class="code" href="viewStructure_h.html">viewStructure.h</a>"</font>
00034 <font class="preprocessor">#include "<a class="code" href="ComputationManager_h.html">ComputationManager.h</a>"</font>
00035 <font class="preprocessor">#include "<a class="code" href="TheObjects_h.html">TheObjects.h</a>"</font>
00036 
00037 
00038 <font class="comment">// A computation manager (CM) might supervise a fixed number (i.e., known</font>
00039 <font class="comment">// at compile time) of other CMs. We must support this functionality:</font>
00040 <font class="comment">// </font>
00041 <font class="comment">//   - The subordinate CMs may need to be exported to the rest of the</font>
00042 <font class="comment">//     system, so that resources may be allocated to them, and they can</font>
00043 <font class="comment">//     be queried for results.</font>
00044 <font class="comment">// </font>
00045 <font class="comment">//   - A subordinate CM should not be created (and thus consume memory</font>
00046 <font class="comment">//     and CPU time) until it is asked for.</font>
00047 <font class="comment">// </font>
00048 <font class="comment">//   - Messages may arrive instructing the supervising CM to allocate</font>
00049 <font class="comment">//     resources to a subordinate, so the latter must be located</font>
00050 <font class="comment">//     easily. Since it may not exist at the time the FE is told about</font>
00051 <font class="comment">//     its *potential* existence, the FE cannot refer to an object id.</font>
00052 <font class="comment">// </font>
00053 <font class="comment">// </font>
00054 <font class="comment">// The facilities declared here automate this process. When a computation</font>
00055 <font class="comment">// manager `boss' of class B is to supervise a subordinate computation</font>
00056 <font class="comment">// manager of class W, B has a data member `worker' of class</font>
00057 <font class="comment">// Subordinate&lt;B,W&gt;. If worker is to be exported, this member is public.</font>
00058 <font class="comment">// The members of the W are accessed via the overloaded -&gt; operator. For</font>
00059 <font class="comment">// example:</font>
00060 <font class="comment">// </font>
00061 <font class="comment">//     if ( boss.worker-&gt;state() == ComputationManager::RUNNING ) ...</font>
00062 <font class="comment">// </font>
00063 <font class="comment">// The operator invocation creates the W if necessary.</font>
00064 <font class="comment">// </font>
00065 <font class="comment">// The reason that Subordinate&lt;B,W&gt; does not return a W&amp; is that someone</font>
00066 <font class="comment">// might erroneously store the W&amp; as, for example, a class data</font>
00067 <font class="comment">// member. The problem is that the system may not know about this</font>
00068 <font class="comment">// dependence on the W, so the W may be deleted, leaving a dangling</font>
00069 <font class="comment">// reference.</font>
00070 <font class="comment">// </font>
00071 <font class="comment">// Now, it it possible to extract the W* from operator-&gt;(), and this is</font>
00072 <font class="comment">// safe within a function body, but you must NEVER, *EVER* STORE THE</font>
00073 <font class="comment">// RESULT OF operator-&gt;() beyond the duration of a function body. This</font>
00074 <font class="comment">// would create the worst possible bug: one that is unlikely to turn up</font>
00075 <font class="comment">// *even in testing*, since it depends on just the right sequence of end</font>
00076 <font class="comment">// user events. The convoluted syntax of operator-&gt;() should remind you</font>
00077 <font class="comment">// of this dire peril.</font>
00078 <font class="comment">// </font>
00079 <font class="comment">// There appears to be no better solution. One could return an</font>
00080 <font class="comment">// intermediate object, with disabled copying, which duplicates the</font>
00081 <font class="comment">// needed parts of W's interface. One could arrange that the object is</font>
00082 <font class="comment">// always a temporary, so that attempts to store a reference or its</font>
00083 <font class="comment">// address would (hopefully) trigger a compiler warning. But it must be</font>
00084 <font class="comment">// the case that a sufficiently complex expression would evaluate to the</font>
00085 <font class="comment">// illicit reference or pointer, but fool the compiler. In fact, try</font>
00086 <font class="comment">// compiling this with gcc 2.6.3 and -Wall:</font>
00087 <font class="comment">//  </font>
00088 <font class="comment">//  #include &lt;iostream.h&gt;</font>
00089 <font class="comment">//  </font>
00090 <font class="comment">//  struct Foo { ~Foo( ) { cerr &lt;&lt; "Kiss your Foo goodbye!\n" &lt;&lt; flush; } };</font>
00091 <font class="comment">//  </font>
00092 <font class="comment">//  struct Bar {</font>
00093 <font class="comment">//    Bar(const Foo&amp; f) : F( f ) { }</font>
00094 <font class="comment">//    ~Bar( ) { cerr &lt;&lt; "Kiss your Bar goodbye!\n" &lt;&lt; flush; }</font>
00095 <font class="comment">//    const Foo&amp; F;</font>
00096 <font class="comment">//  };</font>
00097 <font class="comment">//  </font>
00098 <font class="comment">//  struct Baz {</font>
00099 <font class="comment">//    Baz(const Foo&amp; f) : B( f ) { }</font>
00100 <font class="comment">//    Bar B;</font>
00101 <font class="comment">//  };</font>
00102 <font class="comment">//  </font>
00103 <font class="comment">//  main( ) {</font>
00104 <font class="comment">//    Baz* Bp = new Baz( Foo() );</font>
00105 <font class="comment">//    cerr &lt;&lt; "I have not deleted Bp yet!\n" &lt;&lt; flush;</font>
00106 <font class="comment">//    delete Bp;</font>
00107 <font class="comment">//  }</font>
00108 <font class="comment">//</font>
00109 <font class="comment">// </font>
00110 <font class="comment">// In some cases, a computation manager might `supervise' another only in</font>
00111 <font class="comment">// that it presents a view to the end user for passing ARCs to a CM,</font>
00112 <font class="comment">// which is actually supervised by a third CM. For this case, we use</font>
00113 <font class="comment">// class MirrorSubordinate.</font>
00114 <font class="comment">// </font>
00115 <font class="comment">// The facilites here can not be used for CMs, like the nilpotent</font>
00116 <font class="comment">// quotients CM, which must supervise an unbounded number of subordinate</font>
00117 <font class="comment">// CMs (class 2, class 3, ...).</font>
00118 <font class="comment">//</font>
00119 <font class="comment">// The mixin class Supervisor arranges for locating subordinate CMs, given</font>
00120 <font class="comment">// a `virtual OID', called, for `historical' reasons, an ARCSlotID.</font>
00121 
00122 
00123 <font class="comment">//---------------------------------------------------------------------------//</font>
00124 <font class="comment">//--------------------------- Subordinate -----------------------------------//</font>
00125 <font class="comment">//---------------------------------------------------------------------------//</font>
00126 
00127 <font class="comment">// As usual, we cannot hide a template class in class Supervisor.</font>
00128 
<a name="l00129"></a><a class="code" href="class_SubordinateBase.html">00129</a> <font class="keyword">class </font><a class="code" href="class_SubordinateBase.html">SubordinateBase</a>
00130 {
00131 <font class="keyword">public</font>:
00132 
00133   <a class="code" href="class_SubordinateBase.html#a0">SubordinateBase</a>(<font class="keyword">class</font> <a class="code" href="class_Supervisor.html">Supervisor</a>&amp; boss);
00134 
<a name="l00135"></a><a class="code" href="class_SubordinateBase.html#a1">00135</a>   <a class="code" href="class_ARCSlotID.html">ARCSlotID</a> <a class="code" href="class_SubordinateBase.html#a1">arcSlotID</a>( )<font class="keyword"> const </font>{ <font class="keywordflow">return</font> asi; }
00136   <font class="comment">// This is used by class Supervisor as a `virtual OID'. That is, a</font>
00137   <font class="comment">// derivative of SubordinateBase can announce that either it wraps a</font>
00138   <font class="comment">// ComputationManager now, or will do in the future. The ARCSlotID</font>
00139   <font class="comment">// is the means by which the FE refers to this `virtual'</font>
00140   <font class="comment">// ComputationManager, since it may not have a real OID yet.</font>
00141 
00142   <font class="keyword">virtual</font> <a class="code" href="class_Supervisor.html">Supervisor</a>&amp; <a class="code" href="class_SubordinateBase.html#a2">getBoss</a>( ) <font class="keyword">const</font> = 0;
00143 
00144   <font class="keyword">virtual</font> <a class="code" href="class_ComputationManager.html">ComputationManager</a>* <a class="code" href="class_SubordinateBase.html#a3">getWorker</a>( ) <font class="keyword">const</font> = 0;
00145 
00146   <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="class_SubordinateBase.html#a4">terminateWorker</a>( ) = 0;
00147 
00148   <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="class_SubordinateBase.html#a5">deleteWorker</a>() = 0;
00149   
00150   <font class="keyword">virtual</font> <font class="keywordtype">bool</font> <a class="code" href="class_SubordinateBase.html#a6">exists</a>( ) <font class="keyword">const</font> = 0;
00151   <font class="comment">// For querying existence of subordinate without triggering same.</font>
00152 
00153   
00154 <font class="keyword">protected</font>:
00155 
<a name="l00156"></a><a class="code" href="class_SubordinateBase.html#l0">00156</a>   <font class="keyword">friend</font> <font class="keyword">class </font><a class="code" href="class_Supervisor.html">Supervisor</a>;
00157 
00158   <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="class_SubordinateBase.html#b0">acceptAllocation</a>(<a class="code" href="class_OID.html">OID</a> oid, <a class="code" href="class_ARCSlotID.html">ARCSlotID</a>, <a class="code" href="class_ARC.html">ARC</a>, <font class="keywordtype">bool</font> overrides=<font class="keyword">true</font>)=0;
00159   <font class="comment">// Used by class Supervisor.</font>
00160 
00161   <font class="keywordtype">void</font> <a class="code" href="class_SubordinateBase.html#b1">addDependent</a>( <a class="code" href="class_SMObject.html">SMObject</a>&amp; smo, <a class="code" href="class_OID.html">OID</a> oid ) <font class="keyword">const</font>;
00162   <font class="comment">// So derivatives need not be friends of SMObject.</font>
00163 
00164 <font class="keyword">private</font>:
00165 
00166   <a class="code" href="class_SubordinateBase.html#a0">SubordinateBase</a>( <font class="keyword">const</font> <a class="code" href="class_SubordinateBase.html">SubordinateBase</a>&amp; );
00167   <font class="comment">// Hidden, not to be implemented.</font>
00168 
<a name="l00169"></a><a class="code" href="class_SubordinateBase.html#o0">00169</a>   <a class="code" href="class_ARCSlotID.html">ARCSlotID</a> asi;
00170 };
00171 
00172 
00173 <font class="comment">// Class Subordinate&lt;B,W&gt; assumes that:</font>
00174 <font class="comment">//</font>
00175 <font class="comment">//  1) Class B derives from class Supervisor.</font>
00176 <font class="comment">//  2) Class W derives from class ComputationManager.</font>
00177 <font class="comment">//  3) Class W has a constructor which takes a B.</font>
00178 
<a name="l00179"></a><a class="code" href="class_Subordinate.html">00179</a> template &lt;class B, class W&gt; <font class="keyword">class </font><a class="code" href="class_Subordinate.html">Subordinate</a> : <font class="keyword">public</font> <a class="code" href="class_SubordinateBase.html">SubordinateBase</a>
00180 {
00181 
<a name="l00182"></a><a class="code" href="class_Subordinate.html#l0">00182</a> <font class="keyword">friend</font> <font class="keyword">class </font><a class="code" href="class_MirrorSubordinate.html">MirrorSubordinate</a>;
00183   
00184 <font class="keyword">public</font>:
00185 
<a name="l00186"></a><a class="code" href="class_Subordinate.html#a0">00186</a>   <a class="code" href="class_Subordinate.html#a0">Subordinate</a>(B&amp; boss)
00187     : <a class="code" href="class_SubordinateBase.html">SubordinateBase</a>( boss ), theBoss( boss ), theWorker( 0 )
00188   { }
00189 
00190   <font class="comment">// This does not need a dtor; since *theWorker is a dependent of the</font>
00191   <font class="comment">// supervisor, TheObjects deletes *theWorker when it deletes the</font>
00192   <font class="comment">// supervisor.</font>
00193 
00194   <font class="comment">// *** DANGER *** see below *** DANGER *** //</font>
<a name="l00195"></a><a class="code" href="class_Subordinate.html#a1">00195</a>   W* <a class="code" href="class_Subordinate.html#a1">operator -&gt; </a>( )<font class="keyword"> </font>{
00196          <font class="keywordflow">if</font> ( ! theWorker ) {
00197                 theWorker = <font class="keyword">new</font> W( theBoss );
00198                 theWorker-&gt;attachClient( theBoss );
00199                 <a class="code" href="class_SubordinateBase.html#b1">addDependent</a>( theBoss, theWorker-&gt;oid() );
00200          }
00201          <font class="keywordflow">return</font> theWorker;
00202   }
00203   <font class="comment">// *** YOU MUST NEVER, EVER STORE THE W* EXCEPT AS AN AUTOMATIC *** //</font>
00204   <font class="comment">// *** VARIABLE IN A FUNCTION BODY. See the comments above.     *** //</font>
00205   <font class="comment">// This is inlined for now to avoid the explicit template instantiation</font>
00206   <font class="comment">// required by gcc 2.6.3.</font>
00207 
<a name="l00208"></a><a class="code" href="class_Subordinate.html#a2">00208</a>   <a class="code" href="class_Supervisor.html">Supervisor</a>&amp; <a class="code" href="class_SubordinateBase.html#a2">getBoss</a>( )<font class="keyword"> const </font>{ <font class="keywordflow">return</font> theBoss; } <font class="comment">// overrides SubordinateBase</font>
00209 
<a name="l00210"></a><a class="code" href="class_Subordinate.html#a3">00210</a>   <a class="code" href="class_ComputationManager.html">ComputationManager</a>* <a class="code" href="class_SubordinateBase.html#a3">getWorker</a>( )<font class="keyword"> const </font>{ <font class="keywordflow">return</font> theWorker; }
00211   <font class="comment">// overrides SubordinateBase</font>
00212 
<a name="l00213"></a><a class="code" href="class_Subordinate.html#a4">00213</a>   <font class="keywordtype">void</font> <a class="code" href="class_SubordinateBase.html#a4">terminateWorker</a>( )<font class="keyword"></font>
00214 <font class="keyword">  </font>{
00215       <font class="keywordflow">if</font> ( theWorker ){
00216          theWorker-&gt;adminTerminate();
00217          <a class="code" href="class_SubordinateBase.html#a5">deleteWorker</a>();
00218       }
00219   }
00220 
<a name="l00221"></a><a class="code" href="class_Subordinate.html#a5">00221</a>   <font class="keywordtype">bool</font> <a class="code" href="class_SubordinateBase.html#a6">exists</a>( )<font class="keyword"> const </font>{ <font class="keywordflow">return</font> theWorker != 0; }  <font class="comment">// overrides SubordinateBase</font>
00222 
00223 <font class="keyword">protected</font>:
00224 
<a name="l00225"></a><a class="code" href="class_Subordinate.html#b0">00225</a>   <font class="keywordtype">void</font> <a class="code" href="class_SubordinateBase.html#b0">acceptAllocation</a>(<a class="code" href="class_OID.html">OID</a> oid, <a class="code" href="class_ARCSlotID.html">ARCSlotID</a> asi, <a class="code" href="class_ARC.html">ARC</a> arc, <font class="keywordtype">bool</font> overrides)<font class="keyword"> </font>{
00226          <font class="comment">// Overrides SubordinateBase.</font>
00227          <font class="comment">// Do not make theWorker only to give it 0 ARCs:</font>
00228          <font class="keywordflow">if</font> ( theWorker || arc ) {
00229                 ( <a class="code" href="class_Subordinate.html#a1">operator-&gt;</a>() )-&gt;acceptAllocation( oid, asi, arc, overrides );
00230          }
00231   }
00232 
00233 <font class="keyword">private</font>:
00234 
<a name="l00235"></a><a class="code" href="class_Subordinate.html#c0">00235</a>   <font class="keywordtype">void</font> <a class="code" href="class_SubordinateBase.html#a5">deleteWorker</a>()<font class="keyword"></font>
00236 <font class="keyword">  </font>{
00237     <a class="code" href="class_TheObjects.html#d2">TheObjects::remove</a>( theWorker-&gt;oid() );
00238     theWorker = 0;
00239   }
00240   
00241   <font class="comment">//Data members:</font>
00242   
<a name="l00243"></a><a class="code" href="class_Subordinate.html#o0">00243</a>   B&amp; theBoss;
00244   
<a name="l00245"></a><a class="code" href="class_Subordinate.html#o1">00245</a>   W* theWorker;
00246 };
00247 
00248 
<a name="l00249"></a><a class="code" href="class_MirrorSubordinate.html">00249</a> <font class="keyword">class </font><a class="code" href="class_MirrorSubordinate.html">MirrorSubordinate</a> : <font class="keyword">public</font> <a class="code" href="class_SubordinateBase.html">SubordinateBase</a>
00250 {
00251 <font class="keyword">public</font>:
00252 
00253   <a class="code" href="class_MirrorSubordinate.html#a0">MirrorSubordinate</a>(<font class="keyword">class</font> <a class="code" href="class_Supervisor.html">Supervisor</a>&amp; boss, <a class="code" href="class_SubordinateBase.html">SubordinateBase</a>&amp;);
00254 
<a name="l00255"></a><a class="code" href="class_MirrorSubordinate.html#a1">00255</a>   <a class="code" href="class_Supervisor.html">Supervisor</a>&amp; <a class="code" href="class_SubordinateBase.html#a2">getBoss</a>( )<font class="keyword"> const </font>{ <font class="keywordflow">return</font> theBoss; }
00256   <font class="comment">// overrides SubordinateBase</font>
00257 
<a name="l00258"></a><a class="code" href="class_MirrorSubordinate.html#a2">00258</a>   <font class="keywordtype">bool</font> <a class="code" href="class_SubordinateBase.html#a6">exists</a>( )<font class="keyword"> const </font>{ <font class="keywordflow">return</font> mirror.<a class="code" href="class_SubordinateBase.html#a6">exists</a>(); }
00259   <font class="comment">// overrides SubordinateBase</font>
00260 
00261   <a class="code" href="class_ComputationManager.html">ComputationManager</a>* <a class="code" href="class_SubordinateBase.html#a3">getWorker</a>( ) <font class="keyword">const</font>;
00262   <font class="comment">// overrides SubordinateBase</font>
00263   <font class="comment">//@db temporary hack</font>
00264 
00265   <font class="keywordtype">void</font> <a class="code" href="class_SubordinateBase.html#a4">terminateWorker</a>( );
00266 
00267   <font class="keywordtype">void</font> <a class="code" href="class_SubordinateBase.html#a5">deleteWorker</a>(); 
00268   
00269 <font class="keyword">protected</font>:
00270 
00271   <font class="keywordtype">void</font> <a class="code" href="class_SubordinateBase.html#b0">acceptAllocation</a>(<a class="code" href="class_OID.html">OID</a> oid, <a class="code" href="class_ARCSlotID.html">ARCSlotID</a> asi, <a class="code" href="class_ARC.html">ARC</a> arc, <font class="keywordtype">bool</font> overrides);
00272   <font class="comment">// Overrides SubordinateBase.</font>
00273 
00274 <font class="keyword">private</font>:
00275 
<a name="l00276"></a><a class="code" href="class_MirrorSubordinate.html#o0">00276</a>   <font class="keyword">class </font><a class="code" href="class_Supervisor.html">Supervisor</a>&amp; theBoss;
00277 
<a name="l00278"></a><a class="code" href="class_MirrorSubordinate.html#o1">00278</a>   <a class="code" href="class_SubordinateBase.html">SubordinateBase</a>&amp; mirror;
00279 
<a name="l00280"></a><a class="code" href="class_MirrorSubordinate.html#o2">00280</a>   <font class="keywordtype">bool</font> firstAccessToWorker;
00281 };
00282 
00283 
00284 <font class="comment">//---------------------------------------------------------------------------//</font>
00285 <font class="comment">//--------------------------- Supervisor ------------------------------------//</font>
00286 <font class="comment">//---------------------------------------------------------------------------//</font>
00287 
00288 <font class="comment">// The purpose of class Supervisor is only to allow for locating the</font>
00289 <font class="comment">// appropriate Subordinate, given its ARCSlotID. In cooperation with</font>
00290 <font class="comment">// the SubordinateBase ctor, this assigns ARCSlotIDs.</font>
00291 
<a name="l00292"></a><a class="code" href="class_Supervisor.html">00292</a> <font class="keyword">class </font><a class="code" href="class_Supervisor.html">Supervisor</a> : <font class="keyword">public</font> <a class="code" href="class_ComputationManager.html">ComputationManager</a>
00293 {
00294 <font class="keyword">public</font>:
00295   
<a name="l00296"></a><a class="code" href="class_Supervisor.html#a0">00296</a>   <font class="keywordtype">bool</font> <a class="code" href="class_ComputationManager.html#a5">isSupervisor</a>( )<font class="keyword"> const </font>{ <font class="keywordflow">return</font> <font class="keyword">true</font>; }
00297 
00298   <font class="keywordtype">void</font> <a class="code" href="class_Supervisor.html#a1">supervise</a>( );
00299   <font class="comment">// checks and conrols dependents, then calls it's own takeControl()</font>
00300   
00301 <font class="keyword">protected</font>:
00302 
<a name="l00303"></a><a class="code" href="class_Supervisor.html#n0">00303</a>   <font class="keyword">friend</font> <a class="code" href="class_MirrorSubordinate.html">MirrorSubordinate</a>;
00304 
<a name="l00305"></a><a class="code" href="class_Supervisor.html#b0">00305</a>   <a class="code" href="class_ComputationManager.html#l3">Supervisor</a>( <font class="keywordtype">bool</font> display_in_fe )
00306     : <a class="code" href="class_ComputationManager.html">ComputationManager</a>( display_in_fe ), ARCSlotID_Counter( 1 ),
00307       theParameters( NULL )
00308   { 
00309     <font class="keywordflow">if</font>( display_in_fe ) 
00310       <a class="code" href="class_ComputationManager.html#a16">attachClient</a>( *<font class="keyword">this</font> );
00311   }
00312 
00313   <font class="keywordtype">void</font> <a class="code" href="class_ComputationManager.html#b0">readMessage</a>(istream&amp; istr);  <font class="comment">// Overrides ComputationManager</font>
00314 
00315   <font class="keywordtype">void</font> <a class="code" href="class_Supervisor.html#b2">forwardAllocation</a>(<a class="code" href="class_OID.html">OID</a> oid, <a class="code" href="class_ARCSlotID.html">ARCSlotID</a> to, <a class="code" href="class_ARCSlotID.html">ARCSlotID</a> from, <a class="code" href="class_ARC.html">ARC</a> arc,
00316                          <font class="keywordtype">bool</font> overrides);
00317 
00318   <font class="keywordtype">void</font> <a class="code" href="class_ComputationManager.html#a22">adminTerminate</a>( );
00319   
<a name="l00320"></a><a class="code" href="class_Supervisor.html#b4">00320</a>   <font class="keywordtype">void</font> <a class="code" href="class_Supervisor.html#b4">submit</a>(ostream&amp; ostr,<font class="keyword">const</font> <a class="code" href="class_EnumertatorProblemView.html">EnumertatorProblemView</a>&amp; pv)<font class="keyword"> const </font>{
00321     <a class="code" href="class_Supervisor.html">Supervisor</a>* This = (<a class="code" href="class_Supervisor.html">Supervisor</a>* )<font class="keyword">this</font>;
00322     This-&gt;theParameters = <font class="keyword">new</font> ParameterStructure(pv.<a class="code" href="class_EnumertatorProblemView.html#a4">extractParameters</a>());
00323     pv.<a class="code" href="class_EnumertatorProblemView.html#a3">done</a>( ostr );
00324   }
00325   
<a name="l00326"></a><a class="code" href="class_Supervisor.html#b5">00326</a>   <font class="keyword">const</font> <a class="code" href="class_ParameterStructure.html">ParameterStructure</a>&amp; <a class="code" href="class_Supervisor.html#b5">getParameters</a>()<font class="keyword">const</font>{
00327     <font class="keywordflow">if</font> (theParameters == NULL)
00328       <a class="code" href="error_h.html#a0">error</a>(<font class="stringliteral">"const ParameterStructure&amp; getParameters()const : "</font>
00329             <font class="stringliteral">"viewStructure was not submited yet."</font>);
00330     <font class="keywordflow">return</font> *theParameters;
00331   }
00332   
00333 <font class="keyword">private</font>:
00334 
00335   <a class="code" href="class_SubordinateBase.html">SubordinateBase</a>* <a class="code" href="class_Supervisor.html#c0">dereference</a>(<a class="code" href="class_ARCSlotID.html">ARCSlotID</a> asi) <font class="keyword">const</font>;
00336   <font class="comment">// This returns the SubordinateBase with the given ARCSlotID. For</font>
00337   <font class="comment">// robustness, it may return 0 if something has gone wrong.</font>
00338 <font class="comment"></font>
00339 <font class="comment">  /////////////////////////////////////////////////////////////////////////</font>
00340 <font class="comment"></font>  <font class="comment">//                                                                     //</font>
00341   <font class="comment">// `Public' Members Touched by Friends:                                //</font>
00342   <font class="comment">//                                                                     //</font><font class="comment"></font>
00343 <font class="comment">  /////////////////////////////////////////////////////////////////////////</font>
00344 <font class="comment"></font>
<a name="l00345"></a><a class="code" href="class_Supervisor.html#l0">00345</a>   <font class="keyword">friend</font> <font class="keyword">class </font><a class="code" href="class_SubordinateBase.html">SubordinateBase</a>;
00346 
00347   <a class="code" href="class_ARCSlotID.html">ARCSlotID</a> <a class="code" href="class_Supervisor.html#c1">hire</a>( <a class="code" href="class_SubordinateBase.html">SubordinateBase</a>* worker );
00348 <font class="comment"></font>
00349 <font class="comment">  /////////////////////////////////////////////////////////////////////////</font>
00350 <font class="comment"></font>  <font class="comment">//                                                                     //</font>
00351   <font class="comment">// Data Members:                                                       //</font>
00352   <font class="comment">//                                                                     //</font><font class="comment"></font>
00353 <font class="comment">  /////////////////////////////////////////////////////////////////////////</font>
00354 <font class="comment"></font>
<a name="l00355"></a><a class="code" href="class_Supervisor.html#o0">00355</a>   <a class="code" href="class_AssociationsOf.html">AssociationsOf&lt;int,SubordinateBase*&gt;</a> theWorkers;
<a name="l00356"></a><a class="code" href="class_Supervisor.html#o1">00356</a>   <a class="code" href="class_AssociationsOf.html">AssociationsOf&lt;int,bool&gt;</a> theCrashedWorkers;
00357 
<a name="l00358"></a><a class="code" href="class_Supervisor.html#o2">00358</a>   <font class="keywordtype">int</font> ARCSlotID_Counter;
00359   <font class="comment">// By convention, ARCSlotID 0 always refers to the supervisor, so</font>
00360   <font class="comment">// this counter starts at 1.</font>
00361 
<a name="l00362"></a><a class="code" href="class_Supervisor.html#o3">00362</a>    <a class="code" href="class_ParameterStructure.html">ParameterStructure</a>* theParameters;
00363 
00364 };
00365 
00366 
00367 <font class="comment">//---------------------------------------------------------------------------//</font>
00368 <font class="comment">//----------------------- UnboundedSupervisor -------------------------------//</font>
00369 <font class="comment">//---------------------------------------------------------------------------//</font>
00370 
00371 <font class="comment">// This is an experimental class (ok, kludge) which allows supervisors of</font>
00372 <font class="comment">// an unbounded number of CMs to get ad hoc access to private methods of</font>
00373 <font class="comment">// TheObjects and SMObject.</font>
00374 
<a name="l00375"></a><a class="code" href="class_UnboundedSupervisor.html">00375</a> <font class="keyword">class </font><a class="code" href="class_UnboundedSupervisor.html">UnboundedSupervisor</a> : <font class="keyword">public</font> <a class="code" href="class_ComputationManager.html">ComputationManager</a>
00376 {
00377 <font class="keyword">protected</font>:
00378 
<a name="l00379"></a><a class="code" href="class_UnboundedSupervisor.html#b0">00379</a>   <a class="code" href="class_SMObject.html#l9">UnboundedSupervisor</a>( <font class="keywordtype">bool</font> display_in_fe )
00380     : <a class="code" href="class_ComputationManager.html">ComputationManager</a>( display_in_fe )
00381   { }
00382 
<a name="l00383"></a><a class="code" href="class_UnboundedSupervisor.html#b1">00383</a>   <font class="keywordtype">void</font> <a class="code" href="class_UnboundedSupervisor.html#b1">remove</a>(<a class="code" href="class_OID.html">OID</a> oid)<font class="keyword"> </font>{ <a class="code" href="class_TheObjects.html#d2">TheObjects::remove</a>( oid ); }
00384 
<a name="l00385"></a><a class="code" href="class_UnboundedSupervisor.html#b2">00385</a>   <font class="keywordtype">void</font> <a class="code" href="class_SMObject.html#c1">addDependent</a>(<a class="code" href="class_OID.html">OID</a> oid)<font class="keyword"> </font>{ <a class="code" href="class_SMObject.html#c1">SMObject::addDependent</a>( oid ); }
00386 
00387 };
00388 
00389 <font class="preprocessor">#endif</font>
</font></pre></div><hr><address><small>Generated at Tue Jun 19 09:49:39 2001 for Magnus Classes by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.6 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2001</small></address>
</body>
</html>
