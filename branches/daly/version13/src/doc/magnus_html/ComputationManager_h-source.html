<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta name="robots" content="noindex">
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>/magnus/back_end/SessionManager/include/ComputationManager.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.6 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>/magnus/back_end/SessionManager/include/ComputationManager.h</h1><a href="ComputationManager_h.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <font class="comment">/*</font>
00002 <font class="comment"> *   $Id: ComputationManager.h,v 1.9 2000/02/10 00:11:42 bormotov Exp $</font>
00003 <font class="comment"> */</font>
00004  
00005 <font class="comment">// Copyright (C) 1995 The New York Group Theory Cooperative</font>
00006 <font class="comment">// See magnus/doc/COPYRIGHT for the full notice.</font>
00007 <font class="comment">//</font>
00008 <font class="comment">// Contents: Declaration of class ComputationManager</font>
00009 <font class="comment">//</font>
00010 <font class="comment">// Principal Author: Roger Needham, Dmitry Bormotov</font>
00011 <font class="comment">//</font>
00012 <font class="comment">// Status: in progress</font>
00013 <font class="comment">//</font>
00014 <font class="comment">// Revision History:</font>
00015 <font class="comment">//</font>
00016 <font class="comment">// * 07/96 Dmitry B. made porting to gcc 2.7.2.</font>
00017 <font class="comment">//</font>
00018 <font class="comment">// * 06/97 @db added new functions:</font>
00019 <font class="comment">//</font>
00020 <font class="comment">//   bool crashed( ) const;</font>
00021 <font class="comment">//   virtual Chars getCrashMessage( ) const;</font>
00022 <font class="comment">//   virtual bool isSupervisor() const;</font>
00023 <font class="comment">//</font>
00024 <font class="comment">// * 03/98 @dp added new functions:</font>
00025 <font class="comment">//</font>
00026 <font class="comment">//    void attachClient( OID client );</font>
00027 <font class="comment">//    void detachClient( OID client );</font>
00028 <font class="comment">//    SetOf&lt;OID&gt; getClients( ) const;</font>
00029 
00030 <font class="preprocessor">#ifndef _COMPUTATIONMANAGER_H_</font>
00031 <font class="preprocessor"></font><font class="preprocessor">#define _COMPUTATIONMANAGER_H_</font>
00032 <font class="preprocessor"></font>
00033 
00034 <font class="preprocessor">#include "<a class="code" href="SMObject_h.html">SMObject.h</a>"</font>
00035 <font class="preprocessor">#include "<a class="code" href="ResourceManager_h.html">ResourceManager.h</a>"</font>
00036 <font class="preprocessor">#include "<a class="code" href="TheObjects_h.html">TheObjects.h</a>"</font>
00037 <font class="preprocessor">#include "<a class="code" href="ARCer_h.html">ARCer.h</a>"</font>
00038 
00039 <font class="comment">//---------------------------------------------------------------------------//</font>
00040 <font class="comment">//------------------------ ComputationManager -------------------------------//</font>
00041 <font class="comment">//---------------------------------------------------------------------------//</font>
00042 
00043 <font class="keyword">class </font><a class="code" href="class_ARCer.html">ARCer</a>;
00044 
00045 
<a name="l00046"></a><a class="code" href="class_ComputationManager.html">00046</a> <font class="keyword">class </font><a class="code" href="class_ComputationManager.html">ComputationManager</a> : <font class="keyword">public</font> <a class="code" href="class_SMObject.html">SMObject</a>, <font class="keyword">public</font> <a class="code" href="class_ResourceManager.html">ResourceManager</a>
00047 {
00048 
<a name="l00049"></a><a class="code" href="class_ComputationManager.html#l0">00049</a>   <font class="keyword">friend</font> <font class="keyword">class </font><a class="code" href="class_ARCer.html">ARCer</a>;
<a name="l00050"></a><a class="code" href="class_ComputationManager.html#l1">00050</a>   <font class="keyword">friend</font> <font class="keyword">class </font>RelatorEnumeratorARCer;
<a name="l00051"></a><a class="code" href="class_ComputationManager.html#l2">00051</a>   <font class="keyword">friend</font> <font class="keyword">class </font><a class="code" href="class_ExternalARCer.html">ExternalARCer</a>;
<a name="l00052"></a><a class="code" href="class_ComputationManager.html#l3">00052</a>   <font class="keyword">friend</font> <font class="keyword">class </font><a class="code" href="class_Supervisor.html">Supervisor</a>;
00053 
00054 <font class="keyword">public</font>:
00055 
<a name="l00056"></a><a class="code" href="class_ComputationManager.html#s4">00056</a>   <font class="keyword">enum</font> State { UNSTARTED, RUNNING, SUSPENDED, TERMINATED };
00057 <font class="comment"></font>
00058 <font class="comment">  /////////////////////////////////////////////////////////////////////////</font>
00059 <font class="comment"></font>  <font class="comment">//                                                                     //</font>
00060   <font class="comment">// Constructors:                                                       //</font>
00061   <font class="comment">//                                                                     //</font><font class="comment"></font>
00062 <font class="comment">  /////////////////////////////////////////////////////////////////////////</font>
00063 <font class="comment"></font>
00064   <a class="code" href="class_ComputationManager.html#a0">ComputationManager</a>( <font class="keywordtype">bool</font> display_in_fe = <font class="keyword">false</font> );
00065 
00066   <a class="code" href="class_ComputationManager.html#a1">~ComputationManager</a>( );
00067 <font class="comment"></font>
00068 <font class="comment">  /////////////////////////////////////////////////////////////////////////</font>
00069 <font class="comment"></font>  <font class="comment">//                                                                     //</font>
00070   <font class="comment">// Accessors:                                                          //</font>
00071   <font class="comment">//                                                                     //</font><font class="comment"></font>
00072 <font class="comment">  /////////////////////////////////////////////////////////////////////////</font>
00073 <font class="comment"></font>
00074   State <a class="code" href="class_ComputationManager.html#a2">state</a>( ) <font class="keyword">const</font>;
00075 
<a name="l00076"></a><a class="code" href="class_ComputationManager.html#a3">00076</a>   <font class="keywordtype">bool</font> <a class="code" href="class_ComputationManager.html#a3">crashed</a>( )<font class="keyword"> const </font>{ <font class="keywordflow">return</font> isCrashed; }
00077 
<a name="l00078"></a><a class="code" href="class_ComputationManager.html#a4">00078</a>   <font class="keyword">virtual</font> <a class="code" href="class_Chars.html">Chars</a> <a class="code" href="class_ComputationManager.html#a4">getCrashMessage</a>( )<font class="keyword"> const </font>{ <font class="keywordflow">return</font> <font class="stringliteral">""</font>; }
00079   <font class="comment">// Override this function to change the default crash message </font>
00080   
<a name="l00081"></a><a class="code" href="class_ComputationManager.html#a5">00081</a>   <font class="keyword">virtual</font> <font class="keywordtype">bool</font> <a class="code" href="class_ComputationManager.html#a5">isSupervisor</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> <font class="keyword">false</font>; }
00082   
00083   <a class="code" href="class_Chars.html">Chars</a> <a class="code" href="class_ComputationManager.html#a6">helpID</a>( <font class="keyword">const</font> <a class="code" href="class_Chars.html">Chars</a>&amp; problemName, <font class="keyword">const</font> <a class="code" href="class_SMFPGroup.html">SMFPGroup</a>&amp; parent ) <font class="keyword">const</font>;
00084   <font class="comment">// This function returns a standard helpID ( page reference in the</font>
00085   <font class="comment">// magnus manual). It can be given to FE by supervisors. It is a</font>
00086   <font class="comment">// function of the ComputationManager class, because some of CMs can</font>
00087   <font class="comment">// be supervisors to others.</font>
00088 
00089 <font class="comment"></font>
00090 <font class="comment">  /////////////////////////////////////////////////////////////////////////</font>
00091 <font class="comment"></font>  <font class="comment">//                                                                     //</font>
00092   <font class="comment">// Front End Interfacing:                                              //</font>
00093   <font class="comment">//                                                                     //</font><font class="comment"></font>
00094 <font class="comment">  /////////////////////////////////////////////////////////////////////////</font>
00095 <font class="comment"></font>
00096   <font class="keyword">const</font> <font class="keywordtype">char</font>* <a class="code" href="class_SMObject.html#a2">typeID</a>( ) <font class="keyword">const</font>;                  <font class="comment">// overrides SMObject</font>
00097 
00098   <font class="keyword">const</font> <a class="code" href="class_IconID.html">IconID</a> <a class="code" href="class_SMObject.html#a3">iconID</a>( ) <font class="keyword">const</font>;                 <font class="comment">// overrides SMObject</font>
00099 
00100   <font class="keywordtype">void</font> <a class="code" href="class_SMObject.html#a4">viewStructure</a>(ostream&amp; ostr) <font class="keyword">const</font>;      <font class="comment">// overrides SMObject</font>
00101 
00102   <font class="keywordtype">void</font> <a class="code" href="class_SMObject.html#a5">printProperties</a>(ostream&amp; ostr) <font class="keyword">const</font>;    <font class="comment">// overrides SMObject  </font>
00103 
00104   <font class="keywordtype">void</font> <a class="code" href="class_SMObject.html#a6">printDefinition</a>(ostream&amp; ostr) <font class="keyword">const</font>;    <font class="comment">// overrides SMObject</font>
00105 
<a name="l00106"></a><a class="code" href="class_ComputationManager.html#a12">00106</a>   <font class="keywordtype">bool</font> <a class="code" href="class_SMObject.html#a7">displayInFE</a>( )<font class="keyword"> const </font>{ <font class="keywordflow">return</font> showMe; }  <font class="comment">// overrides SMObject</font>
00107 
00108   <font class="keyword">static</font> <font class="keywordtype">void</font> <a class="code" href="class_ComputationManager.html#d0">printGlobalMessageTemplates</a>(ostream&amp; ostr);
00109 <font class="comment"></font>
00110 <font class="comment">  /////////////////////////////////////////////////////////////////////////</font>
00111 <font class="comment"></font>  <font class="comment">//                                                                     //</font>
00112   <font class="comment">// Control:                                                            //</font>
00113   <font class="comment">//                                                                     //</font><font class="comment"></font>
00114 <font class="comment">  /////////////////////////////////////////////////////////////////////////</font>
00115 <font class="comment"></font>
00116   <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="class_ComputationManager.html#a13">takeControl</a>( ) = 0;
00117 
<a name="l00118"></a><a class="code" href="class_ComputationManager.html#a14">00118</a>   <font class="keywordtype">bool</font> <a class="code" href="class_ComputationManager.html#a14">fastResult</a>( )<font class="keyword"> const </font>{ <font class="keywordflow">return</font> amFast; }
00119   <font class="comment">// A derivative's ctor may decide that the result can be gotten so</font>
00120   <font class="comment">// quickly that there is no need, e.g., to create a problem object.</font>
00121 
00122   <font class="keywordtype">bool</font> <a class="code" href="class_ComputationManager.html#a15">checkForStall</a>( );
00123   <font class="comment">// Checks whether this is stalled (returns true if so), and sends</font>
00124   <font class="comment">// StateTransition if necessary.</font>
00125 
00126   <font class="keywordtype">void</font> <a class="code" href="class_ComputationManager.html#a16">attachClient</a>( <font class="keyword">const</font> <a class="code" href="class_SMObject.html">SMObject</a>&amp; client ); 
00127   <font class="keywordtype">void</font> <a class="code" href="class_ComputationManager.html#a17">detachClient</a>( <font class="keyword">const</font> <a class="code" href="class_SMObject.html">SMObject</a>&amp; client );
00128   <a class="code" href="class_SetOf.html">SetOf&lt;OID&gt;</a> <a class="code" href="class_ComputationManager.html#a18">getClients</a>( ) <font class="keyword">const</font>;
00129 <font class="comment"></font>
00130 <font class="comment">  /////////////////////////////////////////////////////////////////////////</font>
00131 <font class="comment"></font>  <font class="comment">//                                                                     //</font>
00132   <font class="comment">// State Transitions:                                                  //</font>
00133   <font class="comment">//                                                                     //</font><font class="comment"></font>
00134 <font class="comment">  /////////////////////////////////////////////////////////////////////////</font>
00135 <font class="comment"></font>
00136   <font class="comment">// To move into any of the four States, there is an administrative</font>
00137   <font class="comment">// member which handles the invariant stuff like informing the front</font>
00138   <font class="comment">// end of the change. For each of these, there is a virtual</font>
00139   <font class="comment">// counterpart, which is overridden to do the actual work required</font>
00140   <font class="comment">// by the state change.</font>
00141 
00142   <font class="keywordtype">void</font> <a class="code" href="class_ComputationManager.html#a19">adminStart</a>( );
00143 
00144   <font class="keywordtype">void</font> <a class="code" href="class_ComputationManager.html#a20">adminSuspend</a>( );
00145 
00146   <font class="keywordtype">void</font> <a class="code" href="class_ComputationManager.html#a21">adminResume</a>( );
00147 
00148   <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="class_ComputationManager.html#a22">adminTerminate</a>( );
00149 
<a name="l00150"></a><a class="code" href="class_ComputationManager.html#a23">00150</a>   <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="class_ComputationManager.html#a23">start</a>( )<font class="keyword"> </font>{ }
00151 
<a name="l00152"></a><a class="code" href="class_ComputationManager.html#a24">00152</a>   <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="class_ComputationManager.html#a24">suspend</a>( )<font class="keyword"> </font>{ }     <font class="comment">// Probably no need to override</font>
00153 
<a name="l00154"></a><a class="code" href="class_ComputationManager.html#a25">00154</a>   <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="class_ComputationManager.html#a25">resume</a>( )<font class="keyword"> </font>{ }      <font class="comment">// Probably no need to override</font>
00155 
<a name="l00156"></a><a class="code" href="class_ComputationManager.html#a26">00156</a>   <font class="keyword">virtual</font> <font class="keywordtype">void</font> <a class="code" href="class_ComputationManager.html#a26">terminate</a>( )<font class="keyword"> </font>{ }
00157 
00158 
00159 <font class="keyword">protected</font>:
00160 
00161   <font class="keywordtype">void</font> <a class="code" href="class_SMObject.html#b2">readMessage</a>(istream&amp; istr);  <font class="comment">// Overrides SMObject</font>
00162 
00163   <font class="keywordtype">void</font> <a class="code" href="class_ComputationManager.html#b1">resultIsFast</a>( );
00164   <font class="comment">// A derivative reports its quickness with this.</font>
00165 
00166 
00167 <font class="keyword">private</font>:
00168 
00169   <font class="keywordtype">void</font> <a class="code" href="class_ComputationManager.html#c0">hireArcer</a>( <a class="code" href="class_ARCer.html">ARCer</a>* arcer );
00170 
00171   <font class="keywordtype">void</font> <a class="code" href="class_ComputationManager.html#c1">terminateArcers</a>( );
00172 
00173   <font class="keywordtype">void</font> <a class="code" href="class_ComputationManager.html#c2">setCrashState</a>( );
00174   
00175 <font class="comment"></font>
00176 <font class="comment">  /////////////////////////////////////////////////////////////////////////</font>
00177 <font class="comment"></font>  <font class="comment">//                                                                     //</font>
00178   <font class="comment">// Data Members:                                                       //</font>
00179   <font class="comment">//                                                                     //</font><font class="comment"></font>
00180 <font class="comment">  /////////////////////////////////////////////////////////////////////////</font>
00181 <font class="comment"></font>
<a name="l00182"></a><a class="code" href="class_ComputationManager.html#o0">00182</a>   <a class="code" href="class_ListOf.html">ListOf&lt;ARCer*&gt;</a> theArcers;
00183 
<a name="l00184"></a><a class="code" href="class_ComputationManager.html#o1">00184</a>   <a class="code" href="class_SetOf.html">SetOf&lt;OID&gt;</a> theClients;
00185 
<a name="l00186"></a><a class="code" href="class_ComputationManager.html#o2">00186</a>   <font class="keywordtype">bool</font> amFast;
00187 
<a name="l00188"></a><a class="code" href="class_ComputationManager.html#o3">00188</a>   <font class="keywordtype">bool</font> showMe;
00189 
<a name="l00190"></a><a class="code" href="class_ComputationManager.html#o4">00190</a>   State theState;
00191 
<a name="l00192"></a><a class="code" href="class_ComputationManager.html#o5">00192</a>   <font class="keywordtype">bool</font> isCrashed;
00193   <font class="comment">// true when arcer reported about it's crash</font>
00194 
<a name="l00195"></a><a class="code" href="class_ComputationManager.html#o6">00195</a>   <font class="keywordtype">bool</font> wasStalled;
00196   <font class="comment">// Used to prevent repeated stall messages.</font>
00197 
00198   <font class="comment">// These are the tags for messages handled by objects in this class:</font>
00199 
<a name="l00200"></a><a class="code" href="class_ComputationManager.html#u7">00200</a>   <font class="keyword">enum</font> MessageTag {
00201          VIEW_REQUEST, ARC_UPDATE, START, SUSPEND, RESUME, TERMINATE, PARAMETER
00202   };
00203 
00204 };
00205 
00206 <font class="preprocessor">#endif</font>
00207 <font class="preprocessor"></font>
</pre></div><hr><address><small>Generated at Tue Jun 19 09:49:37 2001 for Magnus Classes by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.6 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2001</small></address>
</body>
</html>
