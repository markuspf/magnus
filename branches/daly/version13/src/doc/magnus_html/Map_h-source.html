<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta name="robots" content="noindex">
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>/magnus/back_end/Map/include/Map.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.6 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>/magnus/back_end/Map/include/Map.h</h1><a href="Map_h.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <font class="comment">/*</font>
00002 <font class="comment"> *   $Id: Map.h,v 1.6 2000/02/09 23:59:54 bormotov Exp $</font>
00003 <font class="comment"> */</font>
00004 
00005 <font class="comment">// Copyright (C) 1994 The New York Group Theory Cooperative</font>
00006 <font class="comment">// See magnus/doc/COPYRIGHT for the full notice.</font>
00007 
00008 <font class="comment">// Contents: definition of MapRep and Map classes</font>
00009 <font class="comment">//</font>
00010 <font class="comment">// * provisional, one class implementation of the notion of map and</font>
00011 <font class="comment">//   homomorphism.</font>
00012 <font class="comment">//</font>
00013 <font class="comment">// Principal Author: Stephane Collart</font>
00014 <font class="comment">//</font>
00015 <font class="comment">// Status: under trial</font>
00016 <font class="comment">//</font>
00017 <font class="comment">// Restrictions:</font>
00018 <font class="comment">//</font>
00019 <font class="comment">// * the map may only be defined in terms of formal images in the</font>
00020 <font class="comment">//   generators of the range group</font>
00021 <font class="comment">//</font>
00022 <font class="comment">// * images can only be computed of formal words in the generators of</font>
00023 <font class="comment">//   the domain group</font>
00024 <font class="comment">//</font>
00025 <font class="comment">// * in order for formal words to have meaningful interpretations in the</font>
00026 <font class="comment">//   domain and range groups, both must be finitely generated</font>
00027 <font class="comment">//</font>
00028 <font class="comment">// * in keeping with the restriction to formal word images, the default</font>
00029 <font class="comment">//   is to evaluate an image as a formal word; to compute an evaluated</font>
00030 <font class="comment">//   image, use evalImage() and postEvalImage().</font>
00031 <font class="comment">//</font>
00032 <font class="comment">// Discussion:</font>
00033 <font class="comment">//</font>
00034 <font class="comment">// * Is it convenient for a map to be default initialised to the</font>
00035 <font class="comment">//   trivial map (everything mapped to the identity?) Is there</font>
00036 <font class="comment">//   and alternative? Should in cases where there are enough generators</font>
00037 <font class="comment">//   in the range the identity be preferred? And then all the necessary</font>
00038 <font class="comment">//   checks be made?</font>
00039 <font class="comment">//</font>
00040 <font class="comment">// * When moving to a more general map scheme, permitting e.g.</font>
00041 <font class="comment">//   additionally + images defined via actual elements + arbitrary domain</font>
00042 <font class="comment">//   and map groups, + etc, more machinery must be provided to</font>
00043 <font class="comment">//   distinguish and deal with the various cases in which formal or</font>
00044 <font class="comment">//   actual elements are encountered.</font>
00045 <font class="comment">//</font>
00046 <font class="comment">// Revision History:</font>
00047 <font class="comment">//</font>
00048 <font class="comment">// *@rn: dp, ep should indicate their changes here.</font>
00049 <font class="comment">//</font>
00050 <font class="comment">//  07/96 Alexey M. implemented IPC tools</font>
00051 <font class="comment">//</font>
00052 <font class="comment">//  01/99 Dmitry B. changed operator == for MapRep (see comments below)</font>
00053 <font class="comment">//</font>
00054 
00055 
00056 <font class="preprocessor">#ifndef _MAP_H_</font>
00057 <font class="preprocessor"></font><font class="preprocessor">#define _MAP_H_</font>
00058 <font class="preprocessor"></font>
00059 <font class="preprocessor">#include &lt;iostream.h&gt;</font>
00060 
00061 <font class="preprocessor">#include "<a class="code" href="GenericObject_h.html">GenericObject.h</a>"</font>
00062 <font class="preprocessor">#include "<a class="code" href="DerivedObjectOf_h.html">DerivedObjectOf.h</a>"</font>
00063 <font class="preprocessor">#include "<a class="code" href="Vector_h.html">Vector.h</a>"</font>
00064 <font class="preprocessor">#include "<a class="code" href="Set_h.html">Set.h</a>"</font>
00065 <font class="preprocessor">#include "<a class="code" href="Elt_h.html">Elt.h</a>"</font>
00066 <font class="preprocessor">#include "<a class="code" href="Group_h.html">Group.h</a>"</font>
00067 <font class="preprocessor">#include "<a class="code" href="FGGroup_h.html">FGGroup.h</a>"</font>
00068 <font class="preprocessor">#include "<a class="code" href="FPGroup_h.html">FPGroup.h</a>"</font>
00069 <font class="comment">//#include "FreeGroup.h"</font>
00070 
00071 
00072 <font class="comment">//------------------------- MapRep ---------------------------//</font>
00073 
<a name="l00074"></a><a class="code" href="struct_MapRep.html">00074</a> <font class="keyword">struct </font><a class="code" href="struct_MapRep.html">MapRep</a> : <a class="code" href="struct_GenericRep.html">GenericRep</a> {
00075 
00076   <font class="comment">// constructors:</font>
00077 
00078   <font class="comment">// no default constructor</font>
00079 
00080   <font class="comment">// copy constructor suppled by compiler (does logical deep-copy)</font>
00081 
<a name="l00082"></a><a class="code" href="struct_MapRep.html#a0">00082</a>   <a class="code" href="struct_MapRep.html#a0">MapRep</a>( <font class="keyword">const</font> <a class="code" href="class_FGGroup.html">FGGroup</a>&amp; domain,
00083           <font class="keyword">const</font> <a class="code" href="class_FGGroup.html">FGGroup</a>&amp; range ) :
00084     theDomain(domain), theRange(range), 
00085     theGeneratingImages(domain.numberOfGenerators())  { }
00086 
<a name="l00087"></a><a class="code" href="struct_MapRep.html#a1">00087</a>   <a class="code" href="struct_MapRep.html#a0">MapRep</a>(<font class="keyword">const</font> <a class="code" href="class_FGGroup.html">FGGroup</a>&amp; domain,
00088          <font class="keyword">const</font> <a class="code" href="class_FGGroup.html">FGGroup</a>&amp; range,
00089          <font class="keyword">const</font> <a class="code" href="class_VectorOf.html">VectorOf&lt;Word&gt;</a>&amp; generatingImages ) :
00090     theDomain(domain),
00091     theRange(range),
00092     theGeneratingImages(generatingImages) { }
00093 
00094   <font class="comment">// destructor supplied by compiler (members have own destructors)</font>
00095 
00096   <font class="comment">// representation members:</font>
00097 
<a name="l00098"></a><a class="code" href="struct_MapRep.html#a2">00098</a>   <a class="code" href="struct_PureRep.html">PureRep</a>* <a class="code" href="struct_GenericRep.html#a1">clone</a>( )<font class="keyword"> const </font>{ <font class="keywordflow">return</font> <font class="keyword">new</font> <a class="code" href="struct_MapRep.html#a0">MapRep</a>(*<font class="keyword">this</font>); }
00099 
00100   <font class="comment">// standard operators</font>
00101 
00102   <font class="comment">/* @db we should probably just check the number of generators,</font>
00103 <font class="comment">         not to compare the whole groups?</font>
00104 <font class="comment"></font>
00105 <font class="comment">  bool operator == (const MapRep&amp; m) const {</font>
00106 <font class="comment">    return (theDomain == m.theDomain &amp;&amp; theRange == m.theRange &amp;&amp;</font>
00107 <font class="comment">            theGeneratingImages == m.theGeneratingImages);</font>
00108 <font class="comment">  }</font>
00109 <font class="comment">  */</font>
<a name="l00110"></a><a class="code" href="struct_MapRep.html#a3">00110</a>   <font class="keywordtype">bool</font> <a class="code" href="Property_h.html#a1">operator == </a>(<font class="keyword">const</font> <a class="code" href="struct_MapRep.html">MapRep</a>&amp; m)<font class="keyword"> const </font>{
00111     <font class="keywordflow">return</font> 
00112       ( theDomain.<a class="code" href="class_FGGroup.html#a1">numberOfGenerators</a>() == m.theDomain.numberOfGenerators() 
00113         &amp;&amp; theRange.<a class="code" href="class_FGGroup.html#a1">numberOfGenerators</a>() == m.theRange.numberOfGenerators() 
00114         &amp;&amp; theGeneratingImages == m.theGeneratingImages
00115         );
00116   }
00117 
00118   <font class="comment">// I/O</font>
00119 
00120   <a class="code" href="struct_MapRep.html">MapRep</a>* <a class="code" href="struct_MapRep.html#a4">readFrom</a>(istream&amp; istr, <a class="code" href="class_Chars.html">Chars</a>&amp; errMesg) <font class="keyword">const</font>;
00121 
00122 
00123   <font class="comment">//  virtual void checkMapProperties() const;</font>
00124   <font class="comment">// Checks whether the map is a monomorphism and/or epimorphism.</font>
00125   <font class="comment">// Sets corresponding flags.</font>
00126   <font class="comment">// This can be done only for homomorphisms (isHom is true) and</font>
00127   <font class="comment">// only for free groups.</font>
00128 
00129 <font class="comment"></font>
00130 <font class="comment">  //////////////////////////////////////////////////////////////////////</font>
00131 <font class="comment"></font>  <font class="comment">//                                                                  //</font>
00132   <font class="comment">// Type Stuff and Access:                                           //</font>
00133   <font class="comment">//                                                                  //</font><font class="comment"></font>
00134 <font class="comment">  //////////////////////////////////////////////////////////////////////</font>
00135 <font class="comment"></font>
<a name="l00136"></a><a class="code" href="struct_MapRep.html#p0">00136</a>   <font class="keyword">static</font> <font class="keyword">const</font> <a class="code" href="class_Type.html">Type</a> theMapType;
00137 
<a name="l00138"></a><a class="code" href="struct_MapRep.html#d0">00138</a>   <font class="keyword">static</font> <a class="code" href="class_Type.html">Type</a> <a class="code" href="struct_GenericRep.html#d0">type</a>()<font class="keyword"> </font>{ <font class="keywordflow">return</font> theMapType; }
00139 
<a name="l00140"></a><a class="code" href="struct_MapRep.html#a5">00140</a>   <a class="code" href="class_Type.html">Type</a> <a class="code" href="struct_GenericRep.html#a0">actualType</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> <a class="code" href="struct_GenericRep.html#d0">type</a>(); } <font class="comment">// overrides</font>
00141 <font class="comment"></font>
00142 <font class="comment">  /////////////////////////////////////////////////////////////////////////</font>
00143 <font class="comment"></font>  <font class="comment">//                                                                     //</font>
00144   <font class="comment">// IPC tools:                                                          //</font>
00145   <font class="comment">//                                                                     //</font><font class="comment"></font>
00146 <font class="comment">  /////////////////////////////////////////////////////////////////////////</font>
00147 <font class="comment"></font>
<a name="l00148"></a><a class="code" href="struct_MapRep.html#a6">00148</a>   <font class="keywordtype">void</font>  <a class="code" href="struct_MapRep.html#a6">write</a>( ostream&amp; ostr )<font class="keyword"> const </font>{
00149       ostr &lt; theDomain;
00150       ostr &lt; theRange;
00151       ostr &lt; theGeneratingImages;
00152       ostr &lt; theFlags.isHom &lt;  theFlags.isMono &lt;  theFlags.isEpi;
00153   }
<a name="l00154"></a><a class="code" href="struct_MapRep.html#a7">00154</a>   <font class="keywordtype">void</font>  <a class="code" href="struct_MapRep.html#a7">read</a>( istream&amp; istr )<font class="keyword"></font>{
00155       istr &gt; theDomain;
00156       istr &gt; theRange;
00157       istr &gt; theGeneratingImages;
00158       istr &gt;  theFlags.isHom &gt;  theFlags.isMono &gt; theFlags.isEpi;
00159   }
00160 
00161   <font class="comment">// data members:</font>
00162 
00163   <font class="comment">// real data:</font>
<a name="l00164"></a><a class="code" href="struct_MapRep.html#m0">00164</a>   <a class="code" href="class_FGGroup.html">FGGroup</a> theDomain;
<a name="l00165"></a><a class="code" href="struct_MapRep.html#m1">00165</a>   <a class="code" href="class_FGGroup.html">FGGroup</a> theRange;
<a name="l00166"></a><a class="code" href="struct_MapRep.html#m2">00166</a>   <a class="code" href="class_VectorOf.html">VectorOf&lt;Word&gt;</a> theGeneratingImages;
00167 
00168   <font class="comment">// flags:</font>
<a name="l00169"></a><a class="code" href="struct_MapRep__MapProperties.html">00169</a>   <font class="keyword">struct </font>MapProperties {
<a name="l00170"></a><a class="code" href="struct_MapRep__MapProperties.html#m0">00170</a>     <a class="code" href="class_Trichotomy.html">Trichotomy</a> isHom;
<a name="l00171"></a><a class="code" href="struct_MapRep__MapProperties.html#m1">00171</a>     <a class="code" href="class_Trichotomy.html">Trichotomy</a> isMono;
<a name="l00172"></a><a class="code" href="struct_MapRep__MapProperties.html#m2">00172</a>     <a class="code" href="class_Trichotomy.html">Trichotomy</a> isEpi;
<a name="l00173"></a><a class="code" href="struct_MapRep__MapProperties.html#a0">00173</a>     <a class="code" href="struct_MapRep__MapProperties.html#a0">MapProperties</a>( ) :
00174       isHom(dontknow),
00175       isMono(dontknow),
00176       isEpi(dontknow)
00177     { }
00178   };
00179   
<a name="l00180"></a><a class="code" href="struct_MapRep.html#m3">00180</a>   MapProperties theFlags;
00181 
00182 <font class="keyword">private</font>:
00183 
00184   <a class="code" href="struct_MapRep.html">MapRep</a>&amp; <a class="code" href="class_RefCounter.html#c0">operator = </a>( <font class="keyword">const</font> <a class="code" href="struct_MapRep.html">MapRep</a>&amp; );
00185   <font class="comment">// disable assignment</font>
00186 
00187 };
00188 
00189 
00190 <font class="comment">//-------------------------- Map ---------------------------//</font>
00191 
00192 
<a name="l00193"></a><a class="code" href="class_Map.html">00193</a> <font class="keyword">class </font><a class="code" href="class_Map.html">Map</a> : <font class="keyword">public</font> <a class="code" href="class_DerivedObjectOf.html">DerivedObjectOf</a>&lt;GenericObject,MapRep&gt; {
00194 
00195 <font class="keyword">public</font>:
00196 <font class="comment"></font>
00197 <font class="comment">  ////////////////////////////////////////////////////////////////////</font>
00198 <font class="comment"></font>  <font class="comment">//                                                                //</font>
00199   <font class="comment">// Constructors                                                   //</font>
00200   <font class="comment">//                                                                //</font><font class="comment"></font>
00201 <font class="comment">  ////////////////////////////////////////////////////////////////////</font>
00202 <font class="comment"></font>
00203   <font class="comment">// @stc note the complete lack of consistency checks in the</font>
00204   <font class="comment">// constructors</font>
00205 
00206   <font class="comment">// no default constructor: domain and range groups must be given</font>
00207 
<a name="l00208"></a><a class="code" href="class_Map.html#a0">00208</a>   <a class="code" href="class_Map.html#a0">Map</a>( ) :
00209     <a class="code" href="class_DerivedObjectOf.html">DerivedObjectOf</a>&lt;<a class="code" href="class_GenericObject.html">GenericObject</a>,<a class="code" href="struct_MapRep.html">MapRep</a>&gt;(
00210       new <a class="code" href="struct_MapRep.html">MapRep</a>(<a class="code" href="class_FPGroup.html">FPGroup</a>(),<a class="code" href="class_FPGroup.html">FPGroup</a>(), <a class="code" href="class_VectorOf.html">VectorOf</a>&lt;<a class="code" href="class_Word.html">Word</a>&gt;())
00211                                                                                                                 )
00212   { }
00213   <font class="comment">// copy constructor supplied by compiler</font>
00214 
<a name="l00215"></a><a class="code" href="class_Map.html#a1">00215</a>   <a class="code" href="class_Map.html#a0">Map</a>( <font class="keyword">const</font> <a class="code" href="class_FGGroup.html">FGGroup</a>&amp; domain,
00216        <font class="keyword">const</font> <a class="code" href="class_FGGroup.html">FGGroup</a>&amp; range ) :
00217     <a class="code" href="class_DerivedObjectOf.html">DerivedObjectOf</a>&lt;<a class="code" href="class_GenericObject.html">GenericObject</a>,<a class="code" href="struct_MapRep.html">MapRep</a>&gt;(
00218                                           new <a class="code" href="struct_MapRep.html">MapRep</a>(domain, range, <a class="code" href="class_VectorOf.html">VectorOf</a>&lt;<a class="code" href="class_Word.html">Word</a>&gt;(domain.numberOfGenerators()))
00219                                           )
00220   { }
00221   <font class="comment">// to construct a map with unspecified images;</font>
00222   <font class="comment">// by default, becomes the trivial map, i.e.</font>
00223   <font class="comment">// the map mapping everything to the identity;</font>
00224   <font class="comment">// Word's default constructor takes care of initialising</font>
00225   <font class="comment">// the generating images to the identity.</font>
00226 
<a name="l00227"></a><a class="code" href="class_Map.html#a2">00227</a>   <a class="code" href="class_Map.html#a0">Map</a>( <font class="keyword">const</font> <a class="code" href="class_FGGroup.html">FGGroup</a>&amp; domain,
00228        <font class="keyword">const</font> <a class="code" href="class_FGGroup.html">FGGroup</a>&amp; range,
00229        <font class="keyword">const</font> <a class="code" href="class_VectorOf.html">VectorOf&lt;Word&gt;</a>&amp; generatingImages ) :
00230     <a class="code" href="class_DerivedObjectOf.html">DerivedObjectOf</a>&lt;<a class="code" href="class_GenericObject.html">GenericObject</a>,<a class="code" href="struct_MapRep.html">MapRep</a>&gt;(
00231                                           new <a class="code" href="struct_MapRep.html">MapRep</a>(domain,range,generatingImages)
00232                                           ) {
00233 
00234 <font class="preprocessor">#if SAFETY &gt; 0 // temporary restriction</font>
00235 <font class="preprocessor"></font>      <font class="keywordflow">if</font> (generatingImages.<a class="code" href="class_VectorOf.html#a11">length</a>() != domain.<a class="code" href="class_FGGroup.html#a1">numberOfGenerators</a>())
00236         <a class="code" href="error_h.html#a0">error</a>(<font class="stringliteral">"wrong number of generating images in"</font>
00237               <font class="stringliteral">" Map::Map(domain,range,generatingImages)"</font>);
00238 <font class="preprocessor">#endif</font>
00239 <font class="preprocessor"></font>  }
00240   <font class="comment">// to construct a map, given a domain and range group, and images</font>
00241   <font class="comment">// for the generators of the domain</font>
00242   <font class="comment">// @stc this should do some fancy stuff to deal with cases when</font>
00243   <font class="comment">// too few or too many generating images are given (both could be</font>
00244   <font class="comment">// legal with appropriate semantics)</font>
00245 
00246   <font class="comment">// destructor supplied by compiler</font>
00247 <font class="comment"></font>
00248 <font class="comment">  ////////////////////////////////////////////////////////////////////</font>
00249 <font class="comment"></font>  <font class="comment">//                                                                //</font>
00250   <font class="comment">// Standard Operators                                             //</font>
00251   <font class="comment">//                                                                //</font><font class="comment"></font>
00252 <font class="comment">  ////////////////////////////////////////////////////////////////////</font>
00253 <font class="comment"></font>
<a name="l00254"></a><a class="code" href="class_Map.html#a3">00254</a>   <font class="keywordtype">bool</font> <a class="code" href="Property_h.html#a1">operator == </a>( <font class="keyword">const</font> <a class="code" href="class_Map.html">Map</a>&amp; m )<font class="keyword"> const </font>{ 
00255     <font class="keywordflow">return</font> <a class="code" href="class_DerivedObjectOf.html#b0">look</a>() == m.<a class="code" href="class_DerivedObjectOf.html#b0">look</a>() || *<a class="code" href="class_DerivedObjectOf.html#b0">look</a>() == *m.<a class="code" href="class_DerivedObjectOf.html#b0">look</a>(); 
00256   }
00257 <font class="comment"></font>
00258 <font class="comment">  ////////////////////////////////////////////////////////////////////</font>
00259 <font class="comment"></font>  <font class="comment">//                                                                //</font>
00260   <font class="comment">// Accessors / Modifiers                                          //</font>
00261   <font class="comment">//                                                                //</font><font class="comment"></font>
00262 <font class="comment">  ////////////////////////////////////////////////////////////////////</font>
00263 <font class="comment"></font>
<a name="l00264"></a><a class="code" href="class_Map.html#d0">00264</a>   <font class="keyword">static</font> <a class="code" href="class_Type.html">Type</a> <a class="code" href="struct_GenericRep.html#d0">type</a>( )<font class="keyword"> </font>{ <font class="keywordflow">return</font> <a class="code" href="struct_GenericRep.html#d0">MapRep::type</a>(); }
00265 
00266   <font class="comment">// @stc it is assumed that domain, range and generatingImages</font>
00267   <font class="comment">// in their entirety are modified infrequently, hence seperate</font>
00268   <font class="comment">// members are provided to (re)set them</font>
00269   <font class="comment">// individual generatingImages might be modified more often;</font>
00270   <font class="comment">// hence, for convenience, an intermediate assignable result is</font>
00271   <font class="comment">// constructed when taking the image of a generator</font>
00272 
<a name="l00273"></a><a class="code" href="class_Map.html#a4">00273</a>   <font class="keyword">const</font> <a class="code" href="class_FGGroup.html">FGGroup</a>&amp; <a class="code" href="class_Map.html#a4">domain</a>( )<font class="keyword"> const </font>{ <font class="keywordflow">return</font> <a class="code" href="class_DerivedObjectOf.html#b0">look</a>()-&gt;theDomain; }
00274   <font class="comment">// to poll the domain of definition of the map</font>
00275   <font class="comment">// not for modification</font>
00276 
<a name="l00277"></a><a class="code" href="class_Map.html#a5">00277</a>   <font class="keyword">const</font> <a class="code" href="class_FGGroup.html">FGGroup</a>&amp; <a class="code" href="class_Map.html#a5">range</a>( )<font class="keyword"> const </font>{ <font class="keywordflow">return</font> <a class="code" href="class_DerivedObjectOf.html#b0">look</a>()-&gt;theRange; }
00278   <font class="comment">// to poll the range of definition of the map</font>
00279   <font class="comment">// not for modification</font>
00280 
00281   <font class="keywordtype">void</font> <a class="code" href="class_Map.html#a6">setDomain</a>( <font class="keyword">const</font> <a class="code" href="class_FGGroup.html">FGGroup</a>&amp; g );
00282   <font class="comment">// to modify domain group; if the number of generators of g is less</font>
00283   <font class="comment">// than the number of stored generating images, the extra ones are</font>
00284   <font class="comment">// thrown away; if it is greater, the additional generating images</font>
00285   <font class="comment">// are uninitialised</font>
00286   <font class="comment">// @stc more fancy facilities should be provided to specify how one</font>
00287   <font class="comment">// wants to reuse the old images.</font>
00288 
<a name="l00289"></a><a class="code" href="class_Map.html#a7">00289</a>   <font class="keywordtype">void</font> <a class="code" href="class_Map.html#a7">setRange</a>( <font class="keyword">const</font> <a class="code" href="class_FGGroup.html">FGGroup</a>&amp; g )<font class="keyword"> </font>{ <a class="code" href="class_DerivedObjectOf.html#b2">change</a>()-&gt;theRange = g; }
00290   <font class="comment">// to set of modify range group</font>
00291   <font class="comment">// @stc this should check the images for validity</font>
00292 
<a name="l00293"></a><a class="code" href="class_Map.html#a8">00293</a>   <font class="keyword">const</font> <a class="code" href="class_VectorOf.html">VectorOf&lt;Word&gt;</a>&amp; <a class="code" href="class_Map.html#a8">generatingImages</a>( )<font class="keyword"> const</font>
00294 <font class="keyword">  </font>{ <font class="keywordflow">return</font> <a class="code" href="class_DerivedObjectOf.html#b0">look</a>()-&gt;theGeneratingImages; }
00295   <font class="comment">// to poll the defining images of the map</font>
00296   <font class="comment">// not for modification</font>
00297 
<a name="l00298"></a><a class="code" href="class_Map.html#a9">00298</a>   <a class="code" href="class_Word.html">Word</a> <a class="code" href="class_Map.html#a8">generatingImages</a>( <font class="keywordtype">int</font> i )<font class="keyword"> const</font>
00299 <font class="keyword">  </font>{ <font class="keywordflow">return</font> <a class="code" href="class_DerivedObjectOf.html#b0">look</a>()-&gt;theGeneratingImages[i]; }
00300   <font class="comment">// to poll the i'th defining image (0-based indexing)</font>
00301   <font class="comment">// not for modification</font>
00302   <font class="comment">// @stc this cannot be made to return a const ref, as</font>
00303   <font class="comment">// theGeneratingImages[i] is not an lvalue and this would be a</font>
00304   <font class="comment">// a dangling reference</font>
00305   <font class="comment">// when changing the MapRep this could change</font>
00306 
<a name="l00307"></a><a class="code" href="class_Map.html#a10">00307</a>   <a class="code" href="class_Word.html">Word</a> <a class="code" href="class_Map.html#a8">generatingImages</a>( <font class="keyword">const</font> <a class="code" href="class_Generator.html">Generator</a>&amp; g )<font class="keyword"> const </font>{
00308     <font class="keywordtype">int</font> Ord = ord(g)-1;
00309     <font class="keywordflow">if</font>( Ord &gt;= 0 ) 
00310       <font class="keywordflow">return</font> <a class="code" href="class_Map.html#a8">generatingImages</a>(Ord);
00311     <font class="keywordflow">else</font> 
00312       <font class="keywordflow">return</font> <a class="code" href="class_Map.html#a8">generatingImages</a>(-Ord).<a class="code" href="class_Word.html#a30">inverse</a>();
00313   }
00314 
<a name="l00315"></a><a class="code" href="class_Map.html#a11">00315</a>   <font class="keywordtype">void</font> <a class="code" href="class_Map.html#a11">setGeneratingImages</a>( <font class="keyword">const</font> <a class="code" href="class_VectorOf.html">VectorOf&lt;Word&gt;</a> gi )<font class="keyword"> </font>{
00316 
00317 <font class="preprocessor">#if SAFETY &gt; 0</font>
00318 <font class="preprocessor"></font>    <font class="keywordflow">if</font> (gi.<a class="code" href="class_VectorOf.html#a11">length</a>() != <a class="code" href="class_Map.html#a4">domain</a>().<a class="code" href="class_FGGroup.html#a1">numberOfGenerators</a>())
00319       <a class="code" href="error_h.html#a0">error</a>(<font class="stringliteral">"wrong number of generating images in"</font>
00320             <font class="stringliteral">" Map::setGeneratingImages( const VectorOf&lt;Word&gt; )"</font>);
00321 <font class="preprocessor">#endif</font>
00322 <font class="preprocessor"></font>
00323     <a class="code" href="class_DerivedObjectOf.html#b2">change</a>()-&gt;theGeneratingImages = gi;
00324   }
00325   <font class="comment">// to set or modify generating images</font>
00326 
<a name="l00327"></a><a class="code" href="class_Map.html#a12">00327</a>   <font class="keywordtype">void</font> <a class="code" href="class_Map.html#a11">setGeneratingImages</a>( <font class="keywordtype">int</font> i, <font class="keyword">const</font> <a class="code" href="class_Word.html">Word</a>&amp; e  )<font class="keyword"> </font>{
00328 
00329 <font class="preprocessor">#if SAFETY &gt; 0</font>
00330 <font class="preprocessor"></font>    <font class="keywordflow">if</font> (i &lt; 0 || i &gt;= <a class="code" href="class_Map.html#a4">domain</a>().<a class="code" href="class_FGGroup.html#a1">numberOfGenerators</a>())
00331       <a class="code" href="error_h.html#a0">error</a>(<font class="stringliteral">"generating image index out of range in"</font>
00332             <font class="stringliteral">" Map::setGeneratingImages(int, const Word&amp;)"</font>);
00333 <font class="preprocessor">#endif</font>
00334 <font class="preprocessor"></font>    <a class="code" href="class_DerivedObjectOf.html#b2">change</a>()-&gt;theGeneratingImages[i] = e;
00335   }
00336   <font class="comment">// to assign to the i-th (0-based) generating image</font>
00337 
<a name="l00338"></a><a class="code" href="class_Map.html#a13">00338</a>   <font class="keywordtype">void</font> <a class="code" href="class_Map.html#a11">setGeneratingImages</a>( <font class="keyword">const</font> <a class="code" href="class_Generator.html">Generator</a>&amp; g, <font class="keyword">const</font> <a class="code" href="class_Word.html">Word</a>&amp; w )<font class="keyword"> </font>{
00339     <font class="keywordtype">int</font> Ord = ord(g);
00340     <font class="keywordflow">if</font>( Ord &gt; 0 ) <a class="code" href="class_Map.html#a11">setGeneratingImages</a>(Ord-1, w);
00341     <font class="keywordflow">else</font> <a class="code" href="class_Map.html#a11">setGeneratingImages</a>(-Ord-1, w.<a class="code" href="class_Word.html#a30">inverse</a>());
00342   }
00343         <font class="comment"></font>
00344 <font class="comment">  ////////////////////////////////////////////////////////////////////</font>
00345 <font class="comment"></font>  <font class="comment">//                                                                //</font>
00346   <font class="comment">// Mapping methods                                                //</font>
00347   <font class="comment">//                                                                //</font><font class="comment"></font>
00348 <font class="comment">  ////////////////////////////////////////////////////////////////////</font>
00349 <font class="comment"></font>
00350   <font class="comment">// computing images:</font>
00351   <font class="comment">// formally:</font>
00352 
<a name="l00353"></a><a class="code" href="class_Map.html#a14">00353</a>   <a class="code" href="class_Word.html">Word</a> <a class="code" href="class_Map.html#a14">imageOf</a>( <font class="keyword">const</font> <a class="code" href="class_Word.html">Word</a>&amp; w )<font class="keyword"> const</font>
00354 <font class="keyword">  </font>{ <font class="keywordflow">return</font> w.<a class="code" href="class_Word.html#a24">replaceGenerators</a>( <a class="code" href="class_DerivedObjectOf.html#b0">look</a>()-&gt;theGeneratingImages ); }
00355   <font class="comment">// takes a formal word in the generators of domain and evaluates its</font>
00356   <font class="comment">// `image' in range; if the images are defined via formal words,</font>
00357   <font class="comment">// then the result is also a formal word.</font>
00358   <font class="comment">// @stc this bears discussion -- should a seperate image evaluater</font>
00359   <font class="comment">// also be provided?</font>
00360 
00361   <a class="code" href="class_Word.html">Word</a> <a class="code" href="class_Map.html#a14">imageOf</a>( <font class="keyword">const</font> <a class="code" href="class_Generator.html">Generator</a>&amp; g ) <font class="keyword">const</font>;
00362   <font class="comment">// image of generator g; not an lvalue</font>
00363 
00364   <font class="comment">// computing images:</font>
00365   <font class="comment">// evaluated:</font>
00366 
00367   <a class="code" href="class_Elt.html">Elt</a> <a class="code" href="class_Map.html#a16">evalImage</a>( <font class="keyword">const</font> <a class="code" href="class_Word.html">Word</a>&amp; w ) <font class="keyword">const</font>;
00368   <font class="comment">// to compute the image, using the range's operations</font>
00369 
<a name="l00370"></a><a class="code" href="class_Map.html#a17">00370</a>   <a class="code" href="class_Elt.html">Elt</a> <a class="code" href="class_Map.html#a17">postEvalImage</a>( <font class="keyword">const</font> <a class="code" href="class_Word.html">Word</a>&amp; w )<font class="keyword"> const </font>{
00371     <font class="keywordflow">return</font> <a class="code" href="class_Map.html#a5">range</a>().<a class="code" href="class_FGGroup.html#a5">eval</a>( <a class="code" href="class_Map.html#a14">imageOf</a>(w) );
00372   }
00373   <font class="comment">// to compute an image formally, the evaluate it in the range</font>
00374 
00375   <font class="comment">// operations on maps:</font>
00376 
00377   <font class="keyword">friend</font> <a class="code" href="class_Map.html">Map</a> <a class="code" href="class_Map.html#l0">composition</a>( <font class="keyword">const</font> <a class="code" href="class_Map.html">Map</a>&amp; secondMap,
00378                           <font class="keyword">const</font> <a class="code" href="class_Map.html">Map</a>&amp; firstMap );
00379   <font class="comment">// map-theoretic composition</font>
00380 
00381   <a class="code" href="class_Map.html">Map</a>&amp; <a class="code" href="class_Map.html#a18">composeAfter</a>( <font class="keyword">const</font> <a class="code" href="class_Map.html">Map</a>&amp; firstMap );
00382   <font class="comment">// equivalent to as *this = composition(*this,firstMap);</font>
00383   <font class="comment">// @stc tricky one to name: not to confuse the order of composition</font>
00384 
<a name="l00385"></a><a class="code" href="class_Map.html#a19">00385</a>   <a class="code" href="class_Map.html">Map</a> <a class="code" href="NielsenTransformations_h.html#a5">operator | </a>( <font class="keyword">const</font> <a class="code" href="class_Map.html">Map</a>&amp; secondMap )<font class="keyword"></font>
00386 <font class="keyword">  </font>{ <font class="keywordflow">return</font> <a class="code" href="class_Map.html#l0">composition</a>(secondMap,*<font class="keyword">this</font>); }
00387   <font class="comment">// @stc this is a tentative operator abbreviation for</font>
00388   <font class="comment">// composition -- its intuitive iterpretation should be a pipe,</font>
00389   <font class="comment">// hence composition is left to right; its advantage is to permit</font>
00390   <font class="comment">// syntactically light concatenation: fcomp = f1 | f2 | f3;</font>
00391   <font class="comment">// In the same line of thought an Word | Map is provided below</font>
00392   <font class="comment">// @stc not a global to avoid most kinds of unintended conversions</font>
00393 <font class="comment"></font>
00394 <font class="comment">  ////////////////////////////////////////////////////////////////////</font>
00395 <font class="comment"></font>  <font class="comment">//                                                                //</font>
00396   <font class="comment">// Mapping properties                                             //</font>
00397   <font class="comment">//                                                                //</font><font class="comment"></font>
00398 <font class="comment">  ////////////////////////////////////////////////////////////////////</font>
00399 <font class="comment"></font>
00400   <font class="comment">// @stc values cast to Trichotomy before returning to keep warnings</font>
00401   <font class="comment">// silent</font>
00402 
<a name="l00403"></a><a class="code" href="class_Map.html#a20">00403</a>   <a class="code" href="class_Trichotomy.html">Trichotomy</a> <a class="code" href="class_Map.html#a20">extendsToHom</a>( )<font class="keyword"> const </font>{
00404     <font class="keywordflow">return</font> <a class="code" href="class_DerivedObjectOf.html#b0">look</a>()-&gt;theFlags.isHom;
00405   }
00406 
<a name="l00407"></a><a class="code" href="class_Map.html#a21">00407</a>   <font class="keywordtype">void</font> <a class="code" href="class_Map.html#a21">putIsMono</a>( )<font class="keyword"> const </font>{ <a class="code" href="class_DerivedObjectOf.html#b1">enhance</a>()-&gt;theFlags.isMono = yes; }
00408 
<a name="l00409"></a><a class="code" href="class_Map.html#a22">00409</a>   <a class="code" href="class_Trichotomy.html">Trichotomy</a> <a class="code" href="class_Map.html#a22">isMono</a>( )<font class="keyword"> const</font>
00410 <font class="keyword">  </font>{ <font class="keywordflow">return</font> Trichotomy(<a class="code" href="class_DerivedObjectOf.html#b0">look</a>()-&gt;theFlags.isMono); }
00411 
<a name="l00412"></a><a class="code" href="class_Map.html#a23">00412</a>   <font class="keywordtype">void</font> <a class="code" href="class_Map.html#a23">putIsEpi</a>( )<font class="keyword"> const </font>{ <a class="code" href="class_DerivedObjectOf.html#b1">enhance</a>()-&gt;theFlags.isEpi = yes; }
00413  
<a name="l00414"></a><a class="code" href="class_Map.html#a24">00414</a>   <a class="code" href="class_Trichotomy.html">Trichotomy</a> <a class="code" href="class_Map.html#a24">isEpi</a>( )<font class="keyword"> const</font>
00415 <font class="keyword">  </font>{ <font class="keywordflow">return</font> Trichotomy(<a class="code" href="class_DerivedObjectOf.html#b0">look</a>()-&gt;theFlags.isEpi); }
00416  
<a name="l00417"></a><a class="code" href="class_Map.html#a25">00417</a>   <a class="code" href="class_Trichotomy.html">Trichotomy</a> <a class="code" href="class_Map.html#a25">isIso</a>( )<font class="keyword"> const </font>{ 
00418 
00419     <font class="keywordflow">if</font> ( <a class="code" href="class_Map.html#a22">isMono</a>() == dontknow || <a class="code" href="class_Map.html#a24">isEpi</a>() == dontknow) <font class="keywordflow">return</font> dontknow;
00420     <font class="keywordflow">else</font> <font class="keywordflow">return</font> ( <a class="code" href="class_Map.html#a22">isMono</a>() == yes &amp;&amp; <a class="code" href="class_Map.html#a24">isEpi</a>() == yes );
00421   }
00422 
00423   <a class="code" href="class_Trichotomy.html">Trichotomy</a> <a class="code" href="class_Map.html#a26">isTrivialMap</a>( ) <font class="keyword">const</font>; <font class="comment">// @stc impl. tmp.</font>
00424 <font class="comment"></font>
00425 <font class="comment">  ////////////////////////////////////////////////////////////////////</font>
00426 <font class="comment"></font>  <font class="comment">//                                                                //</font>
00427   <font class="comment">// I/O                                                            //</font>
00428   <font class="comment">//                                                                //</font><font class="comment"></font>
00429 <font class="comment">  ////////////////////////////////////////////////////////////////////</font>
00430 <font class="comment"></font>
00431   <font class="keywordtype">void</font> <a class="code" href="class_Map.html#a27">printOn</a>(ostream&amp; ostr) <font class="keyword">const</font>;
00432  <font class="comment"></font>
00433 <font class="comment">  ////////////////////////////////////////////////////////////////////</font>
00434 <font class="comment"></font>  <font class="comment">//                                                                //</font>
00435   <font class="comment">// Debugging stuff                                                //</font>
00436   <font class="comment">//                                                                //</font><font class="comment"></font>
00437 <font class="comment">  ////////////////////////////////////////////////////////////////////</font>
00438 <font class="comment"></font> 
00439 <font class="preprocessor">#ifdef DEBUG</font>
00440 <font class="preprocessor"></font>
00441   <font class="comment">//friend int main( );</font>
00442 
00443   <font class="keywordtype">bool</font> consistent( )<font class="keyword"> </font>{
00444     <font class="comment">// the map object is assumed to be consistent if it has no defining</font>
00445     <font class="comment">// images (uninitialised) or the correct number of defining images</font>
00446 
00447     <font class="keywordflow">if</font> (<a class="code" href="class_DerivedObjectOf.html#b0">look</a>()-&gt;theGeneratingImages.length() !=
00448         <a class="code" href="class_DerivedObjectOf.html#b0">look</a>()-&gt;theDomain.numberOfGenerators() &amp;&amp;
00449         <a class="code" href="class_DerivedObjectOf.html#b0">look</a>()-&gt;theGeneratingImages.length() != 0)
00450       <font class="keywordflow">return</font> <font class="keyword">false</font>;
00451     <font class="keywordflow">return</font> <font class="keyword">true</font>;
00452     <font class="comment">// @stc this should also check the defining images themselves</font>
00453     <font class="comment">// for consistency</font>
00454   }
00455 
00456 <font class="preprocessor">#endif</font>
00457 <font class="preprocessor"></font><font class="comment"></font>
00458 <font class="comment">  ////////////////////////////////////////////////////////////////////</font>
00459 <font class="comment"></font>  <font class="comment">//                                                                //</font>
00460   <font class="comment">// I/O                                                            //</font>
00461   <font class="comment">//                                                                //</font><font class="comment"></font>
00462 <font class="comment">  ////////////////////////////////////////////////////////////////////</font>
00463 <font class="comment"></font>
00464   <font class="keyword">friend</font> <a class="code" href="class_IStreamPoll.html">IStreamPoll</a> <a class="code" href="BaseProperties_h.html#a3">operator &gt;&gt; </a>( istream&amp;, <a class="code" href="class_Map.html">Map</a>&amp; );
00465 
00466 <font class="comment"></font>
00467 <font class="comment">  /////////////////////////////////////////////////////////////////////////</font>
00468 <font class="comment"></font>  <font class="comment">//                                                                     //</font>
00469   <font class="comment">// IPC tools:                                                          //</font>
00470   <font class="comment">//                                                                     //</font><font class="comment"></font>
00471 <font class="comment">  /////////////////////////////////////////////////////////////////////////</font>
00472 <font class="comment"></font>
<a name="l00473"></a><a class="code" href="class_Map.html#l2">00473</a>   <font class="keyword">friend</font> ostream&amp; <a class="code" href="Polynomial_h.html#a2">operator &lt; </a>( ostream&amp; ostr, <font class="keyword">const</font> <a class="code" href="class_Map.html">Map</a>&amp; M )<font class="keyword"></font>
00474 <font class="keyword">  </font>{
00475     M.<a class="code" href="class_DerivedObjectOf.html#b0">look</a>()-&gt;write(ostr);
00476     <font class="keywordflow">return</font> ostr;
00477   }
00478   
<a name="l00479"></a><a class="code" href="class_Map.html#l3">00479</a>   <font class="keyword">friend</font> istream&amp; <a class="code" href="Polynomial_h.html#a3">operator &gt; </a>( istream&amp; istr, <a class="code" href="class_Map.html">Map</a>&amp; M)<font class="keyword"></font>
00480 <font class="keyword">  </font>{
00481     M.<a class="code" href="class_DerivedObjectOf.html#b2">change</a>()-&gt;read(istr);
00482     <font class="keywordflow">return</font> istr;
00483   }
00484 
00485 <font class="comment"></font>
00486 <font class="comment">  ////////////////////////////////////////////////////////////////////</font>
00487 <font class="comment"></font>  <font class="comment">//                                                                //</font>
00488   <font class="comment">// Representation access methods                                  //</font>
00489   <font class="comment">//                                                                //</font><font class="comment"></font>
00490 <font class="comment">  ////////////////////////////////////////////////////////////////////</font>
00491 <font class="comment"></font> 
00492 <font class="keyword">protected</font>:
00493  
00494   <font class="comment">// Special wrapping constructor to wrap new representations (returned</font>
00495   <font class="comment">// by eg. delegated methods) and for base initialisation by derived</font>
00496   <font class="comment">// classes:</font>
00497  
<a name="l00498"></a><a class="code" href="class_Map.html#b0">00498</a>   <a class="code" href="class_Map.html#a0">Map</a>( <a class="code" href="struct_MapRep.html">MapRep</a>* newrep ) : <a class="code" href="class_DerivedObjectOf.html">DerivedObjectOf</a>&lt;<a class="code" href="class_GenericObject.html">GenericObject</a>,<a class="code" href="struct_MapRep.html">MapRep</a>&gt;(newrep) { }
00499 
00500 };
00501 
00502 
00503 <font class="comment">//------------------ Related global functions --------------------//</font>
00504 
00505 ostream&amp; <a class="code" href="DatabaseManager_h.html#a28">operator &lt;&lt; </a>( ostream&amp;, <font class="keyword">const</font> <a class="code" href="class_Map.html">Map</a>&amp; );
00506 
00507 
00508 <font class="preprocessor">#endif</font>
</font></pre></div><hr><address><small>Generated at Tue Jun 19 09:49:37 2001 for Magnus Classes by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.6 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2001</small></address>
</body>
</html>
